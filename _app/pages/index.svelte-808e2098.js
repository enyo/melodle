import{O as fc,P as vn,S as Oe,i as De,s as Ae,l as Mt,g as z,n as Ft,o as ne,E as ue,p as qt,e as P,t as Q,c as V,a as I,h as J,d as C,b as B,H as Es,N as A,j as Wt,Q as En,R as Xo,q as Z,k as ee,m as te,L as He,w as me,x as _e,y as ge,B as ve,T as qn,C as he,U as wt,V as Tt,W as Re,z as bt,X as Pe,Y as nt,Z as Ks,v as Zo,_ as ht,$ as Xt,a0 as Qo,F as Ji,I as Ki,J as eo,K as to,a1 as xn,a2 as pc}from"../chunks/index-5682f82d.js";import{w as si}from"../chunks/index-98728e8f.js";import{s as un,n as no}from"../chunks/settings-9cfd19f3.js";function Jo(s){const e=s-1;return e*e*e+1}function mc(s){return-s*(s-2)}function an(s,{delay:e=0,duration:t=400,easing:n=fc}={}){const r=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*r}`}}function so(s,{delay:e=0,duration:t=400,easing:n=Jo,start:r=0,opacity:i=0}={}){const o=getComputedStyle(s),a=+o.opacity,c=o.transform==="none"?"":o.transform,l=1-r,u=a*(1-i);return{delay:e,duration:t,easing:n,css:(h,f)=>`
			transform: ${c} scale(${1-l*f});
			opacity: ${a-u*f}
		`}}const _c={english:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],romance:["Do","Do#","Re","Re#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Si"],german:["C","C#","D","D#","E","F","F#","G","G#","A","A#","H"],solfege:["Do","Di","Re","Ri","Mi","Fa","Fi","Sol","Si","La","Li","Ti"]},xt=(s,{octave:e=!1,notation:t="english"}={})=>{const n=_c[t][s%12];return e?`${n}${Math.floor(s/12)}`:n},gc=(s,e)=>{if(e.length!=5)return!1;for(let t=0;t<5;t++)if(xt(e[t])!==xt(s[t]))return!1;return!0},ro=s=>s<0?s+12:s%12,Ko=(s,e,{difficulty:t,submitted:n=!1,mode:r="adjacent"})=>{if(!e)return[{},{},{},{},{}];e=e.map(ro);const i=s.map(ro),o=[];for(let a=0;a<5;a++)o[a]=e[a]!==void 0?{semitone:e[a]}:{};if(n){switch(e.forEach((a,c)=>{i[c]===a&&(o[c].status="correct",i[c]=void 0)}),r){case"position":e.forEach((a,c)=>{o[c].status===void 0&&i.includes(a)&&(o[c].status="wrong-position",i[i.indexOf(a)]=void 0)});break;case"adjacent":e.forEach((a,c)=>{const l=t==="easy"?[0,2,4,5,7,9,11]:Array.from(Array(12).keys()),u=l.indexOf(a),h=l[u-1],f=l[u+1];(h!==void 0&&h===i[c]||f!==void 0&&f===i[c])&&(o[c].status="adjacent",i[c]=void 0)});break}o.filter(a=>a.status===void 0).forEach(a=>a.status="incorrect")}return o},Hn=s=>{typeof window<"u"&&window.goatcounter!==void 0&&window.goatcounter.count({path:s,event:!0})},vc=[[0,9,11,11,7],[0,7,4,4,2],[0,9,9,9,4],[5,7,9,2,7],[7,5,11,0,9],[7,2,5,4,5],[11,0,4,7,11],[5,4,2,11,11],[9,7,0,2,4],[4,5,0,5,7],[2,5,4,11,9],[0,9,0,9,0],[4,7,7,7,9],[7,4,9,5,0],[2,11,7,5,7],[9,9,2,11,11],[9,4,4,11,9],[2,0,0,2,5],[11,0,0,9,2],[5,5,9,7,11],[0,2,9,2,2],[7,2,9,7,4],[4,5,11,4,4],[5,2,0,4,4],[11,11,11,7,5],[0,7,9,2,9],[7,11,5,9,2],[11,4,2,11,9],[0,7,4,0,5],[7,0,2,4,2],[4,5,5,9,11],[7,11,0,7,0],[11,11,7,5,11],[4,4,11,11,9],[2,4,2,11,4],[5,9,5,11,4],[2,9,7,7,4],[7,9,9,5,9],[5,5,9,5,2],[5,2,0,9,5],[11,7,7,9,2],[4,7,2,4,11],[0,2,4,2,9],[9,11,2,2,11],[0,9,5,2,9],[0,4,9,11,7],[5,0,7,11,7],[4,5,2,0,9],[9,9,4,7,7],[7,11,9,0,0],[5,5,9,5,0],[7,5,0,7,9],[0,5,9,4,2],[11,11,4,0,5],[2,4,0,9,2],[5,11,5,11,2],[4,9,0,4,11],[2,2,9,4,7],[4,11,9,7,4],[11,0,0,11,0],[5,5,2,9,7],[0,9,11,7,2],[9,4,9,7,0],[0,4,5,2,11],[0,7,4,11,4],[11,0,9,9,5],[5,5,0,9,11],[4,7,11,7,0],[2,2,11,2,5],[9,11,2,0,0],[11,7,0,9,4],[5,7,11,4,9],[4,9,11,2,2],[2,0,9,11,9],[11,11,9,2,7],[0,2,5,9,11],[11,4,9,5,7],[11,11,7,2,7],[9,7,11,4,11],[0,0,5,2,5],[4,11,2,2,9],[5,0,11,5,11],[4,9,7,5,0],[5,4,5,5,7],[5,9,7,0,7],[7,5,11,7,0],[2,0,2,7,4],[5,0,2,5,2],[9,11,9,0,5],[11,0,11,5,4],[11,11,9,7,7],[2,11,9,5,0],[2,0,2,7,9],[9,2,2,2,7],[9,0,9,4,2],[2,9,2,2,9],[11,2,5,5,11],[11,9,9,0,11],[5,4,2,9,5],[4,9,11,7,9],[0,9,0,9,9],[0,2,7,9,0],[2,7,9,5,5],[7,9,9,4,4],[11,0,7,11,2],[5,11,9,0,9],[2,11,2,11,5],[11,0,11,4,9],[4,4,7,11,0],[2,5,7,2,4],[9,7,7,4,9],[2,11,5,4,5],[0,11,0,11,11],[9,7,5,4,4],[9,2,0,0,2],[4,11,2,9,9],[2,7,5,2,5],[5,5,11,9,0],[4,4,9,11,11],[11,2,0,2,9],[4,5,9,7,5],[11,0,7,5,9],[2,0,5,2,4],[5,7,7,2,0],[4,5,2,11,11],[7,4,0,2,2],[0,2,7,7,0],[11,9,9,9,7],[11,2,11,7,0],[2,4,4,9,0],[9,11,4,7,5],[0,7,7,9,5],[11,4,2,9,5],[9,0,11,4,7],[7,0,7,5,2],[9,0,2,4,5],[11,9,11,7,2],[11,4,5,7,0],[4,9,7,4,4],[11,11,0,4,7],[2,9,2,9,9],[9,4,11,5,0],[11,2,4,4,4],[7,7,4,4,7],[9,11,5,9,9],[9,0,7,7,2],[9,4,4,4,9],[9,2,7,2,0],[11,9,9,5,2],[9,2,4,5,5],[0,4,7,11,0],[4,5,9,0,7],[4,11,5,0,9],[11,9,2,0,9],[7,7,7,11,7],[5,0,2,0,5],[7,7,5,7,5],[4,9,7,5,4],[4,2,9,7,4],[7,11,4,9,2],[4,9,2,11,11],[0,5,7,5,9],[5,5,9,11,2],[7,5,11,2,9],[0,7,0,2,11],[5,9,4,7,0],[0,11,7,0,11],[5,9,0,11,11],[11,9,5,2,9],[5,5,11,4,2],[4,9,0,7,9],[11,11,4,7,7],[7,9,7,4,2],[9,0,0,2,5],[2,2,9,0,7],[9,0,5,0,9],[4,9,11,2,0],[0,2,7,4,0],[0,9,2,11,0],[11,9,5,2,0],[5,2,11,9,0],[11,0,9,0,11],[5,0,7,11,2],[4,4,0,11,11],[5,0,5,4,9],[5,2,0,11,9],[2,2,7,4,7],[2,7,4,9,5],[2,5,7,0,4],[5,9,7,7,9],[11,11,0,0,2],[5,7,5,5,7],[5,2,4,11,7],[9,2,4,0,5],[7,5,11,2,5],[11,11,7,9,0],[4,11,11,11,2],[5,5,2,9,9],[7,5,9,9,11],[4,0,5,2,0],[0,4,0,4,4],[2,4,2,11,9],[4,4,0,11,9],[5,11,9,7,11],[0,2,4,2,2],[11,5,7,7,0],[0,5,5,5,2],[5,9,4,7,0],[9,2,9,11,7],[2,9,9,7,0],[4,11,0,5,11],[5,0,2,5,7],[7,4,7,9,11],[2,0,0,5,5],[7,4,11,11,11],[2,0,11,9,4],[5,7,11,9,5],[11,0,5,5,0],[7,5,11,9,5],[5,0,4,7,2],[9,4,2,2,5],[9,7,5,9,0],[5,9,7,4,11],[5,0,11,7,7],[2,2,5,0,5],[11,2,5,5,11],[0,11,9,2,4],[7,5,9,9,7],[0,5,4,5,11],[11,2,9,4,9],[5,11,2,5,4],[5,4,9,9,0],[0,2,5,5,11],[5,7,2,5,4],[0,4,7,5,9],[2,5,7,7,2],[2,0,11,0,11],[0,2,0,4,2],[4,7,5,7,9],[2,9,11,9,5],[2,4,2,11,2],[9,5,5,2,0],[5,0,2,0,0],[11,0,11,2,5],[5,7,0,11,5],[4,4,7,7,2],[4,9,11,9,0],[7,7,9,4,4],[9,11,5,4,5],[4,2,7,9,7],[5,2,2,4,7],[11,0,2,0,4],[0,2,2,9,2],[9,5,5,2,4],[2,4,9,2,7],[7,11,4,0,9],[5,2,9,2,0],[9,4,2,5,2],[2,11,2,4,4],[4,5,4,4,2],[4,0,5,4,5],[9,2,11,7,5],[4,7,11,2,9],[11,5,4,5,11],[5,0,5,0,0],[11,7,4,5,11],[7,11,7,0,5],[0,0,4,0,4],[0,9,0,11,5],[4,5,2,0,4],[7,4,5,7,0],[11,11,7,11,11],[5,11,11,5,9],[0,11,7,2,5],[4,2,4,9,5],[9,2,9,11,7],[4,2,0,5,0],[2,9,9,0,0],[5,4,0,4,7],[9,7,7,11,11],[7,5,2,7,11],[4,11,7,5,5],[4,2,9,11,5],[4,4,5,5,5],[7,0,2,4,5],[9,7,0,2,9],[11,0,2,2,5],[11,7,9,0,0],[0,2,5,11,7],[5,2,7,9,9],[5,11,5,7,2],[7,0,5,7,11],[9,0,0,5,9],[5,0,0,7,7],[5,0,4,5,2],[5,0,0,4,7],[0,11,11,11,11],[9,5,5,5,7],[7,2,4,5,4],[0,7,11,11,0],[7,11,11,2,4],[5,2,0,5,0],[0,5,4,9,0],[2,5,11,9,9],[7,11,5,11,0],[11,0,9,9,11],[5,11,2,4,2],[9,5,5,9,7],[9,2,5,11,4],[7,0,5,2,11],[4,5,7,2,9],[7,4,9,7,0],[4,11,9,7,11],[2,5,5,9,9],[7,0,4,5,4],[2,7,7,4,2],[4,5,2,2,7],[0,11,0,4,4],[4,11,2,2,4],[5,11,9,5,9],[4,9,9,4,9],[2,7,11,5,7],[2,4,9,7,7],[0,2,11,0,7],[11,5,0,2,5],[0,5,5,5,5],[11,4,9,9,11],[4,11,7,4,0],[4,11,11,4,11],[11,11,0,4,4],[7,11,5,9,7],[2,11,9,0,4],[7,7,2,4,7],[9,11,0,7,2],[2,5,11,11,2],[2,7,7,4,9],[5,11,4,9,5],[2,0,9,9,7],[2,11,2,11,4],[0,4,5,4,0],[7,7,7,0,9],[11,7,2,7,9],[4,4,7,9,2],[9,7,7,2,7],[2,11,0,2,7],[4,7,2,0,11],[9,2,4,2,9],[4,9,2,11,9],[9,0,2,2,11],[7,11,0,4,4],[11,9,0,0,4],[4,0,2,4,7],[7,5,5,5,9],[0,11,4,5,4],[11,5,11,5,0],[11,11,5,2,2],[2,5,0,9,9],[5,4,5,7,5],[5,7,5,9,0],[2,0,11,5,0],[7,7,0,7,0],[0,7,4,5,9],[9,0,0,5,2],[11,0,9,7,9],[9,4,11,9,4],[5,0,0,9,0],[0,4,5,2,11],[2,4,4,0,4],[9,2,4,7,0],[11,9,9,9,0],[5,4,0,7,9],[11,0,2,2,7],[2,2,7,11,11],[4,7,11,5,11],[9,9,2,11,5],[2,4,5,11,5],[11,11,9,5,4],[9,2,5,5,9],[4,5,7,11,9],[4,4,11,9,2],[0,5,11,5,4],[7,4,11,2,0],[4,7,0,9,5],[11,9,2,0,0],[5,9,11,0,4],[9,5,4,4,0],[2,9,4,4,4],[7,9,0,7,9],[7,11,9,2,5],[5,4,5,4,4],[0,7,9,2,5],[5,4,5,0,7],[11,7,11,9,9],[2,9,5,0,4],[11,2,0,7,2],[9,11,11,11,9],[5,9,0,2,11],[7,11,2,2,5],[2,7,2,7,5],[7,0,4,9,9],[5,5,4,0,7],[11,2,4,9,2],[4,0,4,9,7],[9,5,9,4,5],[0,5,0,5,9],[2,2,7,5,7],[4,11,4,0,0],[2,11,0,5,0],[2,11,0,5,0],[7,5,11,7,7],[5,4,5,9,7],[0,7,0,9,2],[5,5,5,11,7],[0,2,2,7,7],[4,4,4,2,11],[9,4,0,0,5],[4,5,11,4,0],[9,0,0,9,5],[0,11,2,11,7],[7,2,5,0,5],[9,2,5,7,5],[7,7,7,4,11],[4,2,2,5,4],[0,0,7,0,11],[5,9,7,5,4],[9,7,5,9,0],[5,5,5,5,7],[0,2,11,5,2],[5,4,4,7,0],[0,0,11,11,5],[5,5,9,4,7],[11,4,4,4,4],[7,0,11,9,2],[7,11,0,9,5],[9,9,0,7,2],[4,4,4,0,4],[9,5,0,7,0],[7,0,5,7,2],[2,11,7,0,2],[9,11,4,5,7],[11,4,4,0,5],[0,7,5,0,5],[4,9,4,9,0],[2,9,2,5,7],[0,9,5,5,0],[7,7,2,9,2],[0,0,9,0,7],[0,5,5,0,9],[0,5,11,5,11],[0,5,11,0,7],[9,11,11,4,2],[5,11,11,7,5],[0,7,5,2,2],[2,0,5,0,2],[11,9,4,11,5],[7,0,4,11,11],[4,4,0,7,9],[11,9,5,2,0],[5,11,4,11,0],[4,5,9,11,4],[9,11,11,4,2],[2,9,11,7,4],[7,2,11,0,2],[5,7,0,0,0],[2,7,2,11,5],[5,4,4,7,4],[11,4,4,7,5],[7,0,7,4,5],[11,7,5,2,5],[5,9,4,11,11],[4,2,7,7,2],[7,5,4,5,7],[0,0,0,0,11],[4,0,11,11,5],[11,2,0,7,9],[9,7,0,11,5],[4,9,0,7,0],[7,9,7,2,7],[7,7,2,11,5],[4,0,5,9,5],[5,5,5,9,5],[2,2,9,7,0],[11,5,2,9,4],[2,7,2,0,5],[9,4,2,11,0],[11,11,9,2,5],[9,0,4,11,2],[0,0,0,7,0],[7,4,11,7,4],[2,9,5,7,11],[2,5,2,4,11],[4,11,9,7,9],[5,9,9,11,9],[9,11,4,11,7],[4,11,0,7,5],[11,0,11,9,5],[2,11,0,11,9],[5,9,7,11,11],[4,0,4,9,7],[9,9,9,4,9],[5,9,5,9,7],[2,5,0,0,11],[5,11,2,11,0],[11,9,2,7,4],[0,9,2,11,0],[2,7,7,0,7],[2,11,9,11,0],[11,0,0,4,5],[0,7,9,7,11],[4,0,5,0,5],[7,9,9,7,4],[7,2,2,5,7],[2,2,0,5,4],[4,4,0,11,5],[7,0,4,4,5],[5,7,5,11,7],[0,11,5,11,9],[0,9,5,11,0],[5,11,4,11,4],[0,9,7,9,4],[2,9,4,2,9],[2,0,2,0,0],[7,11,2,11,9],[2,11,0,11,9],[2,4,2,9,2],[9,4,2,0,9],[5,4,5,4,11],[7,4,0,2,9],[2,9,7,0,9],[7,9,5,2,2],[11,9,0,0,0],[9,9,9,4,7],[2,2,5,9,9],[2,7,7,7,11],[9,0,7,7,9],[0,7,7,11,5],[2,0,0,5,5],[11,0,11,11,2],[4,7,7,0,5],[11,0,11,5,7],[4,0,9,7,2],[9,0,0,2,2],[4,9,5,11,2],[7,11,11,11,7],[11,9,9,4,9],[0,0,7,4,9],[7,9,2,11,4],[9,0,4,0,2],[7,7,9,9,0],[5,0,11,2,2],[11,4,11,5,2],[7,2,7,4,11],[5,9,9,0,9],[5,4,0,11,11],[4,5,4,9,9],[9,9,11,5,11],[0,5,4,5,2],[11,7,11,7,9],[4,2,4,11,9],[2,4,9,5,9],[4,9,11,11,11],[5,4,11,0,4],[4,4,5,7,0],[9,9,11,2,0],[5,9,0,7,4],[0,0,9,11,4],[7,2,2,5,5],[11,4,2,2,4],[11,7,5,2,2],[11,4,9,5,9],[0,11,11,9,11],[9,2,2,4,5],[11,7,11,0,5],[0,9,7,11,2],[7,2,7,9,0],[7,2,0,4,9],[9,0,9,5,11],[4,7,0,0,4],[11,5,0,5,9],[11,9,0,9,9],[2,9,2,7,9],[11,0,5,4,11],[4,11,9,5,0],[7,7,2,7,5],[0,0,2,0,2],[2,5,4,5,9],[0,11,0,2,2],[5,5,11,9,0],[4,5,2,5,9],[2,5,5,9,4],[0,5,5,11,9],[9,5,9,2,2],[2,0,11,7,11],[0,9,11,11,7],[4,9,11,5,11],[11,7,2,2,4],[5,7,9,11,7],[9,7,4,5,11],[5,11,5,9,7],[11,2,4,9,5],[9,7,2,2,11],[9,2,4,2,4],[0,11,5,11,11],[7,4,7,9,5],[0,2,11,7,5],[5,0,11,9,4],[0,7,11,4,2],[11,0,2,0,2],[4,9,4,5,9],[0,2,11,4,5],[2,7,9,4,4],[7,11,11,9,4],[9,11,2,5,9],[7,7,9,9,0],[4,7,7,2,7],[7,11,9,9,4],[5,7,7,7,9],[0,11,7,7,4],[0,11,0,4,9],[11,11,11,9,4],[2,4,5,9,4],[7,4,11,9,11],[9,0,5,0,2],[0,2,7,4,0],[9,5,4,0,0],[2,9,11,5,2],[9,7,5,2,9],[11,2,7,7,5],[2,0,11,2,5],[4,9,7,11,7],[4,5,5,11,0],[4,4,5,0,9],[7,11,11,7,2],[0,9,4,11,2],[5,11,0,2,4],[4,4,7,5,7],[9,9,11,0,2],[11,7,2,0,9],[4,7,7,11,5],[7,9,4,11,2],[2,7,2,11,9],[4,9,5,7,7],[11,5,9,5,0],[0,5,7,7,9],[11,0,5,4,5],[9,4,0,5,5],[9,0,2,9,9],[4,9,9,9,9],[4,0,4,11,5],[5,4,9,7,4],[9,2,9,2,9],[4,2,0,4,11],[4,0,5,7,2],[2,9,11,0,9],[4,0,9,4,9],[5,11,11,11,7],[7,4,5,5,2],[4,11,5,9,7],[11,2,5,5,11],[7,4,2,9,7],[2,9,11,7,9],[7,7,9,0,2],[2,2,11,11,7],[7,9,5,2,0],[2,9,7,9,5],[4,11,4,5,5],[11,0,11,11,4],[7,11,11,5,5],[11,4,11,4,0],[7,5,0,7,11],[2,11,7,11,5],[11,0,5,0,11],[9,0,0,4,0],[11,9,2,2,0],[5,5,7,11,4],[9,9,5,9,7],[7,7,7,9,11],[2,5,7,2,7],[2,7,0,11,0],[5,5,2,4,7],[0,7,2,9,4],[2,9,11,0,2],[2,0,5,5,9],[5,9,5,2,9],[4,7,0,11,9],[11,7,0,9,9],[4,4,2,2,5],[4,11,5,11,9],[7,4,0,0,5],[2,0,5,11,9],[7,5,11,4,9],[9,5,5,11,5],[4,11,5,0,5],[9,7,4,11,9],[0,11,5,9,7],[0,11,0,4,11],[9,0,0,0,2],[5,9,11,7,4],[4,5,11,9,11],[7,4,2,7,0],[4,4,4,11,2],[4,4,7,5,11],[0,11,5,5,4],[4,2,11,0,0],[5,11,2,4,11],[0,11,5,7,4],[2,5,0,11,2],[2,5,5,4,5],[7,5,2,2,9],[0,11,11,2,9],[4,0,0,7,11],[0,5,11,9,2],[9,9,11,11,4],[7,5,4,4,4],[4,9,4,4,4],[5,0,5,11,0],[11,2,9,11,2],[11,2,9,0,11],[9,9,2,0,7],[2,7,9,7,9],[11,9,0,11,0],[11,4,7,9,11],[7,4,0,11,7],[0,7,4,4,4],[2,0,2,9,11],[9,4,9,11,7],[4,7,0,5,2],[9,2,7,0,9],[11,4,0,2,0],[5,0,9,4,0],[4,5,2,7,2],[9,2,0,7,9],[5,0,11,5,11],[5,4,7,0,4],[11,9,7,0,5],[7,5,0,2,9],[4,7,5,4,0],[9,2,5,0,5],[0,9,0,11,4],[5,5,11,9,11],[5,2,9,7,9],[5,11,7,0,2],[0,2,4,2,2],[2,9,11,9,2],[4,4,11,0,5],[2,5,9,5,11],[9,0,11,9,5],[9,9,9,0,0],[9,0,4,7,9],[5,11,0,11,2],[0,7,4,4,11],[11,2,7,0,9],[11,4,2,0,0],[0,0,7,0,9],[0,0,5,11,9],[0,0,0,4,5],[9,7,5,0,2],[11,2,2,5,5],[9,7,2,0,9],[5,11,7,11,7],[5,11,2,2,7],[7,2,11,4,4],[2,4,11,0,7],[4,11,0,0,9],[5,9,2,0,5],[2,9,7,2,2],[4,5,11,5,9],[5,7,2,2,5],[5,9,11,0,11],[5,9,5,2,2],[9,9,11,7,9],[0,11,11,0,7],[5,0,11,5,0],[5,4,7,4,4],[9,2,0,5,7],[7,7,7,9,0],[9,5,5,0,2],[7,2,5,5,4],[11,9,7,9,2],[0,11,4,11,4],[4,9,4,0,4],[0,5,11,11,11],[0,5,2,7,11],[11,4,9,4,5],[9,0,11,7,5],[0,4,5,7,4],[2,5,4,2,2],[5,7,0,0,2],[11,2,2,7,0],[11,2,0,9,5],[7,5,2,5,2],[2,7,0,2,4],[7,11,5,11,9],[0,9,11,4,0],[7,2,9,4,11],[0,4,9,4,5],[11,9,5,0,5],[2,5,7,11,5],[4,9,11,0,5],[9,9,5,0,7],[7,0,5,4,0],[7,2,5,4,0],[9,7,11,0,11],[2,4,11,7,2],[5,4,9,11,9],[5,5,9,7,7],[2,7,5,0,7],[11,2,2,5,4],[5,5,0,11,5],[0,4,2,11,2],[4,2,7,7,11],[2,5,7,11,2],[11,9,2,0,11],[11,4,4,2,4],[4,9,0,9,7],[11,9,0,0,4],[4,5,7,7,7],[9,11,9,9,0],[4,0,0,11,4],[9,9,9,11,9],[5,5,5,2,5],[4,5,9,4,0],[0,11,5,9,7],[11,2,4,7,5],[11,11,7,2,4],[7,2,5,7,7],[0,11,9,11,4],[0,0,11,4,7],[7,7,4,2,2],[11,9,5,4,11],[0,9,5,5,2],[2,0,0,4,11],[9,5,5,0,11],[9,7,0,5,4],[2,7,2,11,11],[4,9,0,2,11],[9,7,9,2,4],[9,4,2,5,4],[0,9,11,2,5],[4,7,11,2,7],[11,2,7,5,2],[2,2,4,0,2],[2,0,11,11,5],[7,4,7,0,9],[7,2,5,7,9],[2,5,2,0,4],[0,5,11,11,2],[11,2,4,9,5],[2,11,5,11,11],[7,2,11,9,11],[0,2,9,2,4],[4,4,2,2,0],[5,9,0,0,7],[7,5,7,11,4],[2,5,11,2,4],[9,5,0,11,9],[5,4,9,4,0],[0,2,2,5,5],[5,4,11,9,7],[9,11,5,11,11],[5,7,9,0,7],[5,4,2,4,9],[0,11,2,4,0],[11,0,5,5,7],[9,0,9,2,0],[11,4,11,2,0],[2,7,7,11,7],[5,11,0,5,9],[11,11,5,2,4],[2,4,2,7,2],[2,9,2,2,7],[7,11,7,11,9],[2,4,11,9,4],[4,0,4,11,5],[11,11,5,5,5],[0,2,2,9,9],[0,11,11,9,5],[2,7,5,9,0],[4,2,9,2,0],[11,5,0,2,2],[4,2,9,2,5],[7,5,4,9,5],[2,11,4,9,7],[0,11,2,2,11],[9,2,7,2,2],[5,0,7,5,9],[5,7,9,7,2],[5,5,4,9,9],[2,7,7,7,5],[2,9,7,11,7],[5,5,7,5,0],[11,4,11,11,4],[5,2,9,7,7],[9,2,2,4,2],[5,5,7,9,2],[4,9,5,5,4],[4,2,0,5,5],[9,11,4,0,5],[0,11,0,9,9],[0,5,9,5,11],[5,11,11,5,7],[0,11,9,0,5],[9,4,4,9,4],[4,11,2,4,4],[7,7,0,5,9],[11,11,5,4,2],[9,11,2,11,9],[7,0,9,0,5],[2,2,4,7,7],[5,0,4,0,11],[0,0,9,9,9],[9,5,2,5,0],[11,2,2,11,4],[2,0,11,11,9],[0,2,4,2,7],[0,11,4,7,9],[0,0,7,2,11],[7,11,7,11,7],[9,5,2,4,7],[0,0,0,0,9],[9,0,5,7,7],[9,2,0,4,4],[7,9,7,2,4],[7,5,11,4,0],[11,0,9,5,2],[2,4,9,4,0],[9,0,2,4,4],[9,11,7,7,7],[0,11,7,9,2],[9,4,7,2,9],[7,4,4,0,11],[9,4,9,4,11],[9,0,7,4,9],[7,5,4,9,9],[2,11,9,7,5],[7,0,2,0,5],[2,0,5,4,5],[9,5,5,4,11],[5,7,5,0,9],[9,9,11,0,5],[4,4,5,5,2],[7,4,11,4,9],[9,11,9,5,2],[7,7,11,5,2],[11,2,9,11,5],[11,7,2,4,5],[5,11,5,9,5],[11,5,2,5,7],[4,11,0,2,4],[0,11,2,2,0],[11,11,0,11,9],[2,4,2,2,0],[9,9,2,0,2],[9,2,7,7,11],[7,7,5,11,7],[5,2,11,5,2],[4,0,2,4,11],[11,4,2,2,0],[7,7,5,7,9],[9,0,11,9,9],[2,5,0,0,9],[9,5,11,5,9],[2,0,9,4,5],[0,0,11,4,4],[9,11,4,4,11],[4,7,5,5,7],[7,4,2,7,0],[11,9,7,7,11],[7,4,4,2,7],[9,9,4,9,9],[5,5,4,2,9],[5,2,9,4,0],[2,7,5,7,4],[9,0,0,9,5],[7,5,9,11,9],[7,9,7,11,0],[0,7,11,4,11],[2,7,4,11,5],[0,4,2,4,9],[4,4,2,0,11],[9,2,7,7,2],[4,7,5,0,2],[11,11,7,7,5],[7,5,5,5,9],[2,11,11,9,9],[11,5,9,0,11],[2,5,5,2,7],[5,11,4,7,4],[7,9,7,9,2],[4,4,11,9,9],[0,5,4,5,5],[9,9,7,4,5],[11,2,2,5,4],[7,4,5,9,7],[5,11,0,7,4],[9,5,2,2,2],[4,2,7,5,11],[0,4,4,2,2],[11,2,7,0,9],[9,0,7,11,7]],yc=[[3,5,5,3,5],[11,0,10,8,0],[4,0,9,1,9],[8,4,4,11,3],[9,1,3,3,5],[7,10,7,7,6],[10,3,8,9,6],[8,11,1,3,2],[7,1,5,0,3],[9,0,4,8,11],[2,7,4,9,0],[3,9,5,6,2],[9,7,3,6,2],[4,7,3,0,11],[8,11,5,9,1],[4,0,1,2,0],[1,6,8,7,3],[3,4,10,3,11],[2,3,11,6,11],[2,3,4,2,10],[2,9,7,3,6],[3,7,1,8,1],[9,0,4,7,6],[3,9,11,3,5],[1,9,10,9,10],[9,4,5,5,9],[6,8,9,6,10],[1,6,7,5,2],[4,0,4,4,5],[5,8,5,11,6],[0,11,6,11,11],[1,6,11,11,3],[5,9,6,2,10],[9,3,2,4,5],[9,0,6,10,6],[10,8,10,11,9],[7,5,9,0,3],[3,11,8,8,7],[5,10,6,2,2],[3,0,11,2,10],[7,4,2,10,8],[1,3,2,11,6],[0,4,2,10,10],[7,5,10,1,10],[11,3,4,0,8],[5,7,0,3,6],[3,7,4,0,8],[2,7,0,0,10],[7,10,8,7,4],[7,1,5,1,6],[0,9,0,4,8],[10,1,8,8,4],[1,5,10,10,1],[6,3,7,10,5],[5,4,4,10,0],[9,8,3,6,2],[8,7,4,6,11],[6,7,6,4,7],[3,10,8,6,3],[8,7,2,2,2],[10,6,6,3,8],[10,0,10,11,1],[10,7,4,1,3],[4,2,3,2,4],[10,1,3,0,10],[9,10,1,1,9],[0,6,2,9,10],[10,6,5,6,10],[4,11,2,0,6],[8,3,4,8,8],[7,6,5,8,10],[3,0,8,5,6],[11,3,3,6,7],[2,9,10,9,4],[11,11,6,2,0],[6,6,8,9,10],[0,2,2,11,0],[5,0,1,7,5],[8,9,10,11,10],[0,2,3,6,9],[7,10,6,10,0],[2,3,4,4,11],[0,3,8,8,5],[5,11,3,1,7],[5,9,4,8,6],[0,2,5,6,10],[1,6,4,10,10],[8,1,4,6,0],[3,6,10,2,2],[11,4,0,7,7],[9,11,11,9,6],[8,7,7,7,0],[10,6,5,6,3],[7,7,3,9,1],[4,0,2,11,1],[0,0,0,9,4],[0,10,2,3,2],[3,3,2,11,2],[11,0,11,9,2],[7,11,7,2,9],[4,7,0,10,1],[5,4,6,7,8],[7,9,8,4,9],[4,0,3,2,5],[0,0,11,11,9],[8,10,11,11,1],[3,4,11,3,7],[8,1,7,7,11],[10,5,6,7,1],[8,8,5,10,7],[9,2,7,2,2],[3,5,0,7,5],[7,3,10,3,11],[4,7,10,4,4],[1,4,9,10,6],[9,9,10,2,11],[2,1,4,0,8],[5,1,6,0,11],[6,1,6,10,10],[4,5,8,9,5],[6,5,8,4,1],[6,2,1,6,2],[4,0,6,11,1],[3,5,11,8,11],[3,11,6,2,3],[5,10,5,4,11],[2,8,0,0,1],[3,9,1,4,8],[8,1,1,6,8],[2,3,11,7,11],[11,8,8,8,6],[9,6,8,10,11],[1,11,10,1,9],[8,8,5,1,8],[4,10,8,6,7],[8,3,11,4,9],[3,0,8,1,4],[1,2,10,2,2],[10,5,6,10,9],[2,10,5,10,9],[5,5,11,9,5],[6,0,0,8,9],[2,11,2,9,6],[6,4,1,10,3],[7,4,1,11,6],[11,7,6,0,5],[2,3,11,5,10],[7,2,0,8,8],[7,5,10,4,11],[8,4,10,0,9],[8,4,11,4,6],[4,4,4,2,2],[8,7,8,11,4],[7,6,0,7,6],[11,6,8,10,2],[8,7,5,2,6],[11,9,4,2,6],[9,8,6,9,4],[2,0,2,7,7],[6,7,0,1,5],[5,2,9,4,3],[7,3,2,3,2],[2,3,4,9,5],[5,3,1,7,2],[4,8,8,5,7],[0,6,3,4,11],[8,2,10,10,10],[10,8,2,2,11],[7,2,5,7,8],[1,3,10,3,5],[4,0,6,10,10],[3,7,11,1,9],[8,8,7,8,3],[0,1,2,3,4],[0,10,10,8,3],[10,2,6,0,10],[9,8,7,8,3],[5,7,4,1,6],[8,7,8,1,3],[7,3,4,11,4],[1,2,4,7,9],[2,6,6,2,2],[0,11,3,9,1],[4,5,9,0,5],[9,11,3,4,7],[2,0,11,5,10],[4,5,10,0,1],[4,4,2,5,5],[8,11,2,5,11],[2,0,3,0,10],[9,10,10,1,4],[11,5,6,6,0],[9,4,2,11,5],[5,4,9,6,9],[0,10,10,5,0],[5,11,4,9,10],[6,10,7,1,8],[5,11,0,8,3],[8,1,3,10,6],[8,4,2,8,6],[2,2,9,1,0],[10,0,1,11,0],[1,6,2,7,4],[9,9,11,8,8],[2,1,4,11,6],[1,7,4,11,8],[4,6,2,4,4],[8,9,10,11,3],[1,3,3,9,3],[4,11,0,4,0],[0,7,4,9,5],[11,10,10,1,3],[9,10,2,6,3],[1,6,6,9,3],[2,1,8,10,4],[0,8,0,11,2],[7,3,0,8,7],[0,7,6,10,6],[3,5,4,1,0],[1,2,10,7,9],[7,1,0,7,6],[8,4,11,8,8],[7,4,5,4,11],[6,9,5,2,0],[6,3,0,8,3],[5,3,1,1,3],[11,11,8,10,5],[4,4,3,10,8],[1,5,7,10,1],[8,0,5,3,0],[9,5,4,0,11],[0,8,10,2,6],[5,1,9,6,8],[10,6,5,8,8],[11,7,6,3,0],[11,0,10,10,1],[10,6,10,5,5],[4,9,0,9,7],[10,5,9,10,7],[3,0,10,3,7],[10,1,5,9,1],[11,3,11,1,11],[10,9,4,8,10],[9,0,10,6,2],[0,6,9,10,7],[4,10,7,10,0],[7,1,1,11,9],[11,3,1,6,5],[4,4,11,0,1],[11,9,11,10,9],[7,0,7,1,10],[11,1,9,5,1],[8,7,11,7,5],[8,3,3,1,3],[11,5,3,3,5],[5,10,4,1,2],[3,2,4,4,3],[8,3,3,0,9],[1,7,7,4,10],[10,9,3,3,9],[1,10,9,2,8],[7,1,3,0,5],[4,8,6,9,4],[4,4,0,1,9],[7,10,8,2,11],[9,10,11,1,1],[5,9,6,2,10],[11,7,3,5,0],[10,2,9,2,6],[4,6,6,8,10],[9,0,1,4,10],[3,6,3,2,8],[5,7,6,6,7],[1,11,9,10,10],[3,11,0,7,7],[4,5,6,4,1],[0,4,5,2,3],[9,4,11,10,8],[5,3,6,0,11],[5,4,4,1,2],[9,1,9,9,6],[3,6,2,9,7],[4,11,9,2,1],[2,8,8,4,5],[3,10,11,6,1],[8,0,1,6,3],[9,8,3,6,0],[9,4,3,3,3],[3,4,11,0,10],[8,10,7,3,10],[2,3,3,2,11],[6,5,6,10,10],[2,9,1,5,7],[3,10,5,5,10],[0,7,9,7,5],[5,9,10,1,4],[8,3,0,1,3],[7,3,3,6,1],[7,0,10,9,11],[8,1,7,2,10],[6,8,9,3,8],[2,8,8,8,5],[8,0,11,1,10],[1,10,2,9,7],[9,10,6,6,9],[7,6,6,5,1],[11,10,5,2,0],[1,7,1,3,10],[7,5,6,2,0],[0,6,11,11,8],[8,6,9,10,5],[9,6,9,6,5],[8,5,9,1,6],[0,6,2,0,8],[5,8,3,5,1],[9,9,3,10,0],[11,5,4,5,11],[4,4,1,1,6],[4,8,5,4,8],[7,2,11,11,1],[8,1,7,0,7],[11,11,2,3,8],[2,0,9,6,11],[0,9,3,8,6],[7,4,10,3,7],[9,7,1,11,5],[7,0,9,3,0],[5,7,10,10,6],[7,2,2,11,6],[1,11,0,3,9],[10,4,9,10,10],[8,1,4,7,7],[0,0,10,3,1],[5,11,0,6,8],[2,11,1,11,7],[7,5,4,10,6],[7,2,6,3,2],[2,6,3,7,1],[8,7,2,4,0],[10,7,11,4,10],[6,4,9,7,11],[0,3,1,8,10],[9,4,4,5,10],[1,8,0,3,3],[9,10,10,8,0],[6,0,11,5,5],[5,6,6,7,1],[9,1,5,3,5],[8,10,6,4,7],[6,10,11,8,0],[0,7,2,11,11],[1,7,6,0,6],[3,8,0,1,11],[6,1,6,11,8],[3,7,4,10,1],[10,3,3,2,1],[5,7,9,7,5],[2,1,1,11,5],[3,11,2,2,2],[10,6,6,8,3],[10,0,9,5,11],[9,1,5,5,4],[9,2,7,11,7],[2,6,9,9,9],[1,0,1,4,6],[8,6,9,5,2],[4,8,8,2,4],[1,0,7,5,6],[6,1,5,9,0],[4,8,2,4,11],[5,9,9,7,10],[6,11,0,8,10],[2,7,1,3,10],[9,5,10,1,11],[5,1,0,5,11],[1,11,1,1,0],[0,9,6,7,3],[9,7,10,1,2],[8,11,2,3,6],[10,9,0,9,6],[4,0,7,6,11],[9,8,2,1,7],[11,8,8,8,7],[1,9,2,2,1],[10,1,3,1,7],[8,6,0,6,11],[7,6,6,1,3],[11,0,8,4,10],[7,6,0,0,8],[2,1,4,0,11],[8,0,11,7,9],[0,1,8,0,8],[5,5,3,1,4],[11,10,7,2,7],[2,7,9,0,6],[9,10,0,1,8],[5,8,2,11,3],[9,3,9,4,4],[9,11,7,8,5],[11,7,8,2,6],[2,11,7,2,2],[10,1,6,4,3],[1,5,5,2,7],[3,9,4,1,6],[2,1,1,5,3],[7,2,8,4,9],[9,9,1,1,5],[9,3,1,7,7],[9,6,9,11,5],[6,1,5,9,5],[1,1,9,8,1],[3,10,9,5,11],[9,6,9,4,10],[1,6,6,7,1],[10,4,8,10,11],[5,0,9,3,4],[0,3,11,5,1],[2,2,2,4,11],[0,11,3,8,2],[5,7,3,5,8],[4,4,0,4,5],[1,0,10,4,8],[6,1,0,6,7],[0,1,0,11,3],[6,4,7,6,6],[10,5,3,0,3],[11,9,4,3,4],[8,4,7,7,4],[5,6,7,8,2],[10,11,5,8,6],[10,0,1,7,11],[2,3,10,11,11],[11,2,6,9,6],[2,5,8,8,2],[0,11,11,4,7],[4,11,7,2,4],[3,9,6,2,1],[3,4,1,0,11],[9,11,11,8,10],[9,4,0,10,11],[1,7,2,0,9],[8,9,4,2,7],[10,5,7,3,11],[6,8,0,11,0],[1,8,8,4,3],[11,7,7,10,5],[0,3,1,6,8],[0,0,9,3,10],[11,9,3,3,11],[5,2,11,3,1],[10,2,9,1,7],[3,6,2,2,4],[10,4,1,3,2],[1,8,6,7,5],[7,5,1,4,3],[9,1,0,1,4],[6,11,1,7,3],[2,2,4,3,7],[5,5,6,3,8],[4,2,6,10,5],[4,7,6,7,9],[3,3,10,5,5],[6,5,9,1,2],[9,11,5,6,8],[9,10,8,2,4],[8,10,8,3,8],[11,0,2,4,0],[1,5,11,0,8],[6,9,9,8,9],[3,0,5,11,3],[9,11,2,9,1],[8,8,11,7,0],[10,8,7,10,3],[4,6,10,2,11],[0,9,11,3,10],[10,7,9,3,1],[9,3,8,0,11],[3,2,3,6,0],[0,5,7,7,10],[8,2,4,2,2],[3,7,10,0,0],[9,7,9,3,11],[1,8,1,11,4],[0,7,0,8,4],[11,0,10,8,4],[10,6,9,1,2],[8,5,0,3,1],[9,3,11,10,9],[0,2,10,7,10],[6,0,6,7,7],[1,10,11,4,7],[4,7,6,10,5],[9,9,6,9,1],[1,9,6,2,2],[4,7,0,6,2],[6,1,11,10,6],[9,3,4,9,7],[7,5,0,2,7],[4,9,6,6,11],[10,3,1,5,7],[4,7,0,4,11],[3,1,3,8,7],[1,10,1,6,10],[2,1,5,9,2],[4,7,1,1,0],[6,2,5,1,1],[3,8,3,11,1],[2,9,0,2,2],[8,11,2,10,5],[8,5,6,1,11],[7,7,7,10,1],[5,1,1,9,5],[2,3,0,1,3],[11,9,6,5,0],[2,7,1,10,5],[4,11,1,10,0],[10,3,3,7,11],[5,9,1,9,4],[7,7,11,10,11],[10,7,5,2,9],[9,10,11,7,10],[4,10,8,10,10],[5,8,0,7,6],[6,2,9,3,7],[8,10,7,4,2],[7,8,11,3,9],[4,7,2,2,6],[11,3,7,6,6],[11,2,6,0,3],[6,7,1,6,6],[2,0,6,4,1],[8,6,10,3,1],[7,1,3,1,9],[2,1,9,1,4],[8,7,6,8,6],[3,7,5,7,11],[1,8,10,1,4],[7,9,11,3,5],[3,8,9,7,8],[8,11,7,3,10],[3,3,4,10,6],[8,8,5,6,4],[3,8,6,8,5],[5,5,4,1,11],[7,10,8,1,4],[1,6,0,1,4],[9,1,1,1,6],[10,7,5,10,5],[3,9,9,7,6],[10,8,0,4,6],[8,5,7,3,9],[1,2,4,2,11],[6,9,8,11,11],[9,7,4,8,8],[8,5,7,8,8],[9,3,1,0,4],[9,6,11,8,3],[4,1,8,0,4],[4,9,6,2,7],[5,10,6,3,2],[11,7,6,3,5],[0,4,11,8,1],[4,10,4,6,6],[11,5,8,11,5],[8,3,3,8,5],[11,10,11,2,3],[7,10,9,6,2],[8,8,5,10,4],[1,2,6,8,3],[11,3,3,5,10],[4,9,7,1,2],[8,2,8,9,3],[5,2,7,4,3],[8,5,5,4,3],[7,8,8,3,8],[8,10,7,8,2],[9,2,7,0,10],[9,8,8,11,1],[3,8,3,6,2],[4,6,5,11,4],[7,7,5,6,9],[3,5,8,10,0],[4,4,6,8,7],[4,10,9,6,8],[4,10,6,0,9],[9,6,5,11,7],[4,9,0,10,5],[0,0,8,3,5],[9,7,4,0,9],[3,11,1,7,9],[6,0,8,4,7],[1,9,4,2,0],[10,5,0,0,8],[5,8,3,7,1],[9,1,3,11,6],[8,8,3,1,2],[4,2,5,0,5],[5,1,1,5,7],[2,2,8,6,0],[3,3,9,7,0],[8,11,7,9,7],[1,9,2,0,0],[1,1,11,0,10],[7,1,7,6,3],[10,1,5,0,0],[0,9,7,7,6],[9,7,1,6,7],[1,11,7,4,3],[1,9,8,4,4],[8,10,1,11,8],[7,7,2,4,7],[0,7,0,10,1],[10,4,5,6,7],[11,7,11,2,2],[5,3,6,7,0],[7,3,11,7,6],[5,10,8,11,0],[7,8,11,0,9],[10,9,6,5,1],[2,9,11,2,4],[6,5,8,6,5],[5,10,9,9,10],[6,1,11,1,3],[9,10,9,4,1],[11,8,8,8,5],[6,9,7,6,3],[8,6,10,0,9],[10,4,0,11,0],[3,8,1,10,10],[8,7,7,10,1],[1,11,9,2,6],[2,10,7,5,2],[2,3,3,10,6],[6,3,3,9,3],[2,3,1,11,8],[5,0,7,11,11],[10,7,1,8,2],[11,10,5,9,3],[7,7,6,9,3],[6,4,3,5,3],[3,1,1,1,9],[6,4,1,11,3],[2,8,6,11,6],[5,1,10,7,5],[4,4,4,2,11],[8,11,3,5,4],[7,11,9,8,10],[1,11,0,11,5],[9,5,6,5,10],[9,8,0,0,3],[9,6,4,10,5],[2,7,3,7,0],[4,0,11,6,8],[2,9,6,10,3],[9,3,3,8,8],[0,11,7,8,0],[11,2,6,9,5],[11,11,0,11,2],[3,1,6,2,1],[1,3,4,7,4],[7,5,9,9,3],[1,10,10,2,11],[3,3,8,10,9],[1,8,7,5,8],[9,0,11,6,2],[5,6,9,11,1],[3,3,11,3,11],[4,8,8,10,6],[7,6,9,9,2],[11,11,9,2,7],[6,1,2,10,3],[11,3,10,1,4],[11,1,6,7,5],[4,8,2,6,3],[9,0,11,8,1],[2,3,4,0,3],[5,3,8,7,11],[0,5,2,11,10],[1,5,2,7,5],[5,10,4,8,9],[0,2,7,3,8],[4,8,0,7,4],[8,4,1,9,10],[9,5,2,3,4],[9,4,9,6,8],[1,1,1,4,8],[8,8,4,3,4],[3,1,3,5,7],[9,8,0,10,7],[2,7,5,9,4],[11,7,10,0,10],[4,10,11,0,1],[2,0,5,4,3],[9,11,4,2,7],[11,7,5,3,8],[0,5,9,1,3],[1,5,3,8,0],[6,1,3,10,0],[0,9,0,4,0],[6,9,2,5,10],[4,3,8,6,0],[6,3,2,7,7],[7,10,4,3,1],[8,6,1,8,8],[9,4,0,11,5],[9,8,6,6,6],[8,1,8,2,3],[9,3,5,11,8],[8,6,2,1,11],[1,1,11,0,7],[8,11,0,6,8],[10,0,3,11,9],[11,2,5,4,11],[2,9,11,3,9],[9,0,6,11,5],[0,11,8,11,5],[4,0,8,8,1],[5,4,2,1,0],[10,10,8,7,5],[10,8,11,0,2],[7,5,11,6,0],[1,1,0,3,9],[0,5,10,6,3],[9,8,5,7,2],[7,7,2,4,2],[10,0,8,6,0],[0,8,1,5,6],[2,11,9,7,11],[9,11,6,8,5],[4,2,7,8,10],[4,2,8,5,11],[7,8,6,1,10],[7,11,6,1,11],[3,7,2,3,1],[4,7,8,2,4],[9,2,10,0,4],[6,11,2,4,10],[10,9,10,4,0],[9,7,6,11,3],[3,10,1,1,4],[2,6,9,0,11],[3,11,1,10,4],[4,0,11,0,0],[11,8,4,2,10],[2,5,0,10,0],[2,0,8,8,0],[2,9,1,3,1],[9,5,3,1,1],[8,10,2,3,8],[5,3,11,4,0],[3,10,9,11,0],[7,0,6,6,3],[3,10,10,8,7],[2,6,1,10,10],[6,4,5,2,3],[6,5,1,3,9],[3,0,10,10,5],[10,3,10,10,5],[10,5,2,0,0],[9,0,1,7,2],[5,1,11,1,11],[0,3,9,3,9],[11,1,1,5,8],[3,0,1,4,0],[9,10,9,10,0],[8,7,1,7,0],[2,4,4,1,1],[10,6,1,5,10],[6,3,7,4,9],[5,2,7,2,1],[8,9,7,2,3],[4,11,6,5,8],[5,6,10,8,5],[9,7,3,10,3],[8,6,2,3,3],[1,4,0,4,11],[4,3,4,7,7],[5,9,5,6,1],[10,0,6,0,3],[11,2,6,11,11],[3,6,6,10,5],[5,8,8,7,7],[11,6,0,6,4],[3,6,3,8,8],[0,5,2,0,9],[2,8,0,11,4],[9,0,7,6,4],[7,0,8,3,8],[8,11,1,8,8],[8,8,5,2,5],[9,8,9,3,6],[6,4,6,7,9],[8,10,11,7,2],[5,11,0,11,11],[9,5,0,1,6],[1,11,6,8,6],[7,10,5,8,2],[3,0,4,7,8],[6,11,6,2,9],[9,10,5,3,9],[11,10,2,10,9],[6,0,0,3,4],[3,8,4,3,0],[10,11,5,7,4],[4,3,4,3,0],[8,5,0,5,1],[7,2,6,0,11],[9,4,6,2,3],[0,2,5,0,2],[10,0,11,5,9],[7,3,9,11,10],[8,1,10,0,1],[6,8,3,0,9],[0,7,0,2,0],[11,2,11,7,4],[5,0,2,7,1],[3,2,1,0,3],[2,11,0,3,6],[5,6,0,7,1],[1,5,9,5,6],[11,7,4,4,6],[8,9,5,11,1],[8,10,5,2,3],[7,8,6,7,10],[11,5,9,4,3],[5,9,3,3,9],[2,3,10,5,0],[2,1,1,2,6],[3,10,6,5,4],[10,10,1,5,4],[3,1,11,8,10],[3,2,10,9,1],[9,10,10,2,2],[5,8,11,10,8],[3,8,8,0,5],[7,10,8,2,8],[11,1,11,4,3],[6,10,9,1,4],[5,10,4,8,1],[5,4,0,7,5],[2,2,4,9,6],[2,8,6,2,7],[7,1,7,0,4],[3,6,6,6,9],[0,5,3,5,2],[2,9,0,1,4],[10,0,2,9,10],[6,8,5,6,7],[10,7,3,0,5],[9,3,1,10,0],[10,1,2,2,5],[5,8,9,4,9],[0,3,4,5,7],[8,5,8,6,2],[7,11,3,6,3],[5,4,4,1,11],[1,4,3,10,4],[5,11,10,10,4],[7,4,8,5,4],[9,8,1,2,3],[6,4,6,2,7],[1,3,3,9,4],[8,2,6,2,0],[10,3,8,6,0],[2,7,0,10,11],[9,10,0,5,9],[8,4,5,4,4],[7,5,8,8,4],[6,7,0,10,1],[11,11,4,1,5],[3,1,6,9,1],[7,9,4,0,8],[2,2,10,4,4],[10,7,3,11,1],[8,2,7,6,2],[10,0,1,7,6],[4,7,3,8,11],[3,4,10,6,5],[10,0,3,7,6],[11,3,8,5,8],[6,8,2,10,8],[5,5,6,4,9],[5,7,5,0,2],[0,9,4,9,10],[9,6,11,3,11],[2,10,3,5,2],[2,8,9,8,8],[4,5,11,8,6],[0,7,2,10,10],[6,5,5,1,0],[7,10,1,1,2],[8,7,9,4,1],[6,3,8,0,6],[8,5,2,1,1],[7,7,4,2,5],[5,10,0,6,4],[3,11,9,9,7],[8,6,11,0,8],[5,0,8,3,0],[1,11,5,6,9],[11,7,0,9,4],[6,9,8,6,0],[2,6,2,2,5],[0,2,3,3,11],[10,5,8,8,11],[1,0,11,11,0],[4,5,7,5,2],[6,5,3,0,1],[7,0,0,8,1],[2,9,1,9,7],[11,2,3,0,9],[2,2,11,1,5],[2,4,4,1,2],[5,11,4,6,10],[3,2,11,6,10],[2,10,10,4,6],[1,3,7,4,8],[6,1,11,9,10],[0,0,11,3,8],[7,7,0,6,11],[6,5,7,2,0],[4,5,9,6,2],[0,8,8,1,3],[4,3,7,8,8],[9,8,5,5,7],[8,8,10,3,5],[2,0,7,5,0],[0,8,3,1,3],[10,9,0,9,4],[3,1,4,9,5],[11,7,7,3,4],[9,11,11,6,2],[11,9,2,5,4],[3,7,2,7,2],[1,9,4,3,8],[8,9,1,6,4],[4,5,2,4,3],[5,10,8,5,8],[1,6,9,2,4],[3,4,1,8,6],[11,6,3,6,0],[7,3,2,11,7],[11,4,7,0,5],[1,7,6,5,7],[6,7,4,6,9],[8,1,9,1,9],[5,9,0,8,6],[0,9,1,10,6],[9,0,8,7,2],[8,8,4,4,0],[10,9,8,0,3],[2,11,5,1,9],[4,2,9,7,7],[5,11,10,2,4],[4,6,7,6,0],[10,4,5,9,2],[11,7,10,11,4],[9,3,4,10,5],[6,6,0,4,4],[4,0,0,1,1],[1,6,3,10,10],[11,3,0,5,5],[11,8,7,6,9],[10,7,6,5,5],[8,5,2,1,6],[1,6,8,5,11],[8,0,8,11,10],[0,1,11,2,9],[10,3,7,9,5],[10,4,2,3,6],[7,11,3,4,3],[9,10,5,0,11],[1,3,11,0,1],[5,10,11,5,3],[0,6,9,0,1],[4,2,11,9,4],[5,2,7,2,2],[10,6,4,10,5],[7,8,3,0,10],[0,4,3,0,9],[9,6,10,8,10],[2,8,7,2,10],[5,10,9,3,6],[5,10,6,0,11],[1,10,9,7,9],[2,3,11,2,5],[3,9,3,11,0],[3,1,1,9,10],[8,4,3,0,6],[5,5,0,2,7],[2,4,1,5,11],[4,4,4,2,4],[10,3,0,1,9],[8,6,1,3,8],[2,2,0,8,1],[10,10,11,11,9],[2,11,5,7,0],[2,10,11,9,7],[0,8,3,10,2],[8,0,9,5,10]],ea="difficulty",yr=["easy","hard"],wc=s=>yr.includes(s),Tc=()=>{const s="easy";if(typeof localStorage>"u")return s;let e=localStorage.getItem(ea);return e==="medium"&&(e="hard"),wc(e)?e:s},Qt=si(Tc());Qt.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(ea,s)});const ta={easy:"stats_easy",hard:"stats"},wr=s=>({difficulty:s,lastIndex:-2,playedGames:0,winPercentage:0,currentStreak:0,maxStreak:0,guessDistribution:[]}),na=s=>{if(typeof localStorage>"u")return wr(s);try{const e=localStorage.getItem(ta[s]);if(!e)throw`No stats stored for ${s}`;const t=JSON.parse(e);return(typeof t.difficulty!="string"||t.difficulty!==s)&&(t.difficulty=s),t}catch(e){console.warn(e)}return wr(s)},Nn=si(na(vn(Qt)));Nn.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(ta[s.difficulty],JSON.stringify(s))});Qt.subscribe(s=>{s!==vn(Nn).difficulty&&Nn.set(na(s))});const sa={subscribe:Nn.subscribe,reset:s=>{Nn.set(wr(s))},addNew:s=>{Nn.update(e=>{var n;e.lastIndex===s.index-1&&s.state==="success"?e.currentStreak++:e.currentStreak=s.state==="success"?1:0,e.currentStreak>e.maxStreak&&(e.maxStreak=e.currentStreak),e.winPercentage=(e.winPercentage*e.playedGames+(s.state==="success"?1:0))/(e.playedGames+1),e.playedGames++,e.lastIndex=s.index;const t=Sr(s)-1;return(n=e.guessDistribution)[t]??(n[t]=0),e.guessDistribution[t]++,e})}};function ri(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tr={exports:{}},Is={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){var r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),n.getTime()-r.getTime()}s.exports=e.default})(Is,Is.exports);var br={exports:{}},vt={exports:{}},Je={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){if(r.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+r.length+" present")}s.exports=e.default})(Je,Je.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=n(Je.exports);function n(i){return i&&i.__esModule?i:{default:i}}function r(i){(0,t.default)(1,arguments);var o=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&o==="[object Date]"?new Date(i.getTime()):typeof i=="number"||o==="[object Number]"?new Date(i):((typeof i=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}s.exports=e.default})(vt,vt.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,n.default)(1,arguments);var a=(0,t.default)(o);return a.setHours(0,0,0,0),a}s.exports=e.default})(br,br.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Is.exports),n=i(br.exports),r=i(Je.exports);function i(c){return c&&c.__esModule?c:{default:c}}var o=864e5;function a(c,l){(0,r.default)(2,arguments);var u=(0,n.default)(c),h=(0,n.default)(l),f=u.getTime()-(0,t.default)(u),p=h.getTime()-(0,t.default)(h);return Math.round((f-p)/o)}s.exports=e.default})(Tr,Tr.exports);var bc=ri(Tr.exports);const Sc=new Date(2022,3,19),ra={easy:"board_easy",hard:"board"},ia=s=>{let e;switch(s){case"easy":e=vc;break;case"hard":e=yc;break}const t=Math.min(e.length,Math.max(0,bc(new Date,Sc))),n=e[t].map(i=>i+12*4);let r;if(typeof localStorage<"u"){const i=localStorage.getItem(ra[s]);if(i)try{const o=JSON.parse(i);if(o.index!==t)throw"Wrong index";if(!Array.isArray(o.melody)||o.melody.length!==n.length||o.melody[0]!==n[0]||o.melody[1]!==n[1]||o.melody[2]!==n[2]||o.melody[3]!==n[3]||o.melody[4]!==n[4])throw"Wrong melody";(typeof o.difficulty!="string"||o.difficulty!==s)&&(o.difficulty=s),r=o}catch(o){console.warn(o)}}return r||(r={difficulty:s,index:t,melody:n,guesses:[],state:"playing"}),r},Jt=si(ia(vn(Qt)));Jt.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(ra[s.difficulty],JSON.stringify(s))});Qt.subscribe(s=>{s!==vn(Jt).difficulty&&Jt.set(ia(s))});const Sr=s=>s.guesses.filter(e=>e.submitted).length,rn=s=>{if(s??(s=vn(Jt)),s.state!=="playing")return null;const e=s.guesses[s.guesses.length-1];if(!e||e.submitted){if(s.guesses.length===6)throw"This shouldnt happen";const t={melody:[],submitted:!1,played:!1};return s.guesses.push(t),t}else return e},Cc=()=>{const s=vn(Jt);s.guesses.filter(e=>e.submitted).find(e=>gc(s.melody,e.melody))?(Hn(`success-${s.difficulty}`),s.state="success"):s.guesses.filter(e=>e.submitted).length===6?(Hn(`failed-${s.difficulty}`),s.state="failed"):s.state="playing",s.state!=="playing"&&sa.addNew(s)},kn=()=>Jt.set(vn(Jt)),st={subscribe:Jt.subscribe,addGuessNote:s=>{const e=rn();!e||e.melody.length>=5||(e.melody.push(s),kn())},deleteGuess:()=>{const s=rn();!s||(s.melody.pop(),kn())},sharp:()=>{const s=rn();!s||s.melody.length===0||(s.melody[s.melody.length-1]+=1,kn())},flat:()=>{const s=rn();if(!s||s.melody.length===0)return;const e=s.melody.length-1;s.melody[e]-=1,s[e]<0&&(s[e]+=12),kn()},submit:()=>{const s=rn();!s||s.melody.length<5||(s.submitted=!0,Cc(),kn())},melodyPlayed:()=>{const s=rn();!s||(s.played=!0,kn())}};function io(s){let e=s[0],t,n=oo(s);return{c(){n.c(),t=Mt()},l(r){n.l(r),t=Mt()},m(r,i){n.m(r,i),z(r,t,i)},p(r,i){i&1&&Ae(e,e=r[0])?(Ft(),ne(n,1,1,ue),qt(),n=oo(r),n.c(),Z(n),n.m(t.parentNode,t)):n.p(r,i)},i(r){Z(n)},o(r){ne(n)},d(r){r&&C(t),n.d(r)}}}function oo(s){let e,t,n,r;return{c(){e=P("div"),t=Q(s[1]),this.h()},l(i){e=V(i,"DIV",{class:!0});var o=I(e);t=J(o,s[1]),o.forEach(C),this.h()},h(){B(e,"class",n=Es(`note ${s[0]}`)+" svelte-swfye6")},m(i,o){z(i,e,o),A(e,t)},p(i,o){o&2&&Wt(t,i[1]),o&1&&n!==(n=Es(`note ${i[0]}`)+" svelte-swfye6")&&B(e,"class",n)},i(i){r||En(()=>{r=Xo(e,s[2],{}),r.start()})},o:ue,d(i){i&&C(e)}}}function kc(s){let e,t,n,r,i=s[0]&&io(s);return{c(){e=P("div"),t=P("div"),n=Q(s[1]),r=ee(),i&&i.c(),this.h()},l(o){e=V(o,"DIV",{class:!0});var a=I(e);t=V(a,"DIV",{class:!0});var c=I(t);n=J(c,s[1]),c.forEach(C),r=te(a),i&&i.l(a),a.forEach(C),this.h()},h(){B(t,"class","note svelte-swfye6"),B(e,"class","container svelte-swfye6")},m(o,a){z(o,e,a),A(e,t),A(t,n),A(e,r),i&&i.m(e,null)},p(o,[a]){a&2&&Wt(n,o[1]),o[0]?i?(i.p(o,a),a&1&&Z(i,1)):(i=io(o),i.c(),Z(i,1),i.m(e,null)):i&&(i.d(1),i=null)},i(o){Z(i)},o:ue,d(o){o&&C(e),i&&i.d()}}}function Ac(s,e,t){let n,r;He(s,un,f=>t(8,r=f));let{semitone:i}=e,{status:o=void 0}=e,{gameInProgress:a=!1}=e,{animate:c=!1}=e,{index:l=0}=e;function u(f,{duration:p=1200}={}){if(!c)return{duration:0,css:()=>""};const m=200*l,g=p+m;let v=m/g;return{duration:g,css:w=>{let T,b;return w<v?(T=0,b=0):(T=Jo(v?(w-v)*(1/(1-v)):w),b=mc(v?(w-v)*(1/(1-v)):w)),`
          clip-path: ellipse(${b*300}% ${T*200}% at -10% 50%);
					`}}}let h;return s.$$set=f=>{"semitone"in f&&t(3,i=f.semitone),"status"in f&&t(4,o=f.status),"gameInProgress"in f&&t(5,a=f.gameInProgress),"animate"in f&&t(6,c=f.animate),"index"in f&&t(7,l=f.index)},s.$$.update=()=>{s.$$.dirty&264&&t(1,n=typeof i<"u"?xt(i,{notation:r.notation}):""),s.$$.dirty&49&&(t(0,h=o),h==="adjacent"&&a&&t(0,h="incorrect"))},[h,n,u,i,o,a,c,l,r]}class Ns extends Oe{constructor(e){super(),De(this,e,Ac,kc,Ae,{semitone:3,status:4,gameInProgress:5,animate:6,index:7})}}function ao(s,e,t){const n=s.slice();return n[6]=e[t],n[8]=t,n}function co(s){let e,t;return e=new Ns({props:{semitone:s[6].semitone,status:s[6].status,index:s[8],animate:s[0],gameInProgress:s[1].state==="playing"}}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.semitone=n[6].semitone),r&4&&(i.status=n[6].status),r&1&&(i.animate=n[0]),r&2&&(i.gameInProgress=n[1].state==="playing"),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function xc(s){let e,t,n=s[2],r=[];for(let o=0;o<n.length;o+=1)r[o]=co(ao(s,n,o));const i=o=>ne(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Mt()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Mt()},m(o,a){for(let c=0;c<r.length;c+=1)r[c].m(o,a);z(o,e,a),t=!0},p(o,[a]){if(a&7){n=o[2];let c;for(c=0;c<n.length;c+=1){const l=ao(o,n,c);r[c]?(r[c].p(l,a),Z(r[c],1)):(r[c]=co(l),r[c].c(),Z(r[c],1),r[c].m(e.parentNode,e))}for(Ft(),c=n.length;c<r.length;c+=1)i(c);qt()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)Z(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)ne(r[a]);t=!1},d(o){qn(r,o),o&&C(e)}}}function Mc(s,e,t){let n,r;He(s,st,l=>t(1,r=l));let{correctMelody:i}=e,{guessedMelody:o}=e,{submitted:a}=e,{isLast:c=!1}=e;return s.$$set=l=>{"correctMelody"in l&&t(3,i=l.correctMelody),"guessedMelody"in l&&t(4,o=l.guessedMelody),"submitted"in l&&t(5,a=l.submitted),"isLast"in l&&t(0,c=l.isLast)},s.$$.update=()=>{s.$$.dirty&58&&t(2,n=Ko(i,o,{difficulty:r.difficulty,submitted:a}))},[c,r,n,i,o,a]}class Nc extends Oe{constructor(e){super(),De(this,e,Mc,xc,Ae,{correctMelody:3,guessedMelody:4,submitted:5,isLast:0})}}function lo(s,e,t){const n=s.slice();n[1]=e[t],n[4]=t;const r=n[0].guesses[n[4]];return n[2]=r,n}function uo(s){let e,t;return e=new Nc({props:{correctMelody:s[0].melody,guessedMelody:s[2]?.melody,submitted:s[2]?.submitted??!1,isLast:s[4]===Sr(s[0])-1}}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.correctMelody=n[0].melody),r&1&&(i.guessedMelody=n[2]?.melody),r&1&&(i.submitted=n[2]?.submitted??!1),r&1&&(i.isLast=n[4]===Sr(n[0])-1),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Oc(s){let e,t,n=Array(6),r=[];for(let o=0;o<n.length;o+=1)r[o]=uo(lo(s,n,o));const i=o=>ne(r[o],1,1,()=>{r[o]=null});return{c(){e=P("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var a=I(e);for(let c=0;c<r.length;c+=1)r[c].l(a);a.forEach(C),this.h()},h(){B(e,"class","guesses svelte-ysdv0v")},m(o,a){z(o,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);t=!0},p(o,[a]){if(a&1){n=Array(6);let c;for(c=0;c<n.length;c+=1){const l=lo(o,n,c);r[c]?(r[c].p(l,a),Z(r[c],1)):(r[c]=uo(l),r[c].c(),Z(r[c],1),r[c].m(e,null))}for(Ft(),c=n.length;c<r.length;c+=1)i(c);qt()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)Z(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)ne(r[a]);t=!1},d(o){o&&C(e),qn(r,o)}}}function Dc(s,e,t){let n;return He(s,st,r=>t(0,n=r)),[n]}class Ec extends Oe{constructor(e){super(),De(this,e,Dc,Oc,Ae,{})}}function Ic(s){let e,t='<path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" d="M135.19 390.14a28.79 28.79 0 0 0 21.68 9.86h246.26A29 29 0 0 0 432 371.13V140.87A29 29 0 0 0 403.13 112H156.87a28.84 28.84 0 0 0-21.67 9.84L46.33 256l88.86 134.11Z"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M336.67 192.33L206.66 322.34m130.01 0L206.66 192.33m130.01 0L206.66 322.34m130.01 0L206.66 192.33"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function Rc(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class Pc extends Oe{constructor(e){super(),De(this,e,Rc,Ic,Ae,{})}}function Vc(s){let e,t='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M416 128L192 384l-96-96"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function Fc(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class qc extends Oe{constructor(e){super(),De(this,e,Fc,Vc,Ae,{})}}const oa="14.7.77",ho=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),fo=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),Cr=(s,e)=>({startTime:e,type:"setValue",value:s}),aa=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),ca=(s,e,{startTime:t,target:n,timeConstant:r})=>n+(e-n)*Math.exp((t-s)/r),Mn=s=>s.type==="exponentialRampToValue",Rs=s=>s.type==="linearRampToValue",Ht=s=>Mn(s)||Rs(s),ii=s=>s.type==="setValue",Pt=s=>s.type==="setValueCurve",Ps=(s,e,t,n)=>{const r=s[e];return r===void 0?n:Ht(r)||ii(r)?r.value:Pt(r)?r.values[r.values.length-1]:ca(t,Ps(s,e-1,r.startTime,n),r)},po=(s,e,t,n,r)=>t===void 0?[n.insertTime,r]:Ht(t)?[t.endTime,t.value]:ii(t)?[t.startTime,t.value]:Pt(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Ps(s,e-1,t.startTime,r)],kr=s=>s.type==="cancelAndHold",Ar=s=>s.type==="cancelScheduledValues",Yt=s=>kr(s)||Ar(s)?s.cancelTime:Mn(s)||Rs(s)?s.endTime:s.startTime,mo=(s,e,t,{endTime:n,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((s-e)/(n-e)):0,_o=(s,e,t,{endTime:n,value:r})=>t+(s-e)/(n-e)*(r-t),Wc=(s,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?s[t]:(1-(e-t))*s[t]+(1-(n-e))*s[n]},Lc=(s,{duration:e,startTime:t,values:n})=>{const r=(s-t)/e*(n.length-1);return Wc(n,r)},ks=s=>s.type==="setTarget";class $c{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Yt(e);if(kr(e)||Ar(e)){const n=this._automationEvents.findIndex(i=>Ar(e)&&Pt(i)?i.startTime+i.duration>=t:Yt(i)>=t),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),kr(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Ht(r)){if(ks(i))throw new Error("The internal list is malformed.");const o=Pt(i)?i.startTime+i.duration:Yt(i),a=Pt(i)?i.values[i.values.length-1]:i.value,c=Mn(r)?mo(t,o,a,r):_o(t,o,a,r),l=Mn(r)?ho(c,t,this._currenTime):fo(c,t,this._currenTime);this._automationEvents.push(l)}i!==void 0&&ks(i)&&this._automationEvents.push(Cr(this.getValue(t),t)),i!==void 0&&Pt(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=aa(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const n=this._automationEvents.findIndex(o=>Yt(o)>t),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&Pt(r)&&Yt(r)+r.duration>t)return!1;const i=Mn(e)?ho(e.value,e.endTime,this._currenTime):Rs(e)?fo(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(i);else{if(Pt(e)&&t+e.duration>Yt(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Yt(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),r=n[0];ks(r)&&n.unshift(Cr(Ps(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Yt(o)>e),n=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&ks(i)&&(n===void 0||!Ht(n)||n.insertTime>e))return ca(e,Ps(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&ii(i)&&(n===void 0||!Ht(n)))return i.value;if(i!==void 0&&Pt(i)&&(n===void 0||!Ht(n)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Lc(e,i):i.values[i.values.length-1];if(i!==void 0&&Ht(i)&&(n===void 0||!Ht(n)))return i.value;if(n!==void 0&&Mn(n)){const[o,a]=po(this._automationEvents,r,i,n,this._defaultValue);return mo(e,o,a,n)}if(n!==void 0&&Rs(n)){const[o,a]=po(this._automationEvents,r,i,n,this._defaultValue);return _o(e,o,a,n)}return this._defaultValue}}const Bc=s=>({cancelTime:s,type:"cancelAndHold"}),jc=s=>({cancelTime:s,type:"cancelScheduledValues"}),Uc=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),zc=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),Gc=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),Yc=()=>new DOMException("","AbortError"),Hc=s=>(e,t,[n,r,i],o)=>{s(e[r],[t,n,i],a=>a[0]===t&&a[1]===n,o)},Xc=s=>(e,t,n)=>{const r=[];for(let i=0;i<n.numberOfInputs;i+=1)r.push(new Set);s.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},Zc=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},In=new WeakSet,la=new WeakMap,oi=new WeakMap,ua=new WeakMap,ai=new WeakMap,er=new WeakMap,ha=new WeakMap,xr=new WeakMap,Mr=new WeakMap,Nr=new WeakMap,da={construct(){return da}},Qc=s=>{try{const e=new Proxy(s,da);new e}catch{return!1}return!0},go=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,vo=(s,e)=>{const t=[];let n=s.replace(/^[\s]+/,""),r=n.match(go);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(go)}return[t.join(";"),n]},yo=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},wo=s=>{if(!Qc(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Jc=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>{let p=0;return(d,m,g={credentials:"omit"})=>{const v=u.get(d);if(v!==void 0&&v.has(m))return Promise.resolve();const w=l.get(d);if(w!==void 0){const _=w.get(m);if(_!==void 0)return _}const T=i(d),b=T.audioWorklet===void 0?r(m).then(([_,y])=>{const[k,S]=vo(_,y),D=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return t(D)}).then(()=>{const _=f._AWGS.pop();if(_===void 0)throw new SyntaxError;n(T.currentTime,T.sampleRate,()=>_(class{},void 0,(y,k)=>{if(y.trim()==="")throw e();const S=Mr.get(T);if(S!==void 0){if(S.has(y))throw e();wo(k),yo(k.parameterDescriptors),S.set(y,k)}else wo(k),yo(k.parameterDescriptors),Mr.set(T,new Map([[y,k]]))},T.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(s(h,h))]).then(([[_,y],k])=>{const S=p+1;p=S;const[D,x]=vo(_,y),q=`${D};((AudioWorkletProcessor,registerProcessor)=>{${x}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,Y=new Blob([q],{type:"application/javascript; charset=utf-8"}),R=URL.createObjectURL(Y);return T.audioWorklet.addModule(R,g).then(()=>{if(a(T))return T;const W=o(T);return W.audioWorklet.addModule(R,g).then(()=>W)}).then(W=>{if(c===null)throw new SyntaxError;try{new c(W,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(R))});return w===void 0?l.set(d,new Map([[m,b]])):w.set(m,b),b.then(()=>{const _=u.get(d);_===void 0?u.set(d,new Set([m])):_.add(m)}).finally(()=>{const _=l.get(d);_!==void 0&&_.delete(m)}),b}},yt=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},tr=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return s.delete(n),n},fa=(s,e,t,n)=>{const r=yt(s,e),i=tr(r,o=>o[0]===t&&o[1]===n);return r.size===0&&s.delete(e),i},us=s=>yt(ha,s),Rn=s=>{if(In.has(s))throw new Error("The AudioNode is already stored.");In.add(s),us(s).forEach(e=>e(!0))},pa=s=>"port"in s,hs=s=>{if(!In.has(s))throw new Error("The AudioNode is not stored.");In.delete(s),us(s).forEach(e=>e(!1))},Or=(s,e)=>{!pa(s)&&e.every(t=>t.size===0)&&hs(s)},Kc=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>{const p=new WeakMap;return(d,m,g,v,w)=>{const{activeInputs:T,passiveInputs:b}=i(m),{outputs:_}=i(d),y=a(d),k=S=>{const D=c(m),x=c(d);if(S){const O=fa(b,d,g,v);s(T,d,O,!1),!w&&!h(d)&&t(x,D,g,v),f(m)&&Rn(m)}else{const O=n(T,d,g,v);e(b,v,O,!1),!w&&!h(d)&&r(x,D,g,v);const M=o(m);if(M===0)u(m)&&Or(m,T);else{const F=p.get(m);F!==void 0&&clearTimeout(F),p.set(m,setTimeout(()=>{u(m)&&Or(m,T)},M*1e3))}}};return l(_,[m,g,v],S=>S[0]===m&&S[1]===g&&S[2]===v,!0)?(y.add(k),u(d)?s(T,d,[g,v,k],!0):e(b,v,[d,g,k],!0),!0):!1}},el=s=>(e,t,[n,r,i],o)=>{const a=e.get(n);a===void 0?e.set(n,new Set([[r,t,i]])):s(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},tl=s=>(e,t)=>{const n=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)},nl=s=>(e,t)=>{s(e).add(t)},sl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},rl=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...sl,...c},h=n(l,u),f=i(l)?e():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Xe=(s,e)=>s.context===e,il=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Vs=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Dt=()=>new DOMException("","IndexSizeError"),ci=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(n){throw n.code===12?Dt():n}})(s.getChannelData)},ol={numberOfChannels:1},al=(s,e,t,n,r,i,o,a)=>{let c=null;return class ma{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:p}={...ol,...u};c===null&&(c=new r(1,1,44100));const d=n!==null&&e(i,i)?new n({length:h,numberOfChannels:f,sampleRate:p}):c.createBuffer(f,h,p);if(d.numberOfChannels===0)throw t();return typeof d.copyFromChannel!="function"?(o(d),ci(d)):e(Vs,()=>Vs(d))||a(d),s.add(d),d}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===ma.prototype||s.has(u)}}},tt=-34028234663852886e22,Ze=-tt,Lt=s=>In.has(s),cl={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ll=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f={...cl,...u},p=r(h,f),d=o(h),m=d?e():null;super(l,!1,p,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=t(this,d,p.playbackRate,Ze,tt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Rn(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Lt(this)&&hs(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},ul=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const f=Xe(h,u);if(!f){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await s(u,l.playbackRate,h.playbackRate):await n(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},hl=s=>"playbackRate"in s,dl=s=>"frequency"in s&&"gain"in s,fl=s=>"offset"in s,pl=s=>!("frequency"in s)&&"gain"in s,ml=s=>"detune"in s&&"frequency"in s,_l=s=>"pan"in s,Qe=s=>yt(la,s),ds=s=>yt(ua,s),Dr=(s,e)=>{const{activeInputs:t}=Qe(s);t.forEach(r=>r.forEach(([i])=>{e.includes(s)||Dr(i,[...e,s])}));const n=hl(s)?[s.playbackRate]:pa(s)?Array.from(s.parameters.values()):dl(s)?[s.Q,s.detune,s.frequency,s.gain]:fl(s)?[s.offset]:pl(s)?[s.gain]:ml(s)?[s.detune,s.frequency]:_l(s)?[s.pan]:[];for(const r of n){const i=ds(r);i!==void 0&&i.activeInputs.forEach(([o])=>Dr(o,e))}Lt(s)&&hs(s)},_a=s=>{Dr(s.destination,[])},gl=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),vl=(s,e,t,n,r,i,o,a,c)=>class extends s{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(d){throw d.code===12&&d.message==="sampleRate is not in range"?t():d}if(h===null)throw n();if(!gl(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:f}=u,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/p:f==="interactive"||f===void 0?256/p:f==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(f*p/128)))*128/p,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const d=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",d)};h.addEventListener("statechange",d)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),_a(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},yl=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f=o(h),p=r(h,u,f),d=f?e(a):null;super(l,!1,p,d),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},wl=s=>{const e=new WeakMap,t=async(n,r)=>{const i=r.destination;return e.set(r,i),await s(n,r,i),i};return{render(n,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(n,r)}}},Tl=(s,e,t,n,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const _=new Float32Array(1),y=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=o(l);let S=!1,D=[0,0,-1,0,1,0],x=[0,0,0];const O=()=>{if(S)return;S=!0;const Y=n(l,256,9,0);Y.onaudioprocess=({inputBuffer:R})=>{const W=[i(R,_,0),i(R,_,1),i(R,_,2),i(R,_,3),i(R,_,4),i(R,_,5)];W.some((L,N)=>L!==D[N])&&(u.setOrientation(...W),D=W);const G=[i(R,_,6),i(R,_,7),i(R,_,8)];G.some((L,N)=>L!==x[N])&&(u.setPosition(...G),x=G)},y.connect(Y)},M=Y=>R=>{R!==D[Y]&&(D[Y]=R,u.setOrientation(...D))},F=Y=>R=>{R!==x[Y]&&(x[Y]=R,u.setPosition(...x))},q=(Y,R,W)=>{const G=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:R});G.connect(y,0,Y),G.start(),Object.defineProperty(G.offset,"defaultValue",{get(){return R}});const L=s({context:c},k,G.offset,Ze,tt);return a(L,"value",N=>()=>N.call(L),N=>E=>{try{N.call(L,E)}catch(H){if(H.code!==9)throw H}O(),k&&W(E)}),L.cancelAndHoldAtTime=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.cancelAndHoldAtTime),L.cancelScheduledValues=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.cancelScheduledValues),L.exponentialRampToValueAtTime=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.exponentialRampToValueAtTime),L.linearRampToValueAtTime=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.linearRampToValueAtTime),L.setTargetAtTime=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.setTargetAtTime),L.setValueAtTime=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.setValueAtTime),L.setValueCurveAtTime=(N=>k?()=>{throw r()}:(...E)=>{const H=N.apply(L,E);return O(),H})(L.setValueCurveAtTime),L};return{forwardX:q(0,0,M(0)),forwardY:q(1,0,M(1)),forwardZ:q(2,-1,M(2)),positionX:q(6,0,F(0)),positionY:q(7,0,F(1)),positionZ:q(8,0,F(2)),upX:q(3,0,M(3)),upY:q(4,1,M(4)),upZ:q(5,0,M(5))}},{forwardX:f,forwardY:p,forwardZ:d,positionX:m,positionY:g,positionZ:v,upX:w,upY:T,upZ:b}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return p},get forwardZ(){return d},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return w},get upY(){return T},get upZ(){return b}}},Fs=s=>"context"in s,fs=s=>Fs(s[0]),yn=(s,e,t,n)=>{for(const r of s)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},To=(s,e,[t,n],r)=>{yn(s,[e,t,n],i=>i[0]===e&&i[1]===t,r)},bo=(s,[e,t,n],r)=>{const i=s.get(e);i===void 0?s.set(e,new Set([[t,n]])):yn(i,[t,n],o=>o[0]===t,r)},Wn=s=>"inputs"in s,qs=(s,e,t,n)=>{if(Wn(e)){const r=e.inputs[n];return s.connect(r,t,0),[r,t,0]}return s.connect(e,t,n),[e,t,n]},ga=(s,e,t)=>{for(const n of s)if(n[0]===e&&n[1]===t)return s.delete(n),n;return null},bl=(s,e,t)=>tr(s,n=>n[0]===e&&n[1]===t),va=(s,e)=>{if(!us(s).delete(e))throw new Error("Missing the expected event listener.")},ya=(s,e,t)=>{const n=yt(s,e),r=tr(n,i=>i[0]===t);return n.size===0&&s.delete(e),r},Ws=(s,e,t,n)=>{Wn(e)?s.disconnect(e.inputs[n],t,0):s.disconnect(e,t,n)},xe=s=>yt(oi,s),Xn=s=>yt(ai,s),hn=s=>xr.has(s),Os=s=>!In.has(s),So=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=s.createScriptProcessor(256,1,1),r=s.createGain(),i=s.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=s.createBufferSource();a.buffer=i,a.loop=!0,a.connect(n).connect(s.destination),a.connect(r),a.disconnect(r),n.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(s.destination)},a.start()}}),gr=(s,e)=>{const t=new Map;for(const n of s)for(const r of n){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((n,r)=>e(r,n))},Ls=s=>"context"in s,Sl=s=>{const e=new Map;s.connect=(t=>(n,r=0,i=0)=>{const o=Ls(n)?t(n,r,i):t(n,r),a=e.get(n);return a===void 0?e.set(n,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(s.connect.bind(s)),s.disconnect=(t=>(n,r,i)=>{if(t.apply(s),n===void 0)e.clear();else if(typeof n=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==n);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(n))if(r===void 0)e.delete(n);else{const o=e.get(n);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(n):e.set(n,a)}}for(const[o,a]of e)a.forEach(c=>{Ls(o)?s.connect(o,c.output,c.input):s.connect(o,c.output)})})(s.disconnect)},Cl=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=ds(e),{outputs:o}=Qe(s),a=us(s),c=l=>{const u=xe(s),h=Xn(e);if(l){const f=ya(i,s,t);To(r,s,f,!1),!n&&!hn(s)&&u.connect(h,t)}else{const f=bl(r,s,t);bo(i,f,!1),!n&&!hn(s)&&u.disconnect(h,t)}};return yn(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),Lt(s)?To(r,s,[t,c],!0):bo(i,[s,t,c],!0),!0):!1},kl=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=Qe(e),o=ga(r[n],s,t);return o===null?[fa(i,s,t,n)[2],!1]:[o[2],!0]},Al=(s,e,t)=>{const{activeInputs:n,passiveInputs:r}=ds(e),i=ga(n,s,t);return i===null?[ya(r,s,t)[1],!1]:[i[2],!0]},li=(s,e,t,n,r)=>{const[i,o]=kl(s,t,n,r);if(i!==null&&(va(s,i),o&&!e&&!hn(s)&&Ws(xe(s),xe(t),n,r)),Lt(t)){const{activeInputs:a}=Qe(t);Or(t,a)}},ui=(s,e,t,n)=>{const[r,i]=Al(s,t,n);r!==null&&(va(s,r),i&&!e&&!hn(s)&&xe(s).disconnect(Xn(t),n))},xl=(s,e)=>{const t=Qe(s),n=[];for(const r of t.outputs)fs(r)?li(s,e,...r):ui(s,e,...r),n.push(r[0]);return t.outputs.clear(),n},Ml=(s,e,t)=>{const n=Qe(s),r=[];for(const i of n.outputs)i[1]===t&&(fs(i)?li(s,e,...i):ui(s,e,...i),r.push(i[0]),n.outputs.delete(i));return r},Nl=(s,e,t,n,r)=>{const i=Qe(s);return Array.from(i.outputs).filter(o=>o[0]===t&&(n===void 0||o[1]===n)&&(r===void 0||o[2]===r)).map(o=>(fs(o)?li(s,e,...o):ui(s,e,...o),i.outputs.delete(o),o[0]))},Ol=(s,e,t,n,r,i,o,a,c,l,u,h,f,p,d,m)=>class extends l{constructor(v,w,T,b){super(T),this._context=v,this._nativeAudioNode=T;const _=u(v);h(_)&&t(So,()=>So(_,m))!==!0&&Sl(T),oi.set(this,T),ha.set(this,new Set),v.state!=="closed"&&w&&Rn(this),s(this,b,T)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,w=0,T=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const b=u(this._context),_=d(b);if(f(v)||p(v))throw i();if(Fs(v)){const S=xe(v);try{const x=qs(this._nativeAudioNode,S,w,T),O=Os(this);(_||O)&&this._nativeAudioNode.disconnect(...x),this.context.state!=="closed"&&!O&&Os(v)&&Rn(v)}catch(x){throw x.code===12?i():x}if(e(this,v,w,T,_)){const x=c([this],v);gr(x,n(_))}return v}const y=Xn(v);if(y.name==="playbackRate"&&y.maxValue===1024)throw o();try{this._nativeAudioNode.connect(y,w),(_||Os(this))&&this._nativeAudioNode.disconnect(y,w)}catch(S){throw S.code===12?i():S}if(Cl(this,v,w,_)){const S=c([this],v);gr(S,n(_))}}disconnect(v,w,T){let b;const _=u(this._context),y=d(_);if(v===void 0)b=xl(this,y);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw r();b=Ml(this,y,v)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||Fs(v)&&T!==void 0&&(T<0||T>=v.numberOfInputs))throw r();if(b=Nl(this,y,v,w,T),b.length===0)throw i()}for(const k of b){const S=c([this],k);gr(S,a)}}},Dl=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>(p,d,m,g=null,v=null)=>{const w=new $c(m.defaultValue),T=d?n(w):null,b={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(_){m.value=_,b.setValueAtTime(_,p.context.currentTime)},cancelAndHoldAtTime(_){if(typeof m.cancelAndHoldAtTime=="function")T===null&&w.flush(p.context.currentTime),w.add(r(_)),m.cancelAndHoldAtTime(_);else{const y=Array.from(w).pop();T===null&&w.flush(p.context.currentTime),w.add(r(_));const k=Array.from(w).pop();m.cancelScheduledValues(_),y!==k&&k!==void 0&&(k.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(k.value,k.endTime):k.type==="linearRampToValue"?m.linearRampToValueAtTime(k.value,k.endTime):k.type==="setValue"?m.setValueAtTime(k.value,k.startTime):k.type==="setValueCurve"&&m.setValueCurveAtTime(k.values,k.startTime,k.duration))}return b},cancelScheduledValues(_){return T===null&&w.flush(p.context.currentTime),w.add(i(_)),m.cancelScheduledValues(_),b},exponentialRampToValueAtTime(_,y){if(_===0)throw new RangeError;if(!Number.isFinite(y)||y<0)throw new RangeError;return T===null&&w.flush(p.context.currentTime),w.add(o(_,y)),m.exponentialRampToValueAtTime(_,y),b},linearRampToValueAtTime(_,y){return T===null&&w.flush(p.context.currentTime),w.add(a(_,y)),m.linearRampToValueAtTime(_,y),b},setTargetAtTime(_,y,k){return T===null&&w.flush(p.context.currentTime),w.add(c(_,y,k)),m.setTargetAtTime(_,y,k),b},setValueAtTime(_,y){return T===null&&w.flush(p.context.currentTime),w.add(l(_,y)),m.setValueAtTime(_,y),b},setValueCurveAtTime(_,y,k){const S=_ instanceof Float32Array?_:new Float32Array(_);if(h!==null&&h.name==="webkitAudioContext"){const D=y+k,x=p.context.sampleRate,O=Math.ceil(y*x),M=Math.floor(D*x),F=M-O,q=new Float32Array(F);for(let R=0;R<F;R+=1){const W=(S.length-1)/k*((O+R)/x-y),G=Math.floor(W),L=Math.ceil(W);q[R]=G===L?S[G]:(1-(W-G))*S[G]+(1-(L-W))*S[L]}T===null&&w.flush(p.context.currentTime),w.add(u(q,y,k)),m.setValueCurveAtTime(q,y,k);const Y=M/x;Y<D&&f(b,q[q.length-1],Y),f(b,S[S.length-1],D)}else T===null&&w.flush(p.context.currentTime),w.add(u(S,y,k)),m.setValueCurveAtTime(S,y,k);return b}};return t.set(b,m),e.set(b,p),s(b,T),b},El=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){const{startTime:n,target:r,timeConstant:i}=t;e.setTargetAtTime(r,n,i)}else if(t.type==="setValue"){const{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,n)}else throw new Error("Can't apply an unknown automation.")}});class wa{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Il={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Rl=(s,e,t,n,r,i,o,a,c,l,u,h,f,p)=>class extends e{constructor(m,g,v){var w;const T=a(m),b=c(T),_=u({...Il,...v});f(_);const y=Mr.get(T),k=y?.get(g),S=b||T.state!=="closed"?T:(w=o(T))!==null&&w!==void 0?w:T,D=r(S,b?null:m.baseLatency,l,g,k,_),x=b?n(g,_,k):null;super(m,!0,D,x);const O=[];D.parameters.forEach((F,q)=>{const Y=t(this,b,F);O.push([q,Y])}),this._nativeAudioWorkletNode=D,this._onprocessorerror=null,this._parameters=new wa(O),b&&s(T,this);const{activeInputs:M}=i(this);h(D,M)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?p(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function $s(s,e,t,n,r){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],n,r);else{const i=s.getChannelData(n);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const Ta=(s,e,t,n,r)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],n,r):e[t].byteLength!==0&&s.getChannelData(n).set(e[t],r)},Bs=(s,e)=>{const t=[];for(let n=0;n<s;n+=1){const r=[],i=typeof e=="number"?e:e[n];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},Pl=(s,e)=>{const t=yt(Nr,s),n=xe(e);return yt(t,n)},Vl=async(s,e,t,n,r,i,o)=>{const a=e===null?Math.ceil(s.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,l=r.reduce((g,v)=>g+v,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Qe(s),f=await Pl(t,s),p=Bs(n.numberOfInputs,n.channelCount),d=Bs(n.numberOfOutputs,r),m=Array.from(s.parameters.keys()).reduce((g,v)=>({...g,[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(n.numberOfInputs>0&&e!==null)for(let v=0;v<n.numberOfInputs;v+=1)for(let w=0;w<n.channelCount;w+=1)$s(e,p[v],w,w,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},w)=>{$s(e,m,v,c+w,g)});for(let v=0;v<n.numberOfInputs;v+=1)for(let w=0;w<r[v];w+=1)d[v][w].byteLength===0&&(d[v][w]=new Float32Array(128));try{const v=p.map((T,b)=>h.activeInputs[b].size===0?[]:T),w=o(g/t.sampleRate,t.sampleRate,()=>f.process(v,d,m));if(u!==null)for(let T=0,b=0;T<n.numberOfOutputs;T+=1){for(let _=0;_<r[T];_+=1)Ta(u,d[T],_,b+_,g);b+=r[T]}if(!w)break}catch(v){s.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},Fl=(s,e,t,n,r,i,o,a,c,l,u,h,f,p,d,m)=>(g,v,w)=>{const T=new WeakMap;let b=null;const _=async(y,k)=>{let S=u(y),D=null;const x=Xe(S,k),O=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(h===null){const M=O.reduce((R,W)=>R+W,0),F=r(k,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),q=[];for(let R=0;R<y.numberOfOutputs;R+=1)q.push(n(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[R]}));const Y=o(k,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});Y.connect=e.bind(null,q),Y.disconnect=c.bind(null,q),D=[F,q,Y]}else x||(S=new h(k,g));if(T.set(k,D===null?S:D[2]),D!==null){if(b===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=y.channelCount*y.numberOfInputs,G=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,L=W+G;b=Vl(y,L===0?null:await(async()=>{const E=new f(L,Math.ceil(y.context.length/128)*128,k.sampleRate),H=[],ie=[];for(let oe=0;oe<v.numberOfInputs;oe+=1)H.push(o(E,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),ie.push(r(E,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const de=await Promise.all(Array.from(y.parameters.values()).map(async oe=>{const fe=i(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe.value});return await p(E,oe,fe.offset),fe})),se=n(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+G)});for(let oe=0;oe<v.numberOfInputs;oe+=1){H[oe].connect(ie[oe]);for(let fe=0;fe<v.channelCount;fe+=1)ie[oe].connect(se,fe,oe*v.channelCount+fe)}for(const[oe,fe]of de.entries())fe.connect(se,0,W+oe),fe.start(0);return se.connect(E.destination),await Promise.all(H.map(oe=>d(y,E,oe))),m(E)})(),k,v,O,w,l)}const M=await b,F=t(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[q,Y,R]=D;M!==null&&(F.buffer=M,F.start(0)),F.connect(q);for(let W=0,G=0;W<y.numberOfOutputs;W+=1){const L=Y[W];for(let N=0;N<O[W];N+=1)q.connect(L,G+N,N);G+=O[W]}return R}if(x)for(const[M,F]of y.parameters.entries())await s(k,F,S.parameters.get(M));else for(const[M,F]of y.parameters.entries())await p(k,F,S.parameters.get(M));return await d(y,k,S),S};return{render(y,k){a(k,y);const S=T.get(k);return S!==void 0?Promise.resolve(S):_(y,k)}}},ql=(s,e,t,n,r,i,o,a,c,l,u,h,f,p,d,m,g,v,w,T)=>class extends d{constructor(_,y){super(_,y),this._nativeContext=_,this._audioWorklet=s===void 0?void 0:{addModule:(k,S)=>s(this,k,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(_,y,k){return new t({length:y,numberOfChannels:_,sampleRate:k})}createBufferSource(){return new n(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(_=1){return new u(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(_,y){return new p(this,{feedback:y,feedforward:_})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(_,y,k={disableNormalization:!1}){return new v(this,{...k,imag:y,real:_})}createStereoPanner(){return new w(this)}createWaveShaper(){return new T(this)}decodeAudioData(_,y,k){return l(this._nativeContext,_).then(S=>(typeof y=="function"&&y(S),S),S=>{throw typeof k=="function"&&k(S),S})}},Wl={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ll=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f={...Wl,...u},p=r(h,f),d=o(h),m=d?t():null;super(l,!1,p,m),this._Q=e(this,d,p.Q,Ze,tt),this._detune=e(this,d,p.detune,1200*Math.log2(Ze),-1200*Math.log2(Ze)),this._frequency=e(this,d,p.frequency,l.sampleRate/2,0),this._gain=e(this,d,p.gain,40*Math.log10(Ze),tt),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?n():f}if(l.length!==u.length||u.length!==h.length)throw n()}},$l=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Xe(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)):(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Bl=(s,e)=>(t,n)=>{const r=e.get(t);if(r!==void 0)return r;const i=s.get(t);if(i!==void 0)return i;try{const o=n();return o instanceof Promise?(s.set(t,o),o.catch(()=>!1).then(a=>(s.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},jl={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Ul=(s,e,t,n,r)=>class extends s{constructor(o,a){const c=n(o),l={...jl,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},zl=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Gl={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Yl=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u=i({...Gl,...c}),h=t(l,u),f=r(l)?e():null;super(a,!1,h,f)}},Hl=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Xl=s=>(e,t,n)=>s(t,e,n),Zl=s=>(e,t,n=0,r=0)=>{const i=e[n];if(i===void 0)throw s();return Ls(t)?i.connect(t,0,r):i.connect(t,0)},Ql=s=>(e,t)=>{const n=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},Jl={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Kl=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...Jl,...l},f=n(u,h),p=i(u),d=p?t():null;super(c,!1,f,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=f,this._offset=e(this,p,f.offset,Ze,tt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Rn(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Lt(this)&&hs(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},eu=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const f=Xe(h,u);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await s(u,l.offset,h.offset):await n(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},tu=s=>e=>(s[0]=e,s[0]),nu={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},su=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u={...nu,...c},h=t(l,u),p=r(l)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},ru=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=s(o,l)}return n.set(o,a),Wn(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},iu=(s,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(i){throw i.name==="SyntaxError"?s():i}},ou=()=>new DOMException("","DataCloneError"),Co=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(s,[s])}finally{r()}})},au=(s,e,t,n,r,i,o,a,c,l,u)=>(h,f)=>{const p=o(h)?h:i(h);if(r.has(f)){const d=t();return Promise.reject(d)}try{r.add(f)}catch{}return e(c,()=>c(p))?p.decodeAudioData(f).then(d=>(Co(f).catch(()=>{}),e(a,()=>a(d))||u(d),s.add(d),d)):new Promise((d,m)=>{const g=async()=>{try{await Co(f)}catch{}},v=w=>{m(w),g()};try{p.decodeAudioData(f,w=>{typeof w.copyFromChannel!="function"&&(l(w),ci(w)),s.add(w),g().then(()=>d(w))},w=>{v(w===null?n():w)})}catch(w){v(w)}})},cu=(s,e,t,n,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(e.delete(c),!f&&o(c)){const p=n(c),{outputs:d}=t(c);for(const m of d)if(fs(m)){const g=n(m[0]);s(p,g,m[1],m[2])}else{const g=r(m[0]);p.connect(g,m[1])}}}else e.set(c,u-l)},lu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},uu=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...lu,...l},f=n(u,h),p=i(u),d=p?t(h.maxDelayTime):null;super(c,!1,f,d),this._delayTime=e(this,p,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},hu=(s,e,t,n,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=Xe(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,f)}return o.set(l,u),h?await s(l,c.delayTime,u.delayTime):await n(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},du=s=>(e,t,n,r)=>s(e[r],i=>i[0]===t&&i[1]===n),fu=s=>(e,t)=>{s(e).delete(t)},pu=s=>"delayTime"in s,mu=(s,e,t)=>function n(r,i){const o=Fs(i)?i:t(s,i);if(pu(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>n([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},As=(s,e,t)=>{const n=e[t];if(n===void 0)throw s();return n},_u=s=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?As(s,e,t).disconnect():Ls(t)?n===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?As(s,e,n).disconnect(t,0):As(s,e,n).disconnect(t,0,r):n===void 0?e.forEach(i=>i.disconnect(t)):As(s,e,n).disconnect(t,0),gu={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},vu=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),f={...gu,...u},p=n(h,f),d=o(h),m=d?t():null;super(l,!1,p,m),this._attack=e(this,d,p.attack),this._knee=e(this,d,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,d,p.ratio),this._release=e(this,d,p.release),this._threshold=e(this,d,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},yu=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Xe(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)):(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},wu=()=>new DOMException("","EncodingError"),Tu=s=>e=>new Promise((t,n)=>{if(s===null){n(new SyntaxError);return}const r=s.document.head;if(r===null)n(new SyntaxError);else{const i=s.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=s.onerror,l=()=>{s.onerror=c,URL.revokeObjectURL(a)};s.onerror=(u,h,f,p,d)=>{if(h===a||h===s.location.href&&f===1&&p===1)return l(),n(d),!1;if(c!==null)return c(u,h,f,p,d)},i.onerror=()=>{l(),n(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),bu=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let i=this._listeners.get(n);i===void 0&&(i=s(this,n),typeof n=="function"&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){const i=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},Su=s=>(e,t,n)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},Cu=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},ku={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Au=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...ku,...c},h=n(l,u),f=i(l),p=f?t():null;super(a,!1,h,p),this._gain=e(this,f,h.gain,Ze,tt)}get gain(){return this._gain}},xu=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Xe(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await s(c,a.gain,l.gain):await n(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Mu=(s,e)=>t=>e(s,t),Nu=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Ou=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},Du=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Eu=s=>e=>s.get(e),Ue=()=>new DOMException("","InvalidStateError"),Iu=s=>e=>{const t=s.get(e);if(t===void 0)throw Ue();return t},Ru=(s,e)=>t=>{let n=s.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),s.set(t,n),n},Pu=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},nr=()=>new DOMException("","InvalidAccessError"),Vu=s=>{s.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw nr();return e.call(s,t,n,r)})(s.getFrequencyResponse)},Fu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},qu=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u=r(l),h={...Fu,...c},f=e(l,u?null:a.baseLatency,h),p=u?t(h.feedback,h.feedforward):null;super(a,!1,f,p),Vu(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},ba=(s,e,t,n,r,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let p=0;p<h;p+=1){let d=t[0]*l[p];for(let m=1;m<r;m+=1){const g=f-m&c-1;d+=t[m]*i[g],d-=s[m]*o[g]}for(let m=r;m<n;m+=1)d+=t[m]*i[f-m&c-1];for(let m=r;m<e;m+=1)d-=s[m]*o[f-m&c-1];i[f]=l[p],o[f]=d,f=f+1&c-1,u[p]=d}return f},Wu=(s,e,t,n)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=n instanceof Float64Array?n:new Float64Array(n),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let d=0;d<o;d+=1)i[d]/=r[0];for(let d=1;d<a;d+=1)r[d]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),p=s.numberOfChannels;for(let d=0;d<p;d+=1){const m=s.getChannelData(d),g=f.getChannelData(d);u.fill(0),h.fill(0),ba(r,o,i,a,c,u,h,0,l,m,g)}return f},Lu=(s,e,t,n,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,p=e(u);const d=Xe(p,h);if(h.createIIRFilter===void 0?f=s(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=h.createIIRFilter(o,i)),a.set(h,f===null?p:f),f!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await n(u,g,g.destination);const v=await r(g);return Wu(v,h,i,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await n(u,h,p),p};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},$u=(s,e,t,n,r,i)=>o=>(a,c)=>{const l=s.get(a);if(l===void 0){if(!o&&i(a)){const u=n(a),{outputs:h}=t(a);for(const f of h)if(fs(f)){const p=n(f[0]);e(u,p,f[1],f[2])}else{const p=r(f[0]);u.disconnect(p,f[1])}}s.set(a,c)}else s.set(a,l+c)},Bu=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},ju=(s,e)=>t=>s.has(t)||e(t),Uu=(s,e)=>t=>s.has(t)||e(t),zu=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},Gu=s=>e=>s!==null&&e instanceof s,Yu=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,Hu=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,Xu=(s,e)=>t=>s(t)||e(t),Zu=s=>e=>s!==null&&e instanceof s,Qu=s=>s!==null&&s.isSecureContext,Ju=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Ku={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},eh=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i);if(n(a))throw new TypeError;const c={...Ku,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},th=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},nh=(s,e,t)=>class extends s{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},sh=(s,e,t,n,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,er.set(this,a),n(a)&&r.set(a,new Set),this._destination=new s(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Zn=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},rh=(s,e)=>(t,n,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),s(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&n(),a;o.call(t,a,c),s(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&n()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const f of i)f[1]===a&&i.delete(f)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},Ne=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t]&&(s[t]=n)},Be=(s,e)=>{Ne(s,e,"channelCount"),Ne(s,e,"channelCountMode"),Ne(s,e,"channelInterpretation")},ko=s=>typeof s.getFloatTimeDomainData=="function",ih=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const n=Math.max(t.length,s.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}},oh=(s,e)=>(t,n)=>{const r=t.createAnalyser();if(Be(r,n),!(n.maxDecibels>n.minDecibels))throw e();return Ne(r,n,"fftSize"),Ne(r,n,"maxDecibels"),Ne(r,n,"minDecibels"),Ne(r,n,"smoothingTimeConstant"),s(ko,()=>ko(r))||ih(r),r},ah=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,Ie=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t].value&&(s[t].value=n)},ch=s=>{s.start=(e=>{let t=!1;return(n=0,r=0,i)=>{if(t)throw Ue();e.call(s,n,r,i),t=!0}})(s.start)},hi=s=>{s.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,n,r)})(s.start)},di=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},lh=(s,e,t,n,r,i,o,a,c,l,u)=>(h,f)=>{const p=h.createBufferSource();return Be(p,f),Ie(p,f,"playbackRate"),Ne(p,f,"buffer"),Ne(p,f,"loop"),Ne(p,f,"loopEnd"),Ne(p,f,"loopStart"),e(t,()=>t(h))||ch(p),e(n,()=>n(h))||c(p),e(r,()=>r(h))||l(p,h),e(i,()=>i(h))||hi(p),e(o,()=>o(h))||u(p,h),e(a,()=>a(h))||di(p),s(h,p),p},uh=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,hh=(s,e)=>(t,n,r)=>{const i=t.destination;if(i.channelCount!==n)try{i.channelCount=n}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:n});const o=s(t,{channelCount:n,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},dh=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,fh=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},ph=(s,e,t,n,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>p,set:d=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof d=="function"?d:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(d=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const v=f.get(m[1]);v!==void 0?m[1]=v:(m[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),g(w)):g(new ErrorEvent(m[0],{...w}))},f.set(g,m[1]))}}return d.call(h,"error",m[1],m[2]),d.call(h,...m)})(h.addEventListener),h.removeEventListener=(d=>(...m)=>{if(m[0]==="processorerror"){const g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return d.call(h,"error",m[1],m[2]),d.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const d=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(d).connect(i.destination),r(h,()=>d.disconnect(),()=>d.connect(i.destination))}return h}catch(h){throw h.code===11?n():h}if(l===void 0)throw n();return fh(u),e(i,o,l,u)},Sa=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),mh=s=>new Promise((e,t)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:i})=>{n.close(),r.close(),e(i)},n.onmessageerror=({data:i})=>{n.close(),r.close(),t(i)},r.postMessage(s)}),_h=async(s,e)=>{const t=await mh(e);return new s(t)},gh=(s,e,t,n)=>{let r=Nr.get(s);r===void 0&&(r=new WeakMap,Nr.set(s,r));const i=_h(t,n);return r.set(e,i),i},vh=(s,e,t,n,r,i,o,a,c,l,u,h,f)=>(p,d,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(j=>j<1))throw c();if(v.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const w=g.channelCount*g.numberOfInputs,T=v.reduce((j,K)=>j+K,0),b=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(w+b>6||T>6)throw c();const _=new MessageChannel,y=[],k=[];for(let j=0;j<g.numberOfInputs;j+=1)y.push(o(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),k.push(r(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:j,maxValue:K,minValue:Ee,name:pe}of m.parameterDescriptors){const ce=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[pe]!==void 0?g.parameterData[pe]:j===void 0?0:j});Object.defineProperties(ce.offset,{defaultValue:{get:()=>j===void 0?0:j},maxValue:{get:()=>K===void 0?Ze:K},minValue:{get:()=>Ee===void 0?tt:Ee}}),S.push(ce)}const D=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+b)}),x=Sa(d,p.sampleRate),O=a(p,x,w+b,Math.max(1,T)),M=r(p,{channelCount:Math.max(1,T),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,T)}),F=[];for(let j=0;j<g.numberOfOutputs;j+=1)F.push(n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[j]}));for(let j=0;j<g.numberOfInputs;j+=1){y[j].connect(k[j]);for(let K=0;K<g.channelCount;K+=1)k[j].connect(D,K,j*g.channelCount+K)}const q=new wa(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:j},K)=>{const Ee=S[K];return Ee.connect(D,0,w+K),Ee.start(0),[j,Ee.offset]}));D.connect(O);let Y=g.channelInterpretation,R=null;const W=g.numberOfOutputs===0?[O]:F,G={get bufferSize(){return x},get channelCount(){return g.channelCount},set channelCount(j){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(j){throw t()},get channelInterpretation(){return Y},set channelInterpretation(j){for(const K of y)K.channelInterpretation=j;Y=j},get context(){return O.context},get inputs(){return y},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(j){typeof R=="function"&&G.removeEventListener("processorerror",R),R=typeof j=="function"?j:null,typeof R=="function"&&G.addEventListener("processorerror",R)},get parameters(){return q},get port(){return _.port2},addEventListener(...j){return O.addEventListener(j[0],j[1],j[2])},connect:s.bind(null,W),disconnect:l.bind(null,W),dispatchEvent(...j){return O.dispatchEvent(j[0])},removeEventListener(...j){return O.removeEventListener(j[0],j[1],j[2])}},L=new Map;_.port1.addEventListener=(j=>(...K)=>{if(K[0]==="message"){const Ee=typeof K[1]=="function"?K[1]:typeof K[1]=="object"&&K[1]!==null&&typeof K[1].handleEvent=="function"?K[1].handleEvent:null;if(Ee!==null){const pe=L.get(K[1]);pe!==void 0?K[1]=pe:(K[1]=ce=>{u(p.currentTime,p.sampleRate,()=>Ee(ce))},L.set(Ee,K[1]))}}return j.call(_.port1,K[0],K[1],K[2])})(_.port1.addEventListener),_.port1.removeEventListener=(j=>(...K)=>{if(K[0]==="message"){const Ee=L.get(K[1]);Ee!==void 0&&(L.delete(K[1]),K[1]=Ee)}return j.call(_.port1,K[0],K[1],K[2])})(_.port1.removeEventListener);let N=null;Object.defineProperty(_.port1,"onmessage",{get:()=>N,set:j=>{typeof N=="function"&&_.port1.removeEventListener("message",N),N=typeof j=="function"?j:null,typeof N=="function"&&(_.port1.addEventListener("message",N),_.port1.start())}}),m.prototype.port=_.port1;let E=null;gh(p,G,m,g).then(j=>E=j);const ie=Bs(g.numberOfInputs,g.channelCount),de=Bs(g.numberOfOutputs,v),se=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((j,{name:K})=>({...j,[K]:new Float32Array(128)}),{});let oe=!0;const fe=()=>{g.numberOfOutputs>0&&O.disconnect(M);for(let j=0,K=0;j<g.numberOfOutputs;j+=1){const Ee=F[j];for(let pe=0;pe<v[j];pe+=1)M.disconnect(Ee,K+pe,pe);K+=v[j]}},X=new Map;O.onaudioprocess=({inputBuffer:j,outputBuffer:K})=>{if(E!==null){const Ee=h(G);for(let pe=0;pe<x;pe+=128){for(let ce=0;ce<g.numberOfInputs;ce+=1)for(let we=0;we<g.channelCount;we+=1)$s(j,ie[ce],we,we,pe);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:ce},we)=>{$s(j,se,ce,w+we,pe)});for(let ce=0;ce<g.numberOfInputs;ce+=1)for(let we=0;we<v[ce];we+=1)de[ce][we].byteLength===0&&(de[ce][we]=new Float32Array(128));try{const ce=ie.map((Te,lt)=>{if(Ee[lt].size>0)return X.set(lt,x/128),Te;const sn=X.get(lt);return sn===void 0?[]:(Te.every(zn=>zn.every(Gt=>Gt===0))&&(sn===1?X.delete(lt):X.set(lt,sn-1)),Te)});oe=u(p.currentTime+pe/p.sampleRate,p.sampleRate,()=>E.process(ce,de,se));for(let Te=0,lt=0;Te<g.numberOfOutputs;Te+=1){for(let ut=0;ut<v[Te];ut+=1)Ta(K,de[Te],ut,lt+ut,pe);lt+=v[Te]}}catch(ce){oe=!1,G.dispatchEvent(new ErrorEvent("processorerror",{colno:ce.colno,filename:ce.filename,lineno:ce.lineno,message:ce.message}))}if(!oe){for(let ce=0;ce<g.numberOfInputs;ce+=1){y[ce].disconnect(k[ce]);for(let we=0;we<g.channelCount;we+=1)k[pe].disconnect(D,we,ce*g.channelCount+we)}if(m.parameterDescriptors!==void 0){const ce=m.parameterDescriptors.length;for(let we=0;we<ce;we+=1){const Te=S[we];Te.disconnect(D,0,w+we),Te.stop()}}D.disconnect(O),O.onaudioprocess=null,Fe?fe():Ye();break}}}};let Fe=!1;const ze=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ot=()=>O.connect(ze).connect(p.destination),Ye=()=>{O.disconnect(ze),ze.disconnect()},mt=()=>{if(oe){Ye(),g.numberOfOutputs>0&&O.connect(M);for(let j=0,K=0;j<g.numberOfOutputs;j+=1){const Ee=F[j];for(let pe=0;pe<v[j];pe+=1)M.connect(Ee,K+pe,pe);K+=v[j]}}Fe=!0},zt=()=>{oe&&(ot(),fe()),Fe=!1};return ot(),f(G,mt,zt)},Ca=(s,e)=>{const t=s.createBiquadFilter();return Be(t,e),Ie(t,e,"Q"),Ie(t,e,"detune"),Ie(t,e,"frequency"),Ie(t,e,"gain"),Ne(t,e,"type"),t},yh=(s,e)=>(t,n)=>{const r=t.createChannelMerger(n.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,r),Be(r,n),r},wh=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ue()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Ue()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Ue()}})},ps=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return Be(t,e),wh(t),t},Th=(s,e,t,n,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return Be(a,o),Ie(a,o,"offset"),e(n,()=>n(i))||hi(a),e(r,()=>r(i))||di(a),s(i,a),a},Ln=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),bh=(s,e,t,n)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(d){l.channelCount=d},get channelCountMode(){return l.channelCountMode},set channelCountMode(d){l.channelCountMode=d},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(d){l.channelInterpretation=d},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(d){c.onended=d},addEventListener(...d){return c.addEventListener(d[0],d[1],d[2])},dispatchEvent(...d){return c.dispatchEvent(d[0])},removeEventListener(...d){return c.removeEventListener(d[0],d[1],d[2])},start(d=0){c.start.call(c,d)},stop(d=0){c.stop.call(c,d)}},f=()=>c.connect(l),p=()=>c.disconnect(l);return s(r,c),n(Ln(h,l),f,p)},Sh=(s,e)=>(t,n)=>{const r=t.createConvolver();if(Be(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),Ne(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw s();return i.call(r,o)}),n.channelCountMode==="max"))throw s();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw s();return i.call(r,o)}),r},ka=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return Be(t,e),Ie(t,e,"delayTime"),t},Ch=s=>(e,t)=>{const n=e.createDynamicsCompressor();if(Be(n,t),t.channelCount>2||t.channelCountMode==="max")throw s();return Ie(n,t,"attack"),Ie(n,t,"knee"),Ie(n,t,"ratio"),Ie(n,t,"release"),Ie(n,t,"threshold"),n},it=(s,e)=>{const t=s.createGain();return Be(t,e),Ie(t,e,"gain"),t},kh=s=>(e,t,n)=>{if(e.createIIRFilter===void 0)return s(e,t,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return Be(r,n),r};function Ah(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function xh(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Ao(s,e){let t=[0,0];for(let n=s.length-1;n>=0;n-=1)t=xh(t,e),t[0]+=s[n];return t}const Mh=(s,e,t,n)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Sa(i,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),d=f.length,m=p.length,g=Math.min(d,m);if(d===0||d>20)throw n();if(f[0]===0)throw e();if(m===0||m>20)throw n();if(p[0]===0)throw e();if(f[0]!==1){for(let S=0;S<m;S+=1)p[S]/=f[0];for(let S=1;S<d;S+=1)f[S]/=f[0]}const v=t(r,h,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=c;const w=32,T=[],b=[],_=[];for(let S=0;S<o;S+=1){T.push(0);const D=new Float32Array(w),x=new Float32Array(w);D.fill(0),x.fill(0),b.push(D),_.push(x)}v.onaudioprocess=S=>{const D=S.inputBuffer,x=S.outputBuffer,O=D.numberOfChannels;for(let M=0;M<O;M+=1){const F=D.getChannelData(M),q=x.getChannelData(M);T[M]=ba(f,d,p,m,g,b[M],_[M],T[M],w,F,q)}};const y=r.sampleRate/2;return Ln({get bufferSize(){return h},get channelCount(){return v.channelCount},set channelCount(S){v.channelCount=S},get channelCountMode(){return v.channelCountMode},set channelCountMode(S){v.channelCountMode=S},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(S){v.channelInterpretation=S},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...S){return v.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return v.dispatchEvent(S[0])},getFrequencyResponse(S,D,x){if(S.length!==D.length||D.length!==x.length)throw s();const O=S.length;for(let M=0;M<O;M+=1){const F=-Math.PI*(S[M]/y),q=[Math.cos(F),Math.sin(F)],Y=Ao(p,q),R=Ao(f,q),W=Ah(Y,R);D[M]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),x[M]=Math.atan2(W[1],W[0])}},removeEventListener(...S){return v.removeEventListener(S[0],S[1],S[2])}},v)},Nh=(s,e)=>s.createMediaElementSource(e.mediaElement),Oh=(s,e)=>{const t=s.createMediaStreamDestination();return Be(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Dh=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const n=t.slice(0,1),r=s.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},Eh=(s,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const r=new MediaStream([n]),i=t.createMediaStreamSource(r);if(n.kind!=="audio")throw s();if(e(t))throw new TypeError;return i},Ih=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,Rh=(s,e,t,n,r,i)=>(o,a)=>{const c=o.createOscillator();return Be(c,a),Ie(c,a,"detune"),Ie(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Ne(c,a,"type"),e(t,()=>t(o))||hi(c),e(n,()=>n(o))||i(c,o),e(r,()=>r(o))||di(c),s(o,c),c},Ph=s=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?s(e,t):(Be(n,t),Ie(n,t,"orientationX"),Ie(n,t,"orientationY"),Ie(n,t,"orientationZ"),Ie(n,t,"positionX"),Ie(n,t,"positionY"),Ie(n,t,"positionZ"),Ne(n,t,"coneInnerAngle"),Ne(n,t,"coneOuterAngle"),Ne(n,t,"coneOuterGain"),Ne(n,t,"distanceModel"),Ne(n,t,"maxDistance"),Ne(n,t,"panningModel"),Ne(n,t,"refDistance"),Ne(n,t,"rolloffFactor"),n)},Vh=(s,e,t,n,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:p,distanceModel:d,maxDistance:m,orientationX:g,orientationY:v,orientationZ:w,panningModel:T,positionX:b,positionY:_,positionZ:y,refDistance:k,rolloffFactor:S,...D})=>{const x=u.createPanner();if(D.channelCount>2||D.channelCountMode==="max")throw o();Be(x,D);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=t(u,{...O,channelInterpretation:"speakers",numberOfInputs:6}),F=n(u,{...D,gain:1}),q=n(u,{...O,gain:1}),Y=n(u,{...O,gain:0}),R=n(u,{...O,gain:0}),W=n(u,{...O,gain:0}),G=n(u,{...O,gain:0}),L=n(u,{...O,gain:0}),N=r(u,256,6,1),E=i(u,{...O,curve:new Float32Array([1,1]),oversample:"none"});let H=[g,v,w],ie=[b,_,y];const de=new Float32Array(1);N.onaudioprocess=({inputBuffer:X})=>{const Fe=[c(X,de,0),c(X,de,1),c(X,de,2)];Fe.some((ot,Ye)=>ot!==H[Ye])&&(x.setOrientation(...Fe),H=Fe);const ze=[c(X,de,3),c(X,de,4),c(X,de,5)];ze.some((ot,Ye)=>ot!==ie[Ye])&&(x.setPosition(...ze),ie=ze)},Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0});const se={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(X){if(X>2)throw o();F.channelCount=X,x.channelCount=X},get channelCountMode(){return x.channelCountMode},set channelCountMode(X){if(X==="max")throw o();F.channelCountMode=X,x.channelCountMode=X},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(X){F.channelInterpretation=X,x.channelInterpretation=X},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(X){x.coneInnerAngle=X},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(X){x.coneOuterAngle=X},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(X){if(X<0||X>1)throw e();x.coneOuterGain=X},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(X){x.distanceModel=X},get inputs(){return[F]},get maxDistance(){return x.maxDistance},set maxDistance(X){if(X<0)throw new RangeError;x.maxDistance=X},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return q.gain},get orientationY(){return Y.gain},get orientationZ(){return R.gain},get panningModel(){return x.panningModel},set panningModel(X){x.panningModel=X},get positionX(){return W.gain},get positionY(){return G.gain},get positionZ(){return L.gain},get refDistance(){return x.refDistance},set refDistance(X){if(X<0)throw new RangeError;x.refDistance=X},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(X){if(X<0)throw new RangeError;x.rolloffFactor=X},addEventListener(...X){return F.addEventListener(X[0],X[1],X[2])},dispatchEvent(...X){return F.dispatchEvent(X[0])},removeEventListener(...X){return F.removeEventListener(X[0],X[1],X[2])}};h!==se.coneInnerAngle&&(se.coneInnerAngle=h),f!==se.coneOuterAngle&&(se.coneOuterAngle=f),p!==se.coneOuterGain&&(se.coneOuterGain=p),d!==se.distanceModel&&(se.distanceModel=d),m!==se.maxDistance&&(se.maxDistance=m),g!==se.orientationX.value&&(se.orientationX.value=g),v!==se.orientationY.value&&(se.orientationY.value=v),w!==se.orientationZ.value&&(se.orientationZ.value=w),T!==se.panningModel&&(se.panningModel=T),b!==se.positionX.value&&(se.positionX.value=b),_!==se.positionY.value&&(se.positionY.value=_),y!==se.positionZ.value&&(se.positionZ.value=y),k!==se.refDistance&&(se.refDistance=k),S!==se.rolloffFactor&&(se.rolloffFactor=S),(H[0]!==1||H[1]!==0||H[2]!==0)&&x.setOrientation(...H),(ie[0]!==0||ie[1]!==0||ie[2]!==0)&&x.setPosition(...ie);const oe=()=>{F.connect(x),s(F,E,0,0),E.connect(q).connect(M,0,0),E.connect(Y).connect(M,0,1),E.connect(R).connect(M,0,2),E.connect(W).connect(M,0,3),E.connect(G).connect(M,0,4),E.connect(L).connect(M,0,5),M.connect(N).connect(u.destination)},fe=()=>{F.disconnect(x),a(F,E,0,0),E.disconnect(q),q.disconnect(M),E.disconnect(Y),Y.disconnect(M),E.disconnect(R),R.disconnect(M),E.disconnect(W),W.disconnect(M),E.disconnect(G),G.disconnect(M),E.disconnect(L),L.disconnect(M),M.disconnect(N),N.disconnect(u.destination)};return l(Ln(se,x),oe,fe)},Fh=s=>(e,{disableNormalization:t,imag:n,real:r})=>{const i=n instanceof Float32Array?n:new Float32Array(n),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(n).length<2)throw s();return a},ms=(s,e,t,n)=>s.createScriptProcessor(e,t,n),qh=(s,e)=>(t,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,n);const i=t.createStereoPanner();return Be(i,n),Ie(i,n,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},Wh=(s,e,t,n,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(d,m,g,v)=>{const w=new Float32Array(16385),T=new Float32Array(16385);for(let D=0;D<16385;D+=1){const x=D/16384*c;w[D]=Math.cos(x),T[D]=Math.sin(x)}const b=t(d,{...l,gain:0}),_=n(d,{...u,curve:w}),y=n(d,{...u,curve:a}),k=t(d,{...l,gain:0}),S=n(d,{...u,curve:T});return{connectGraph(){m.connect(b),m.connect(y.inputs===void 0?y:y.inputs[0]),m.connect(k),y.connect(g),g.connect(_.inputs===void 0?_:_.inputs[0]),g.connect(S.inputs===void 0?S:S.inputs[0]),_.connect(b.gain),S.connect(k.gain),b.connect(v,0,0),k.connect(v,0,1)},disconnectGraph(){m.disconnect(b),m.disconnect(y.inputs===void 0?y:y.inputs[0]),m.disconnect(k),y.disconnect(g),g.disconnect(_.inputs===void 0?_:_.inputs[0]),g.disconnect(S.inputs===void 0?S:S.inputs[0]),_.disconnect(b.gain),S.disconnect(k.gain),b.disconnect(v,0,0),k.disconnect(v,0,1)}}},f=(d,m,g,v)=>{const w=new Float32Array(16385),T=new Float32Array(16385),b=new Float32Array(16385),_=new Float32Array(16385),y=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>y){const G=(W-y)/(16384-y)*c;w[W]=Math.cos(G),T[W]=Math.sin(G),b[W]=0,_[W]=1}else{const G=W/(16384-y)*c;w[W]=1,T[W]=0,b[W]=Math.cos(G),_[W]=Math.sin(G)}const k=e(d,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=t(d,{...l,gain:0}),D=n(d,{...u,curve:w}),x=t(d,{...l,gain:0}),O=n(d,{...u,curve:T}),M=n(d,{...u,curve:a}),F=t(d,{...l,gain:0}),q=n(d,{...u,curve:b}),Y=t(d,{...l,gain:0}),R=n(d,{...u,curve:_});return{connectGraph(){m.connect(k),m.connect(M.inputs===void 0?M:M.inputs[0]),k.connect(S,0),k.connect(x,0),k.connect(F,1),k.connect(Y,1),M.connect(g),g.connect(D.inputs===void 0?D:D.inputs[0]),g.connect(O.inputs===void 0?O:O.inputs[0]),g.connect(q.inputs===void 0?q:q.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),D.connect(S.gain),O.connect(x.gain),q.connect(F.gain),R.connect(Y.gain),S.connect(v,0,0),F.connect(v,0,0),x.connect(v,0,1),Y.connect(v,0,1)},disconnectGraph(){m.disconnect(k),m.disconnect(M.inputs===void 0?M:M.inputs[0]),k.disconnect(S,0),k.disconnect(x,0),k.disconnect(F,1),k.disconnect(Y,1),M.disconnect(g),g.disconnect(D.inputs===void 0?D:D.inputs[0]),g.disconnect(O.inputs===void 0?O:O.inputs[0]),g.disconnect(q.inputs===void 0?q:q.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),D.disconnect(S.gain),O.disconnect(x.gain),q.disconnect(F.gain),R.disconnect(Y.gain),S.disconnect(v,0,0),F.disconnect(v,0,0),x.disconnect(v,0,1),Y.disconnect(v,0,1)}}},p=(d,m,g,v,w)=>{if(m===1)return h(d,g,v,w);if(m===2)return f(d,g,v,w);throw r()};return(d,{channelCount:m,channelCountMode:g,pan:v,...w})=>{if(g==="max")throw r();const T=s(d,{...w,channelCount:1,channelCountMode:g,numberOfInputs:2}),b=t(d,{...w,channelCount:m,channelCountMode:g,gain:1}),_=t(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:y,disconnectGraph:k}=p(d,m,b,_,T);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(M){b.channelCount!==M&&(D&&k(),{connectGraph:y,disconnectGraph:k}=p(d,M,b,_,T),D&&y()),b.channelCount=M},get channelCountMode(){return b.channelCountMode},set channelCountMode(M){if(M==="clamped-max"||M==="max")throw r();b.channelCountMode=M},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(M){b.channelInterpretation=M},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get pan(){return _.gain},addEventListener(...M){return b.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return b.dispatchEvent(M[0])},removeEventListener(...M){return b.removeEventListener(M[0],M[1],M[2])}};let D=!1;const x=()=>{y(),D=!0},O=()=>{k(),D=!1};return i(Ln(S,T),x,O)}},Lh=(s,e,t,n,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);Be(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Ne(l,{curve:u},"curve"),Ne(l,c,"oversample");let h=null,f=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),f&&(n(g)&&h===null?h=s(a,l):!n(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{f=!0,n(l.curve)&&(h=s(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},$h=(s,e,t,n,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();Be(l,c),Be(u,c);const h=t(i,{...c,gain:1}),f=t(i,{...c,gain:-1}),p=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1});let m=null,g=!1,v=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(_){h.channelCount=_,f.channelCount=_,l.channelCount=_,p.channelCount=_,u.channelCount=_,d.channelCount=_},get channelCountMode(){return l.channelCountMode},set channelCountMode(_){h.channelCountMode=_,f.channelCountMode=_,l.channelCountMode=_,p.channelCountMode=_,u.channelCountMode=_,d.channelCountMode=_},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,f.channelInterpretation=_,l.channelInterpretation=_,p.channelInterpretation=_,u.channelInterpretation=_,d.channelInterpretation=_},get context(){return l.context},get curve(){return v},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)l.curve=_,u.curve=_;else{const y=_.length,k=new Float32Array(y+2-y%2),S=new Float32Array(y+2-y%2);k[0]=_[0],S[0]=-_[y-1];const D=Math.ceil((y+1)/2),x=(y+1)/2-1;for(let O=1;O<D;O+=1){const M=O/D*x,F=Math.floor(M),q=Math.ceil(M);k[O]=F===q?_[F]:(1-(M-F))*_[F]+(1-(q-M))*_[q],S[O]=F===q?-_[y-1-F]:-((1-(M-F))*_[y-1-F])-(1-(q-M))*_[y-1-q]}k[D]=y%2===1?_[D-1]:(_[D-2]+_[D-1])/2,l.curve=k,u.curve=S}v=_,g&&(n(v)&&m===null?m=s(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(_){l.oversample=_,u.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const T=()=>{h.connect(l).connect(p),h.connect(f).connect(u).connect(d).connect(p),g=!0,n(v)&&(m=s(i,h))},b=()=>{h.disconnect(l),l.disconnect(p),h.disconnect(f),f.disconnect(u),u.disconnect(d),d.disconnect(p),g=!1,m!==null&&(m(),m=null)};return r(Ln(w,p),T,b)},et=()=>new DOMException("","NotSupportedError"),Bh={numberOfChannels:1},jh=(s,e,t,n,r)=>class extends s{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={...Bh,...l},p=n(h,u,f);e(Zn,()=>Zn(p))||p.addEventListener("statechange",(()=>{let d=0;const m=g=>{this._state==="running"&&(d>0?(p.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):d+=1)};return m})()),super(p,h),this._length=u,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,_a(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Uh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},zh=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...Uh,...l},f=t(u,h),p=i(u),d=p?n():null,m=c.sampleRate/2;super(c,!1,f,d),this._detune=e(this,p,f.detune,153600,-153600),this._frequency=e(this,p,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=d,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Rn(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Lt(this)&&hs(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Gh=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=t(u);const p=Xe(f,h);if(!p){const d={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(h,d),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),p?(await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency)):(await n(h,u.detune,f.detune),await n(h,u.frequency,f.frequency)),await r(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},Yh={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Hh=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...Yh,...l},f=t(u,h),p=i(u),d=p?n():null;super(c,!1,f,d),this._nativePannerNode=f,this._orientationX=e(this,p,f.orientationX,Ze,tt),this._orientationY=e(this,p,f.orientationY,Ze,tt),this._orientationZ=e(this,p,f.orientationZ,Ze,tt),this._positionX=e(this,p,f.positionX,Ze,tt),this._positionY=e(this,p,f.positionY,Ze,tt),this._positionZ=e(this,p,f.positionZ,Ze,tt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Xh=(s,e,t,n,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(p,d)=>{let m=null,g=i(p);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},w={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},T=Xe(g,d);if("bufferSize"in g)m=n(d,{...v,gain:1});else if(!T){const b={...w,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(d,b)}if(u.set(d,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const O=new o(6,p.context.length,d.sampleRate),M=e(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});M.connect(O.destination),h=(async()=>{const F=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(q,Y)=>{const R=t(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y===0?1:0});return await a(O,q,R.offset),R}));for(let q=0;q<6;q+=1)F[q].connect(M,0,q),F[q].start(0);return l(O)})()}const b=await h,_=n(d,{...v,gain:1});await c(p,d,_);const y=[];for(let O=0;O<b.numberOfChannels;O+=1)y.push(b.getChannelData(O));let k=[y[0][0],y[1][0],y[2][0]],S=[y[3][0],y[4][0],y[5][0]],D=n(d,{...v,gain:1}),x=r(d,{...w,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:S[0],positionY:S[1],positionZ:S[2]});_.connect(D).connect(x.inputs[0]),x.connect(m);for(let O=128;O<b.length;O+=128){const M=[y[0][O],y[1][O],y[2][O]],F=[y[3][O],y[4][O],y[5][O]];if(M.some((q,Y)=>q!==k[Y])||F.some((q,Y)=>q!==S[Y])){k=M,S=F;const q=O/d.sampleRate;D.gain.setValueAtTime(0,q),D=n(d,{...v,gain:0}),x=r(d,{...w,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),D.gain.setValueAtTime(1,q),_.connect(D).connect(x.inputs[0]),x.connect(m)}}return m}return T?(await s(d,p.orientationX,g.orientationX),await s(d,p.orientationY,g.orientationY),await s(d,p.orientationZ,g.orientationZ),await s(d,p.positionX,g.positionX),await s(d,p.positionY,g.positionY),await s(d,p.positionZ,g.positionZ)):(await a(d,p.orientationX,g.orientationX),await a(d,p.orientationY,g.orientationY),await a(d,p.orientationZ,g.orientationZ),await a(d,p.positionX,g.positionX),await a(d,p.positionY,g.positionY),await a(d,p.positionZ,g.positionZ)),Wn(g)?await c(p,d,g.inputs[0]):await c(p,d,g),g};return{render(p,d){const m=u.get(d);return m!==void 0?Promise.resolve(m):f(p,d)}}},Zh={disableNormalization:!1},Qh=(s,e,t,n)=>class Aa{constructor(i,o){const a=e(i),c=n({...Zh,...o}),l=s(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Aa.prototype||t.has(i)}},Jh=(s,e)=>(t,n,r)=>(s(n).replay(r),e(n,t,r)),Kh=(s,e,t)=>async(n,r,i)=>{const o=s(n);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,r),p=n.context.destination;!t(l)&&(n!==p||!t(n))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},ed=(s,e,t)=>async(n,r,i)=>{const o=e(n);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await s(a).render(a,r);t(a)||u.connect(i,c)}))},td=(s,e,t,n)=>r=>s(Zn,()=>Zn(r))?Promise.resolve(s(n,n)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),nd=s=>(e,t)=>{s.set(e,t)},sd=s=>(e,t)=>s.set(e,t),rd=(s,e,t,n,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(n(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),ci(u)):e(i,()=>i(u))||a(u),s.add(u),u)),id={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},od=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...id,...c},h=t(l,u),f=i(l),p=f?n():null;super(a,!1,h,p),this._pan=e(this,f,h.pan)}get pan(){return this._pan}},ad=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=Xe(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await s(c,a.pan,l.pan):await n(c,a.pan,l.pan),Wn(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},cd=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},ld=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await n.audioWorklet.addModule(r);const a=new s(n,"a",{numberOfOutputs:0}),c=n.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await n.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},ud=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})},hd=()=>new DOMException("","UnknownError"),dd={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},fd=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...dd,...l},f=t(u,h),d=i(u)?n():null;super(c,!0,f,d),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},pd=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=s(o,l)}return n.set(o,a),Wn(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},md=()=>typeof window>"u"?null:window,_d=(s,e)=>t=>{t.copyFromChannel=(n,r,i=0)=>{const o=s(i),a=s(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=n.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)n[h]=l[h+o]},t.copyToChannel=(n,r,i=0)=>{const o=s(i),a=s(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=n.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=n[h]}},gd=s=>e=>{e.copyFromChannel=(t=>(n,r,i=0)=>{const o=s(i),a=s(r);if(o<e.length)return t.call(e,n,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,i=0)=>{const o=s(i),a=s(r);if(o<e.length)return t.call(e,n,a,o)})(e.copyToChannel)},vd=s=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),s(e,"buffer",r=>()=>{const i=r.call(e);return i===n?null:i},r=>i=>r.call(e,i===null?n:i))},yd=(s,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const r=t.createBufferSource();e(n,()=>{const a=n.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(n,0,c)},()=>r.disconnect(n))},xa=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),Ma=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},_s=(s,e,t,n)=>{let r=s;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(s,e,{get:t(i),set:n(o)})},wd=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),Td=s=>({...s,channelCount:s.numberOfOutputs}),bd=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},Na=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;Na(s,e,t+1e-7)}},Sd=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Cd=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},kd=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},fi=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Oa=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},pi=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Ad=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},xd=s=>{s.start=(e=>(t=0,n=0,r)=>{const i=s.buffer,o=i===null?n:Math.min(i.duration,n);i!==null&&o>i.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,o,r)})(s.start)},Da=(s,e)=>{const t=e.createGain();s.connect(t);const n=(r=>()=>{r.call(s,t),s.removeEventListener("ended",n)})(s.disconnect);s.addEventListener("ended",n),Ln(s,t),s.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(s,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(s,o),i=!0}})(s.stop)},$n=(s,e)=>t=>{const n={value:s};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},Md=Hc(yn),Nd=el(yn),Od=du(tr),Ea=new WeakMap,Dd=Ou(Ea),St=Bl(new Map,new WeakMap),Nt=md(),Ia=oh(St,Dt),mi=Nu(Qe),Ge=Kh(Qe,mi,hn),Ed=il(Ia,xe,Ge),ke=Iu(er),Bt=Ih(Nt),ye=Zu(Bt),Ra=new WeakMap,Pa=bu($n),gs=uh(Nt),_i=Gu(gs),gi=Yu(Nt),Va=Hu(Nt),Qn=dh(Nt),Le=Ol(Xc(la),Kc(Md,Nd,qs,Od,Ws,Qe,Dd,us,xe,yn,Lt,hn,Os),St,$u(xr,Ws,Qe,xe,Xn,Lt),Dt,nr,et,cu(qs,xr,Qe,xe,Xn,ke,Lt,ye),mu(Ra,Qe,yt),Pa,ke,_i,gi,Va,ye,Qn),Id=rl(Le,Ed,Dt,Ia,ke,ye),vi=new WeakSet,xo=ah(Nt),Fa=tu(new Uint32Array(1)),yi=_d(Fa,Dt),wi=gd(Fa),Rd=al(vi,St,et,xo,Bt,cd(xo),yi,wi),sr=tl(it),qa=ed(mi,ds,hn),Et=Xl(qa),Bn=lh(sr,St,Sd,Cd,kd,fi,Oa,pi,xd,vd(_s),Da),It=Jh(Du(ds),qa),Pd=ul(Et,Bn,xe,It,Ge),Ct=Dl(Zc(ua),Ra,ai,El,Bc,jc,Uc,zc,Gc,Cr,aa,gs,Na),Vd=ll(Le,Pd,Ct,Ue,Bn,ke,ye,$n),Fd=yl(Le,wl,Dt,Ue,hh(it,_s),ke,ye,Ge),qd=$l(Et,Ca,xe,It,Ge),wn=sd(Ea),Wd=Ll(Le,Ct,qd,nr,Ca,ke,ye,wn),tn=rh(yn,gi),Ld=yd(Ue,tn),nn=yh(gs,Ld),$d=zl(nn,xe,Ge),Bd=Ul(Le,$d,nn,ke,ye),jd=Hl(ps,xe,Ge),Ud=Yl(Le,jd,ps,ke,ye,Td),zd=bh(sr,Bn,it,tn),jn=Th(sr,St,zd,fi,pi),Gd=eu(Et,jn,xe,It,Ge),Yd=Kl(Le,Ct,Gd,jn,ke,ye,$n),Wa=Sh(et,_s),Hd=ru(Wa,xe,Ge),Xd=su(Le,Hd,Wa,ke,ye,wn),Zd=hu(Et,ka,xe,It,Ge),Qd=uu(Le,Ct,Zd,ka,ke,ye,wn),La=Ch(et),Jd=yu(Et,La,xe,It,Ge),Kd=vu(Le,Ct,Jd,La,et,ke,ye,wn),e1=xu(Et,it,xe,It,Ge),t1=Au(Le,Ct,e1,it,ke,ye),n1=Mh(nr,Ue,ms,et),rr=td(St,it,ms,ud(it,Bt)),s1=Lu(Bn,xe,Bt,Ge,rr),r1=kh(n1),i1=qu(Le,r1,s1,ke,ye,wn),o1=Tl(Ct,nn,jn,ms,et,xa,ye,_s),$a=new WeakMap,a1=sh(Fd,o1,Pa,ye,$a,$n),Ba=Rh(sr,St,fi,Oa,pi,Da),c1=Gh(Et,Ba,xe,It,Ge),l1=zh(Le,Ct,Ba,c1,ke,ye,$n),ja=Ql(Bn),u1=$h(ja,Ue,it,Ma,tn),ir=Lh(ja,Ue,u1,Ma,tn,gs,_s),h1=Vh(qs,Ue,nn,it,ms,ir,et,Ws,xa,tn),Ua=Ph(h1),d1=Xh(Et,nn,jn,it,Ua,xe,Bt,It,Ge,rr),f1=Hh(Le,Ct,Ua,d1,ke,ye,wn),p1=Fh(Dt),m1=Qh(p1,ke,new WeakSet,bd),_1=Wh(nn,ps,it,ir,et,tn),za=qh(_1,et),g1=ad(Et,za,xe,It,Ge),v1=od(Le,Ct,za,g1,ke,ye),y1=pd(ir,xe,Ge),w1=fd(Le,Ue,ir,y1,ke,ye,wn),Ga=Qu(Nt),Ti=Su(Nt),Ya=new WeakMap,T1=Ru(Ya,Bt),b1=Ga?Jc(St,et,Tu(Nt),Ti,Cu(Yc),ke,T1,ye,Qn,new WeakMap,new WeakMap,ld(Qn,Bt),Nt):void 0,S1=Xu(_i,ye),C1=au(vi,St,ou,wu,new WeakSet,ke,S1,Vs,Zn,yi,wi),Ha=ql(b1,Id,Rd,Vd,Wd,Bd,Ud,Yd,Xd,C1,Qd,Kd,t1,i1,a1,l1,f1,m1,v1,w1),k1=Ju(Le,Nh,ke,ye),A1=eh(Le,Oh,ke,ye),x1=th(Le,Dh,ke,ye),M1=Eh(Ue,ye),N1=nh(Le,M1,ke),O1=vl(Ha,Ue,et,hd,k1,A1,x1,N1,gs),bi=Pu($a),D1=nl(bi),Xa=Zl(Dt),E1=fu(bi),Za=_u(Dt),Qa=new WeakMap,I1=Mu(Qa,yt),R1=vh(Xa,Dt,Ue,nn,ps,jn,it,ms,et,Za,Ti,I1,tn),P1=ph(Ue,R1,it,et,tn),V1=Fl(Et,Xa,Bn,nn,ps,jn,it,E1,Za,Ti,xe,Qn,Bt,It,Ge,rr),F1=Eu(Ya),q1=nd(Qa),Mo=Ga?Rl(D1,Le,Ct,V1,P1,Qe,F1,ke,ye,Qn,wd,q1,Ad,$n):void 0,W1=iu(et,Bt),L1=rd(vi,St,mi,bi,rr,Vs,yi,wi),$1=jh(Ha,St,Ue,W1,L1),B1=Bu(er,_i),j1=ju(oi,gi),U1=Uu(ai,Va),z1=zu(er,ye);function re(s,e){if(!s)throw new Error(e)}function Kt(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function Ja(s){!s.isOffline&&s.state!=="running"&&ec('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Ka=console;function G1(...s){Ka.log(...s)}function ec(...s){Ka.warn(...s)}function pt(s){return typeof s>"u"}function le(s){return!pt(s)}function Y1(s){return typeof s=="function"}function dn(s){return typeof s=="number"}function cn(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function H1(s){return typeof s=="boolean"}function gt(s){return Array.isArray(s)}function Ot(s){return typeof s=="string"}function xs(s){return Ot(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function X1(s){return new O1(s)}function Z1(s,e,t){return new $1(s,e,t)}const ln=typeof self=="object"?self:null,Q1=ln&&(ln.hasOwnProperty("AudioContext")||ln.hasOwnProperty("webkitAudioContext"));function J1(s,e,t){return re(le(Mo),"This node only works in a secure context (https or localhost)"),new Mo(s,e,t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function kt(s,e,t,n){var r=arguments.length,i=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function $e(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((n=n.apply(s,e||[])).next())})}class K1{constructor(e,t,n){this._callback=e,this._type=t,this._updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function fn(s){return U1(s)}function Zt(s){return j1(s)}function Ds(s){return z1(s)}function An(s){return B1(s)}function tc(s){return s instanceof AudioBuffer}function ef(s,e){return s==="value"||fn(e)||Zt(e)||tc(e)}function On(s,...e){if(!e.length)return s;const t=e.shift();if(cn(s)&&cn(t))for(const n in t)ef(n,t[n])?s[n]=t[n]:cn(t[n])?(s[n]||Object.assign(s,{[n]:{}}),On(s[n],t[n])):Object.assign(s,{[n]:t[n]});return On(s,...e)}function tf(s,e){return s.length===e.length&&s.every((t,n)=>e[n]===t)}function U(s,e,t=[],n){const r={},i=Array.from(e);if(cn(i[0])&&n&&!Reflect.has(i[0],n)&&(Object.keys(i[0]).some(a=>Reflect.has(s,a))||(On(r,{[n]:i[0]}),t.splice(t.indexOf(n),1),i.shift())),i.length===1&&cn(i[0]))On(r,i[0]);else for(let o=0;o<t.length;o++)le(i[o])&&(r[t[o]]=i[o]);return On(s,r)}function nf(s){return s.constructor.getDefaults()}function Dn(s,e){return pt(s)?e:s}function No(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class jt{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ln&&this.toString()===ln.TONE_DEBUG_CLASS)&&G1(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}jt.version=oa;const Si=1e-6;function js(s,e){return s>e+Si}function Er(s,e){return js(s,e)||_t(s,e)}function nc(s,e){return s+Si<e}function _t(s,e){return Math.abs(s-e)<Si}function sf(s,e,t){return Math.max(Math.min(s,t),e)}class Rt extends jt{constructor(){super(),this.name="Timeline",this._timeline=[];const e=U(Rt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(re(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];re(Er(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(_t(this._timeline[t].time,e)){for(let n=t;n>=0&&_t(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Er(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<i;){let o=Math.floor(n+(i-n)/2);const a=this._timeline[o],c=this._timeline[o+1];if(_t(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(_t(u[t],e))o=l;else break}return o}else{if(nc(a[t],e)&&js(c[t],e))return o;js(a[t],e)?i=o:n=o+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,r,i)):r===-1&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&_t(this._timeline[n].time,e)){let r=n;for(let i=n;i>=0&&_t(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const sc=[];function or(s){sc.push(s)}function rf(s){sc.forEach(e=>e(s))}const rc=[];function ar(s){rc.push(s)}function of(s){rc.forEach(e=>e(s))}class vs extends jt{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{pt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(pt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(pt(t))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,i=n.length;r<i;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(vs.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class ic extends vs{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ys extends ic{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Rt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=U(ys.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=X1({latencyHint:e.latencyHint}),this._ticker=new K1(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(rf(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return re(An(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return re(An(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return re(An(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){re(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){re(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){re(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){re(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return J1(this.rawContext,e,t)}addAudioWorkletModule(e,t){return $e(this,void 0,void 0,function*(){re(le(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return $e(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,Ot(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return An(this._context)?this._context.resume():Promise.resolve()}close(){return $e(this,void 0,void 0,function*(){An(this._context)&&(yield this._context.close()),this._initialized&&of(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:i+t})};return r(),n}}class af extends ic{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return $e(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ve(s,e){gt(e)?e.forEach(t=>Ve(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function oc(s,e){gt(e)?e.forEach(t=>oc(s,t)):Object.defineProperty(s,e,{writable:!0})}const be=()=>{};class Ce extends jt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=be;const e=U(Ce.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&tc(e.url)||e.url instanceof Ce?this.set(e.url):Ot(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:be,onload:be,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:at().sampleRate}set(e){return e instanceof Ce?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return $e(this,void 0,void 0,function*(){const t=Ce.load(e).then(n=>{this.set(n),this.onload(this)});Ce.downloads.push(t);try{yield t}finally{const n=Ce.downloads.indexOf(t);Ce.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=gt(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,i=at(),o=i.createBuffer(n,r,i.sampleRate),a=!t&&n===1?[e]:e;for(let c=0;c<n;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(dn(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(dn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);re(n<r,"The start time must be less than the end time");const i=r-n,o=at().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(n,r),a);return new Ce(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ce().fromArray(e)}static fromUrl(e){return $e(this,void 0,void 0,function*(){return yield new Ce().load(e)})}static load(e){return $e(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const a=t[1].split("|");let c=a[0];for(const l of a)if(Ce.supportsType(l)){c=l;break}e=e.replace(t[0],c)}const n=Ce.baseUrl===""||Ce.baseUrl.endsWith("/")?Ce.baseUrl:Ce.baseUrl+"/",r=yield fetch(n+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const i=yield r.arrayBuffer();return yield at().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return $e(this,void 0,void 0,function*(){for(yield Promise.resolve();Ce.downloads.length;)yield Ce.downloads[0]})}}Ce.baseUrl="";Ce.downloads=[];class Ci extends ys{constructor(){super({clockSource:"offline",context:Ds(arguments[0])?arguments[0]:Z1(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Ds(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Ds(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return $e(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return $e(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Ce(t)})}close(){return Promise.resolve()}}const ac=new af;let Gn=ac;function at(){return Gn===ac&&Q1&&cf(new ys),Gn}function cf(s){An(s)?Gn=new ys(s):Ds(s)?Gn=new Ci(s):Gn=s}if(ln&&!ln.TONE_SILENCE_LOGGING){const e=` * Tone.js v${oa} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function lf(s){return Math.pow(10,s/20)}function uf(s){return 20*(Math.log(s)/Math.LN10)}function cc(s){return Math.pow(2,s/12)}let cr=440;function hf(){return cr}function df(s){cr=s}function Ir(s){return Math.round(lc(s))}function lc(s){return 69+12*Math.log2(s/cr)}function ff(s){return cr*Math.pow(2,(s-69)/12)}class ki extends jt{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ki&&this.fromType(this._val),pt(this._val))return this._noArg();if(Ot(this._val)&&pt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(cn(this._val)){let e=0;for(const t in this._val)if(le(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(le(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Ot(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class dt extends ki{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new dt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/n)*n-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let n=t[0],r=new dt(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new dt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(n=i,r=o)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Ir(this.toFrequency())}_now(){return this.context.now()}}function pf(s,e){return new dt(at(),s,e)}class ft extends dt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return hf()}static set A4(e){df(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:ft.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=mf[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:ft.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new ft(this.context,this.valueOf()*cc(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Ir(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/ft.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),_f[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ff(e)}static ftom(e){return Ir(e)}}const mf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},_f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Yn extends dt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class rt extends jt{constructor(){super();const e=U(rt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:at()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new dt(this.context,e).toSeconds()}toFrequency(e){return new ft(this.context,e).toFrequency()}toTicks(e){return new Yn(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{pt(e[n])&&delete t[n]}),t}get(){const e=nf(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];le(n)&&le(n.value)&&le(n.setValueAtTime)?e[t]=n.value:n instanceof rt?e[t]=n._getPartialProperties(e[t]):gt(n)||dn(n)||Ot(n)||H1(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&le(this[t])&&(this[t]&&le(this[t].value)&&le(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof rt?this[t].set(e[t]):this[t]=e[t])}),this}}class Ai extends Rt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return Kt(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let r=n;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Me extends rt{constructor(){super(U(Me.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=U(Me.getDefaults(),arguments,["param","units","convert"]);for(re(le(e.param)&&(fn(e.param)||e.param instanceof Me),"param must be an AudioParam");!fn(e.param);)e.param=e.param._param;this._swappable=le(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Rt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,le(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(rt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return le(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return le(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return le(this.maxValue)&&le(this.minValue)&&Kt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?lf(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?uf(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return re(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(n===null)i=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}n.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,n.time,n.value,t):i=this._exponentialInterpolate(r.time,o,n.time,n.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return re(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=_t(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return re(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);re(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),re(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=n/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return re(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));re(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),i=this._events.getAfter(t);return r&&_t(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){re(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,i){return n+(t-n)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,n,r,i){return t+(r-t)*((i-e)/(n-e))}_exponentialInterpolate(e,t,n,r,i){return t*Math.pow(r/t,(i-e)/(n-e))}}class ae extends rt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return le(this.input)?fn(this.input)||this.input instanceof Me?1:this.input.numberOfInputs:0}get numberOfOutputs(){return le(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return le(e)&&(e instanceof ae||Zt(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();re(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return Un(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ec("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return gf(this,e,t,n),this}chain(...e){return Rr(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),le(this.input)&&(this.input instanceof ae?this.input.dispose():Zt(this.input)&&this.input.disconnect()),le(this.output)&&(this.output instanceof ae?this.output.dispose():Zt(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Rr(...s){const e=s.shift();s.reduce((t,n)=>(t instanceof ae?t.connect(n):Zt(t)&&Un(t,n),n),e)}function Un(s,e,t=0,n=0){for(re(le(s),"Cannot connect from undefined node"),re(le(e),"Cannot connect to undefined node"),(e instanceof ae||Zt(e))&&re(e.numberOfInputs>0,"Cannot connect to node with no inputs"),re(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ae||e instanceof Me;)le(e.input)&&(e=e.input);for(;s instanceof ae;)le(s.output)&&(s=s.output);fn(e)?s.connect(e,t):s.connect(e,t,n)}function gf(s,e,t=0,n=0){if(le(e))for(;e instanceof ae;)e=e.input;for(;!Zt(s);)le(s.output)&&(s=s.output);fn(e)?s.disconnect(e,t):Zt(e)?s.disconnect(e,t,n):s.disconnect()}class Ke extends ae{constructor(){super(U(Ke.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=U(Ke.getDefaults(),arguments,["gain","units"]);this.gain=new Me({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ve(this,"gain")}static getDefaults(){return Object.assign(ae.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Pn extends ae{constructor(e){super(e),this.onended=be,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ke({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ae.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:be})}_startGain(e,t=1){re(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){re(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==be&&(this.onended(this),this.onended=be,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),re(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Us extends Pn{constructor(){super(U(Us.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=U(Us.getDefaults(),arguments,["offset"]);Un(this._source,this._gainNode),this.offset=new Me({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Pn.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class je extends ae{constructor(){super(U(je.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=U(je.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Us({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ae.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return xi(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function xi(s,e,t,n){(e instanceof Me||fn(e)||e instanceof je&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof je&&(e.overridden=!0)),Un(s,e,t,n)}class zs extends Me{constructor(){super(U(zs.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Rt(1/0),this._multiplier=1;const e=U(zs.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Me.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/n,1));for(let a=0;a<=o;a++){const c=n*a+t,l=this._exponentialApproach(i.time,i.value,r,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(pt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Gs extends je{constructor(){super(U(Gs.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=U(Gs.getDefaults(),arguments,["value"]);this.input=this._param=new zs({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(je.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ys extends rt{constructor(){super(U(Ys.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ai,this._tickOffset=new Rt;const e=U(Ys.getDefaults(),arguments,["frequency"]);this.frequency=new Gs({context:this.context,units:e.units,value:e.frequency}),Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},rt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),le(t)&&this.setTicksAtTime(t,n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let i=n,o=0;return this._state.forEachBetween(n.time,t+this.sampleTime,a=>{let c=i.time;const l=this._tickOffset.get(a.time);l&&l.time>=i.time&&(o=l.ticks,c=l.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);let r=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(n),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(n.time,r.time),o=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,n),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=_t(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{n(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Jn extends rt{constructor(){super(U(Jn.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=be,this._lastUpdate=0,this._state=new Ai("stopped"),this._boundLoop=this._loop.bind(this);const e=U(Jn.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ys({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(rt.getDefaults(),{callback:be,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Ja(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}vs.mixin(Jn);class Mi extends jt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=U(Mi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:be,onload:be,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return re(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=be,r=be){return Ot(t)?this._buffers.set(e.toString(),new Ce(this.baseUrl+t,n,r)):this._buffers.set(e.toString(),new Ce(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Vt extends Yn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class vf extends rt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Rt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}or(s=>{s.draw=new vf({context:s})});ar(s=>{s.draw.dispose()});class yf extends jt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){re(le(e.time),"Events must have a time property"),re(le(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new wf(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class wf{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class pn extends ae{constructor(){super(U(pn.getDefaults(),arguments,["volume"])),this.name="Volume";const e=U(pn.getDefaults(),arguments,["volume"]);this.input=this.output=new Ke({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ve(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Hs extends ae{constructor(){super(U(Hs.getDefaults(),arguments)),this.name="Destination",this.input=new pn({context:this.context}),this.output=new Ke({context:this.context}),this.volume=this.input.volume;const e=U(Hs.getDefaults(),arguments);Rr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Rr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}or(s=>{s.destination=new Hs({context:s})});ar(s=>{s.destination.dispose()});class Tf extends jt{constructor(e){super(),this.name="TimelineValue",this._timeline=new Rt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class en{constructor(e,t){this.id=en._eventId++;const n=Object.assign(en.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:be,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}en._eventId=0;class Ni extends en{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Ni.getDefaults(),t);this.duration=new Vt(e.context,n.duration).valueOf(),this._interval=new Vt(e.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},en.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Vt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Vt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Vt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Kn extends rt{constructor(){super(U(Kn.getDefaults(),arguments)),this.name="Transport",this._loop=new Tf(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Rt,this._repeatedEvents=new yf,this._syncedSignals=[],this._swingAmount=0;const e=U(Kn.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Jn({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ve(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(rt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new Vt(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(t,n=>n.invoke(e))}schedule(e,t){const n=new en(this,{callback:e,time:new Yn(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){const i=new Ni(this,{callback:e,duration:new dt(this.context,r).toTicks(),interval:new dt(this.context,t).toTicks(),time:new Yn(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new en(this,{callback:e,once:!0,time:new Yn(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Vt(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return le(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){gt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new dt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new dt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Vt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Vt(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const i=this.bpm.getValueAtTime(r),o=1/(60/i/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const n=new Ke(t);return this.bpm.connect(n),n.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:n,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),oc(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}vs.mixin(Kn);or(s=>{s.transport=new Kn({context:s})});ar(s=>{s.transport.dispose()});class ct extends ae{constructor(e){super(e),this.input=void 0,this._state=new Ai("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=be,this._syncedStop=be,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new pn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,onstop:be,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=pt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")re(js(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Dn(t,0)),i.duration=n?this.toSeconds(n):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,n)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Ja(this.context),this._start(r,t,n);return this}stop(e){let t=pt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||le(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const r=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=be,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class es extends Pn{constructor(){super(U(es.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=U(es.getDefaults(),arguments,["url","onload"]);Un(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Me({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ce(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Pn.getDefaults(),{url:new Ce,loop:!1,loopEnd:0,loopStart:0,onload:be,onerror:be,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){re(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=Dn(t,this.loopStart):t=Dn(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Er(o,a)&&(o=(o-c)%l+c),_t(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,nc(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),le(n)){let a=this.toSeconds(n);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Tn(s,e){return $e(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,n=new Ci(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class Xs extends Pn{constructor(){super(U(Xs.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=U(Xs.getDefaults(),arguments,["frequency","type"]);Un(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Me({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Me({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(Pn.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class We extends ct{constructor(){super(U(We.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=U(We.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),Ve(this,"frequency"),this.detune=new je({context:this.context,units:"cents",value:e.detune}),Ve(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Xs({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return We._periodicWaveCache.find(t=>t.phase===this._phase&&tf(t.partials,this._partials));{const e=We._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(le(n)){const{partials:r,wave:i}=n;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),We._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),We._periodicWaveCache.length>100&&We._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Kt(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,n){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*n)+t[o]*Math.sin(o*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)n=Math.max(this._inverseFFT(e,t,o/i*r),n);return sf(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}We._periodicWaveCache=[];class lr extends ae{constructor(){super(Object.assign(U(lr.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return xi(this,e,t,n),this}}class ts extends lr{constructor(){super(Object.assign(U(ts.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=U(ts.getDefaults(),arguments,["mapping","length"]);gt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Y1(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(je.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;n[r]=e(o,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));re(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class bf extends lr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ts({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class mn extends je{constructor(){super(Object.assign(U(mn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=U(mn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ke({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ns extends ct{constructor(){super(U(ns.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new bf({context:this.context}),this._modulationNode=new Ke({context:this.context});const e=U(ns.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new We({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new We({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new mn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ve(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(We.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ss extends ct{constructor(){super(U(ss.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ke({context:this.context,gain:0});const e=U(ss.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new We({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new We({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new mn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new mn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ve(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(We.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Vn extends ct{constructor(){super(U(Vn.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ke({context:this.context,gain:0}),this._thresh=new ts({context:this.context,mapping:t=>t<=0?-1:1});const e=U(Vn.getDefaults(),arguments,["frequency","width"]);this.width=new je({context:this.context,units:"audioRange",value:e.width}),this._triangle=new We({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ve(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class rs extends ct{constructor(){super(U(rs.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=U(rs.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(We.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+n*i)}}get count(){return this._oscillators.length}set count(e){if(Kt(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new We({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):be});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class is extends ct{constructor(){super(U(is.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new mn({context:this.context,value:2});const e=U(is.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Vn({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new We({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ve(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Oo={am:ns,fat:rs,fm:ss,oscillator:We,pulse:Vn,pwm:is};class os extends ct{constructor(){super(U(os.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=U(os.getDefaults(),arguments,["frequency","type"]);this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),Ve(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(We.getDefaults(),ss.getDefaults(),ns.getDefaults(),rs.getDefaults(),Vn.getDefaults(),is.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Oo[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Oo[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&dn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&dn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ot(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return $e(this,void 0,void 0,function*(){return Tn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function uc(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Kt(i,s,e),t.set(this,i)}})}}function Ut(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Kt(this.toSeconds(i),s,e),t.set(this,i)}})}}class as extends ct{constructor(){super(U(as.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=U(as.getDefaults(),arguments,["url","onload"]);this._buffer=new Ce({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ct.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:be,onerror:be,playbackRate:1,reverse:!1})}load(e){return $e(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=be){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=Dn(t,this._loopStart):t=Dn(t,0);const r=this.toSeconds(t),i=n;n=Dn(n,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(n);o=o/this._playbackRate,e=this.toSeconds(e);const a=new es({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&pt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){this._stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Kt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Kt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}kt([Ut(0)],as.prototype,"fadeIn",void 0);kt([Ut(0)],as.prototype,"fadeOut",void 0);class $t extends ae{constructor(){super(U($t.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new je({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=U($t.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ae.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Ot(e))return e;{let n;for(n in Ms)if(Ms[n][t]===e)return n;return e}}_setCurve(e,t,n){if(Ot(n)&&Reflect.has(Ms,n)){const r=Ms[n];cn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(gt(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){re(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(re(gt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return xi(this,e,t,n),this}asArray(e=1024){return $e(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new Ci(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:n}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}kt([Ut(0)],$t.prototype,"attack",void 0);kt([Ut(0)],$t.prototype,"decay",void 0);kt([uc(0,1)],$t.prototype,"sustain",void 0);kt([Ut(0)],$t.prototype,"release",void 0);const Ms=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const f=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=f/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const f=Math.pow(t,3)*4+.2,p=Math.cos(f*Math.PI*2*t);l[e]=Math.abs(p*(1-t))}function u(f){const p=new Array(f.length);for(let d=0;d<f.length;d++)p[d]=1-f[d];return p}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:n,Out:h(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class _n extends ae{constructor(){super(U(_n.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=U(_n.getDefaults(),arguments);this._volume=this.output=new pn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume")}static getDefaults(){return Object.assign(ae.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,n.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,n,r){const i=this.toSeconds(n),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class gn extends _n{constructor(){super(U(gn.getDefaults(),arguments));const e=U(gn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(_n.getDefaults(),{detune:0,onsilence:be,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof ft?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,n)}else this.frequency.setValueAtTime(r,n);return this}}kt([Ut(0)],gn.prototype,"portamento",void 0);class Oi extends $t{constructor(){super(U(Oi.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ke({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class cs extends gn{constructor(){super(U(cs.getDefaults(),arguments)),this.name="Synth";const e=U(cs.getDefaults(),arguments);this.oscillator=new os(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Oi(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ve(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(gn.getDefaults(),{envelope:Object.assign(No($t.getDefaults(),Object.keys(ae.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(No(os.getDefaults(),[...Object.keys(ct.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ls extends cs{constructor(){super(U(ls.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=U(ls.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ve(this,["oscillator","envelope"])}static getDefaults(){return On(gn.getDefaults(),cs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof ft?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}kt([uc(0)],ls.prototype,"octaves",void 0);kt([Ut(0)],ls.prototype,"pitchDecay",void 0);const hc=new Set;function Di(s){hc.add(s)}function dc(s,e){const t=`registerProcessor("${s}", ${e})`;hc.add(t)}const Sf=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Di(Sf);const Cf=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Di(Cf);const kf=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Di(kf);const Af="feedback-comb-filter",xf=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;dc(Af,xf);class Fn extends _n{constructor(){super(U(Fn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=U(Fn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(re(xs(n)||dn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),xs(n)){const i=new ft(this.context,n).toMidi();t[i]=e.urls[n]}else dn(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Mi({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(_n.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:be,onerror:be,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=lc(new ft(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=cc(c+a),f=new es({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(t,0,u.duration/h,n),gt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),d=p.indexOf(f);d!==-1&&p.splice(d,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new ft(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){const i=this.toSeconds(n);return this.triggerAttack(e,i,r),gt(t)?(re(gt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(re(xs(e)||isFinite(e),`note must be a pitch or midi: ${e}`),xs(e)){const r=new ft(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}kt([Ut(0)],Fn.prototype,"attack",void 0);kt([Ut(0)],Fn.prototype,"release",void 0);class Zs extends ae{constructor(){super(Object.assign(U(Zs.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=U(Zs.getDefaults(),arguments,["pan"]);this.pan=new Me({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ve(this,"pan")}static getDefaults(){return Object.assign(ae.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Mf="bit-crusher",Nf=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;dc(Mf,Nf);class qe extends ae{constructor(){super(U(qe.getDefaults(),arguments,["solo"])),this.name="Solo";const e=U(qe.getDefaults(),arguments,["solo"]);this.input=this.output=new Ke({context:this.context}),qe._allSolos.has(this.context)||qe._allSolos.set(this.context,new Set),qe._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ae.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),qe._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){qe._soloed.has(this.context)||qe._soloed.set(this.context,new Set),qe._soloed.get(this.context).add(this)}_removeSolo(){qe._soloed.has(this.context)&&qe._soloed.get(this.context).delete(this)}_isSoloed(){return qe._soloed.has(this.context)&&qe._soloed.get(this.context).has(this)}_noSolos(){return!qe._soloed.has(this.context)||qe._soloed.has(this.context)&&qe._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),qe._allSolos.get(this.context).delete(this),this._removeSolo(),this}}qe._allSolos=new Map;qe._soloed=new Map;class Qs extends ae{constructor(){super(U(Qs.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=U(Qs.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Zs({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new pn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(ae.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class on extends ae{constructor(){super(U(on.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=U(on.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new qe({solo:e.solo,context:this.context}),this._panVol=this.output=new Qs({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(ae.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return on.buses.has(e)||on.buses.set(e,new Ke({context:this.context})),on.buses.get(e)}send(e,t=0){const n=this._getBus(e),r=new Ke({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}on.buses=new Map;class Of extends ae{constructor(){super(...arguments),this.name="Listener",this.positionX=new Me({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Me({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Me({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Me({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Me({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Me({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Me({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Me({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Me({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ae.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}or(s=>{s.listener=new Of({context:s})});ar(s=>{s.listener.dispose()});function vr(){return at().now()}const Df=at().transport;at().destination;at().destination;at().listener;at().draw;at();function Ef(s){let e,t='<path fill="currentColor" d="M133 440a35.37 35.37 0 0 1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0 1 35.77.45l247.85 148.36a36 36 0 0 1 0 61l-247.89 148.4A35.5 35.5 0 0 1 133 440Z"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function If(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class Rf extends Oe{constructor(e){super(),De(this,e,If,Ef,Ae,{})}}function Do(s){let e,t;return{c(){e=P("small"),t=Q("Play the reference C' first, to make sure your audio is working"),this.h()},l(n){e=V(n,"SMALL",{class:!0});var r=I(e);t=J(r,"Play the reference C' first, to make sure your audio is working"),r.forEach(C),this.h()},h(){B(e,"class","svelte-gef4wx")},m(n,r){z(n,e,r),A(e,t)},d(n){n&&C(e)}}}function Pf(s){let e,t,n,r,i,o,a,c,l,u,h;a=new Rf({});let f=s[0]&&Do();return{c(){e=P("section"),t=P("div"),n=P("button"),r=Q("C'"),i=ee(),o=P("button"),me(a.$$.fragment),c=ee(),f&&f.c(),this.h()},l(p){e=V(p,"SECTION",{class:!0});var d=I(e);t=V(d,"DIV",{class:!0});var m=I(t);n=V(m,"BUTTON",{class:!0});var g=I(n);r=J(g,"C'"),g.forEach(C),i=te(m),o=V(m,"BUTTON",{class:!0});var v=I(o);_e(a.$$.fragment,v),v.forEach(C),m.forEach(C),c=te(d),f&&f.l(d),d.forEach(C),this.h()},h(){B(n,"class","reference round svelte-gef4wx"),B(o,"class","play round svelte-gef4wx"),o.disabled=s[1],B(t,"class","play-buttons svelte-gef4wx"),B(e,"class","svelte-gef4wx")},m(p,d){z(p,e,d),A(e,t),A(t,n),A(n,r),A(t,i),A(t,o),ge(a,o,null),A(e,c),f&&f.m(e,null),l=!0,u||(h=[nt(n,"click",s[2]),nt(o,"click",s[3])],u=!0)},p(p,[d]){(!l||d&2)&&(o.disabled=p[1]),p[0]?f||(f=Do(),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(p){l||(Z(a.$$.fragment,p),l=!0)},o(p){ne(a.$$.fragment,p),l=!1},d(p){p&&C(e),ve(a),f&&f.d(),u=!1,Ks(h)}}}const Vf=72;function Ff(s,e,t){let n,r;He(s,st,u=>t(5,r=u));let i,o=!1;Zo(()=>(i=new Fn({urls:{A4:"A4.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{console.log("Loaded samples"),Df.bpm.setValueAtTime(Vf,vr())}}).toDestination(),()=>i.dispose()));const a=()=>{if(!i.loaded){window.alert("Audio not loaded yet");return}t(0,l=!1);const u=vr();i.triggerAttackRelease("C4","2n",u)},c=()=>{if(l||o)return;if(!i.loaded){window.alert("Audio not loaded yet");return}st.melodyPlayed();const u=vr(),h=pf("8n").toSeconds();r.melody.forEach((f,p)=>{i.triggerAttackRelease(xt(f,{octave:!0}),"4n",u+h*p)})};let l=!o&&r.state==="playing";return s.$$.update=()=>{if(s.$$.dirty&32){const u=r.guesses[r.guesses.length-1];t(4,o=u&&u.played&&!u.submitted)}s.$$.dirty&49&&t(1,n=r.state==="playing"&&(l||o))},[l,n,a,c,o,r]}class qf extends Oe{constructor(e){super(),De(this,e,Ff,Pf,Ae,{})}}function Eo(s,e,t){const n=s.slice();return n[11]=e[t],n}function Io(s){let e,t=s[11].name+"",n,r,i,o;function a(){return s[9](s[11])}return{c(){e=P("button"),n=Q(t),this.h()},l(c){e=V(c,"BUTTON",{class:!0});var l=I(e);n=J(l,t),l.forEach(C),this.h()},h(){B(e,"class",r=Es(s[11].englishName.toLowerCase().replace("#","sharp"))+" svelte-zjg3pu"),ht(e,"sharp",s[11].englishName.includes("#"))},m(c,l){z(c,e,l),A(e,n),i||(o=nt(e,"click",a),i=!0)},p(c,l){s=c,l&2&&t!==(t=s[11].name+"")&&Wt(n,t),l&2&&r!==(r=Es(s[11].englishName.toLowerCase().replace("#","sharp"))+" svelte-zjg3pu")&&B(e,"class",r),l&2&&ht(e,"sharp",s[11].englishName.includes("#"))},d(c){c&&C(e),i=!1,o()}}}function Wf(s){let e,t,n,r,i,o,a,c,l,u,h,f,p,d,m,g,v;r=new Pc({}),a=new qf({}),u=new qc({});let w=s[1],T=[];for(let b=0;b<w.length;b+=1)T[b]=Io(Eo(s,w,b));return{c(){e=P("div"),t=P("div"),n=P("button"),me(r.$$.fragment),o=ee(),me(a.$$.fragment),c=ee(),l=P("button"),me(u.$$.fragment),p=ee(),d=P("nav");for(let b=0;b<T.length;b+=1)T[b].c();this.h()},l(b){e=V(b,"DIV",{class:!0});var _=I(e);t=V(_,"DIV",{class:!0});var y=I(t);n=V(y,"BUTTON",{class:!0});var k=I(n);_e(r.$$.fragment,k),k.forEach(C),o=te(y),_e(a.$$.fragment,y),c=te(y),l=V(y,"BUTTON",{class:!0});var S=I(l);_e(u.$$.fragment,S),S.forEach(C),y.forEach(C),p=te(_),d=V(_,"NAV",{class:!0});var D=I(d);for(let x=0;x<T.length;x+=1)T[x].l(D);D.forEach(C),_.forEach(C),this.h()},h(){B(n,"class","delete round svelte-zjg3pu"),ht(n,"hidden",!s[3]),B(l,"class","submit round svelte-zjg3pu"),l.disabled=h=!s[2],ht(l,"hidden",!s[2]),B(t,"class","actions svelte-zjg3pu"),B(d,"class","keyboard svelte-zjg3pu"),B(e,"class","container svelte-zjg3pu"),ht(e,"finished",s[0].state!=="playing")},m(b,_){z(b,e,_),A(e,t),A(t,n),ge(r,n,null),A(t,o),ge(a,t,null),A(t,c),A(t,l),ge(u,l,null),A(e,p),A(e,d);for(let y=0;y<T.length;y+=1)T[y].m(d,null);m=!0,g||(v=[nt(n,"click",s[7]),nt(l,"click",s[8])],g=!0)},p(b,[_]){if(_&8&&ht(n,"hidden",!b[3]),(!m||_&4&&h!==(h=!b[2]))&&(l.disabled=h),_&4&&ht(l,"hidden",!b[2]),_&18){w=b[1];let y;for(y=0;y<w.length;y+=1){const k=Eo(b,w,y);T[y]?T[y].p(k,_):(T[y]=Io(k),T[y].c(),T[y].m(d,null))}for(;y<T.length;y+=1)T[y].d(1);T.length=w.length}_&1&&ht(e,"finished",b[0].state!=="playing")},i(b){m||(Z(r.$$.fragment,b),En(()=>{i||(i=Xt(n,an,{duration:100},!0)),i.run(1)}),Z(a.$$.fragment,b),Z(u.$$.fragment,b),En(()=>{f||(f=Xt(l,an,{duration:100},!0)),f.run(1)}),m=!0)},o(b){ne(r.$$.fragment,b),i||(i=Xt(n,an,{duration:100},!1)),i.run(0),ne(a.$$.fragment,b),ne(u.$$.fragment,b),f||(f=Xt(l,an,{duration:100},!1)),f.run(0),m=!1},d(b){b&&C(e),ve(r),b&&i&&i.end(),ve(a),ve(u),b&&f&&f.end(),qn(T,b),g=!1,Ks(v)}}}function Lf(s,e,t){let n,r,i;He(s,st,d=>t(0,n=d)),He(s,Qt,d=>t(5,r=d)),He(s,un,d=>t(6,i=d));const o=Qo();let a;const c=Array.from(Array(12).keys());Zo(()=>{const d={c:0,d:2,e:4,f:5,g:7,a:9,b:11,h:11},m=g=>{if(g.key==="Backspace")o("delete");else if(g.key==="Enter")o("submit");else if(d[g.key]!==void 0)o("add",d[g.key]+12*4);else if(g.key=="ArrowUp")r!=="easy"&&o("sharp");else if(g.key=="ArrowDown")r!=="easy"&&o("sharp");else return;g.preventDefault()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)});let l=!1,u=!1;const h=()=>o("delete"),f=()=>o("submit"),p=d=>o("add",d.semitone);return s.$$.update=()=>{if(s.$$.dirty&96&&t(1,a=c.filter(d=>r==="hard"||![1,3,6,8,10].includes(d)).map(d=>({semitone:12*4+d,name:xt(d,{notation:i.notation}),englishName:xt(d)}))),s.$$.dirty&1){const d=rn(n);t(2,l=d&&!d.submitted&&d.melody.length===5),t(3,u=d&&!d.submitted&&d.melody.length>0)}},[n,a,l,u,o,r,i,h,f,p]}class $f extends Oe{constructor(e){super(),De(this,e,Lf,Wf,Ae,{})}}function Bf(s){let e,t='<path d="M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422s-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256s17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z" fill="currentColor"/><path d="M235 339h42v42h-42z" fill="currentColor"/><path d="M276.8 318h-41.6c0-67 62.4-62.2 62.4-103.8 0-22.9-18.7-41.7-41.6-41.7S214.4 192 214.4 214h-41.6c0-46 37.2-83 83.2-83s83.2 37.1 83.2 83.1c0 52-62.4 57.9-62.4 103.9z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function jf(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class Uf extends Oe{constructor(e){super(),De(this,e,jf,Bf,Ae,{})}}function zf(s){let e,t='<path d="M401.4 354.2c-2.9.1-5.8.2-8.7.2-47.9 0-93-18.9-126.8-53.4-33.9-34.4-52.5-80.1-52.5-128.8 0-27.7 6.1-54.5 17.5-78.7 3.1-6.6 9.3-16.6 13.6-23.4 1.9-2.9-.5-6.7-3.9-6.1-6 .9-15.2 2.9-27.7 6.8C135.1 95.5 80 168.7 80 255c0 106.6 85.1 193 190.1 193 58 0 110-26.4 144.9-68.1 6-7.2 11.5-13.8 16.4-21.8 1.8-3-.7-6.7-4.1-6.1-8.5 1.7-17.1 1.8-25.9 2.2z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function Gf(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class Yf extends Oe{constructor(e){super(),De(this,e,Gf,zf,Ae,{})}}function Hf(s){let e,t='<path d="M256 387c-8.5 0-15.4 6.9-15.4 15.4v46.2c0 8.5 6.9 15.4 15.4 15.4s15.4-6.9 15.4-15.4v-46.2c0-8.5-6.9-15.4-15.4-15.4z" fill="currentColor"/><path d="M256 48c-8.5 0-15.4 6.9-15.4 15.4v46.2c0 8.5 6.9 15.4 15.4 15.4s15.4-6.9 15.4-15.4V63.4c0-8.5-6.9-15.4-15.4-15.4z" fill="currentColor"/><path d="M125 256c0-8.5-6.9-15.4-15.4-15.4H63.4c-8.5 0-15.4 6.9-15.4 15.4s6.9 15.4 15.4 15.4h46.2c8.5 0 15.4-6.9 15.4-15.4z" fill="currentColor"/><path d="M448.6 240.6h-46.2c-8.5 0-15.4 6.9-15.4 15.4s6.9 15.4 15.4 15.4h46.2c8.5 0 15.4-6.9 15.4-15.4s-6.9-15.4-15.4-15.4z" fill="currentColor"/><path d="M152.5 344.1c-4.1 0-8 1.6-10.9 4.5l-32.7 32.7c-2.9 2.9-4.5 6.8-4.5 10.9s1.6 8 4.5 10.9c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5l32.7-32.7c6-6 6-15.8 0-21.8-2.9-2.9-6.8-4.5-10.9-4.5z" fill="currentColor"/><path d="M359.5 167.9c4.1 0 8-1.6 10.9-4.5l32.7-32.7c2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5l-32.7 32.7c-2.9 2.9-4.5 6.8-4.5 10.9s1.6 8 4.5 10.9c2.9 2.9 6.8 4.5 10.9 4.5z" fill="currentColor"/><path d="M130.7 108.9c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5-2.9 2.9-4.5 6.8-4.5 10.9 0 4.1 1.6 8 4.5 10.9l32.7 32.7c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5 2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9l-32.7-32.7z" fill="currentColor"/><path d="M370.4 348.6c-2.9-2.9-6.8-4.5-10.9-4.5-4.1 0-8 1.6-10.9 4.5-6 6-6 15.8 0 21.8l32.7 32.7c2.9 2.9 6.8 4.5 10.9 4.5 4.1 0 8-1.6 10.9-4.5 2.9-2.9 4.5-6.8 4.5-10.9s-1.6-8-4.5-10.9l-32.7-32.7z" fill="currentColor"/><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function Xf(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class Zf extends Oe{constructor(e){super(),De(this,e,Xf,Hf,Ae,{})}}function Qf(s){let e,t='<path d="M328.2 64H183.8C170.7 64 160 74.7 160 87.9v336.3c0 13.1 10.7 23.8 23.8 23.8h144.3c13.1 0 23.8-10.7 23.8-23.8V87.9C352 74.7 341.3 64 328.2 64zM240 99.9c0-2.1 1.7-3.9 3.9-3.9h24.3c2.1 0 3.9 1.7 3.9 3.9v.3c0 2.1-1.7 3.9-3.9 3.9h-24.3c-2.1 0-3.9-1.7-3.9-3.9v-.3zM228 96c2.2 0 4 1.8 4 4s-1.8 4-4 4-4-1.8-4-4 1.8-4 4-4zm28 336.1c-8.9 0-16.1-7.2-16.1-16.1 0-8.9 7.2-16.1 16.1-16.1 8.9 0 16.1 7.2 16.1 16.1 0 8.9-7.3 16.1-16.1 16.1zm80-48.1H176V128h160v256z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function Jf(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class Kf extends Oe{constructor(e){super(),De(this,e,Jf,Qf,Ae,{})}}function ep(s){let e,t='<path d="M176 96h64v320h-64z" fill="currentColor"/><path d="M80 320h64v96H80z" fill="currentColor"/><path d="M272 256h64v160h-64z" fill="currentColor"/><path d="M368 192h64v224h-64z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function tp(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class np extends Oe{constructor(e){super(),De(this,e,tp,ep,Ae,{})}}function sp(s){let e,t='<path d="M413.967 276.8c1.06-6.235 1.06-13.518 1.06-20.8s-1.06-13.518-1.06-20.8l44.667-34.318c4.26-3.118 5.319-8.317 2.13-13.518L418.215 115.6c-2.129-4.164-8.507-6.235-12.767-4.164l-53.186 20.801c-10.638-8.318-23.394-15.601-36.16-20.801l-7.448-55.117c-1.06-4.154-5.319-8.318-10.638-8.318h-85.098c-5.318 0-9.577 4.164-10.637 8.318l-8.508 55.117c-12.767 5.2-24.464 12.482-36.171 20.801l-53.186-20.801c-5.319-2.071-10.638 0-12.767 4.164L49.1 187.365c-2.119 4.153-1.061 10.399 2.129 13.518L96.97 235.2c0 7.282-1.06 13.518-1.06 20.8s1.06 13.518 1.06 20.8l-44.668 34.318c-4.26 3.118-5.318 8.317-2.13 13.518L92.721 396.4c2.13 4.164 8.508 6.235 12.767 4.164l53.187-20.801c10.637 8.318 23.394 15.601 36.16 20.801l8.508 55.117c1.069 5.2 5.318 8.318 10.637 8.318h85.098c5.319 0 9.578-4.164 10.638-8.318l8.518-55.117c12.757-5.2 24.464-12.482 36.16-20.801l53.187 20.801c5.318 2.071 10.637 0 12.767-4.164l42.549-71.765c2.129-4.153 1.06-10.399-2.13-13.518l-46.8-34.317zm-158.499 52c-41.489 0-74.46-32.235-74.46-72.8s32.971-72.8 74.46-72.8 74.461 32.235 74.461 72.8-32.972 72.8-74.461 72.8z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function rp(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class ip extends Oe{constructor(e){super(),De(this,e,rp,sp,Ae,{})}}function op(s){let e,t,n,r,i,o,a,c,l,u,h,f,p,d,m,g,v,w,T,b,_,y,k,S,D,x,O,M,F,q,Y,R,W,G,L,N,E,H,ie,de,se,oe,fe,X,Fe,ze,ot,Ye,mt,zt,j,K,Ee,pe,ce,we,Te,lt,ut,sn,zn,Gt,ur,hr,bn,dr,fr,Sn,pr,mr,ws;return g=new Ns({props:{semitone:2,status:"correct"}}),k=new Ns({props:{semitone:6,status:"incorrect"}}),q=new Ns({props:{semitone:11,status:"adjacent"}}),{c(){e=P("p"),t=Q("Guess the melody in 6 tries."),n=ee(),r=P("p"),i=Q("Before each guess, you can play the melody "),o=P("strong"),a=Q("once"),c=Q(`. Listen to
  the reference C' tone first to make sure your audio is working.`),l=ee(),u=P("p"),h=Q(`After a guess, it is revealed which notes are correct. When the game is over,
  you'll also see which notes you missed by just one key.`),f=ee(),p=P("div"),d=P("div"),m=P("div"),me(g.$$.fragment),v=ee(),w=P("div"),T=Q("The note is correct"),b=ee(),_=P("div"),y=P("div"),me(k.$$.fragment),S=ee(),D=P("div"),x=Q("The note is incorrect"),O=ee(),M=P("div"),F=P("div"),me(q.$$.fragment),Y=ee(),R=P("div"),W=P("strong"),G=Q("Only revealed at the end of a game!"),L=Q(`
      Shows that you guessed the key right next to it.`),N=ee(),E=P("p"),H=Q("A new Melodle is available each day."),ie=ee(),de=P("h2"),se=Q("Mobile users"),oe=ee(),fe=P("p"),X=Q(`Make sure your phone is not on silent mode, otherwise you won't be able to
  hear anything.`),Fe=ee(),ze=P("h2"),ot=Q("Desktop users"),Ye=ee(),mt=P("p"),zt=Q(`You can use the keyboard with the corresponding keys. To get a sharp note, you
  can use the up / down arrow keys.`),j=ee(),K=P("h2"),Ee=Q("Notation"),pe=Q(`

I try to detect the notation style based on your language preferences. You can
change it anytime in the settings. There's also a solf\xE8ge syllables notation.

`),ce=P("hr"),we=ee(),Te=P("p"),lt=Q("Built by "),ut=P("a"),sn=Q("Matias Meno"),zn=Q(`. This is a variant
  of the wildly successful game
  `),Gt=P("a"),ur=Q("Wordle"),hr=Q(` originally developed
  by Josh Wardle. Built with `),bn=P("a"),dr=Q("SvelteKit"),fr=Q(`. I
  use analytics by `),Sn=P("a"),pr=Q("GoatCounter"),mr=Q(` and there
  is no Cookie consent box, because I don't track you.`),this.h()},l($){e=V($,"P",{});var Se=I(e);t=J(Se,"Guess the melody in 6 tries."),Se.forEach(C),n=te($),r=V($,"P",{});var Ts=I(r);i=J(Ts,"Before each guess, you can play the melody "),o=V(Ts,"STRONG",{});var Ri=I(o);a=J(Ri,"once"),Ri.forEach(C),c=J(Ts,`. Listen to
  the reference C' tone first to make sure your audio is working.`),Ts.forEach(C),l=te($),u=V($,"P",{});var Pi=I(u);h=J(Pi,`After a guess, it is revealed which notes are correct. When the game is over,
  you'll also see which notes you missed by just one key.`),Pi.forEach(C),f=te($),p=V($,"DIV",{class:!0});var Cn=I(p);d=V(Cn,"DIV",{class:!0});var bs=I(d);m=V(bs,"DIV",{class:!0});var Vi=I(m);_e(g.$$.fragment,Vi),Vi.forEach(C),v=te(bs),w=V(bs,"DIV",{class:!0});var Fi=I(w);T=J(Fi,"The note is correct"),Fi.forEach(C),bs.forEach(C),b=te(Cn),_=V(Cn,"DIV",{class:!0});var Ss=I(_);y=V(Ss,"DIV",{class:!0});var qi=I(y);_e(k.$$.fragment,qi),qi.forEach(C),S=te(Ss),D=V(Ss,"DIV",{class:!0});var Wi=I(D);x=J(Wi,"The note is incorrect"),Wi.forEach(C),Ss.forEach(C),O=te(Cn),M=V(Cn,"DIV",{class:!0});var Cs=I(M);F=V(Cs,"DIV",{class:!0});var Li=I(F);_e(q.$$.fragment,Li),Li.forEach(C),Y=te(Cs),R=V(Cs,"DIV",{class:!0});var _r=I(R);W=V(_r,"STRONG",{});var $i=I(W);G=J($i,"Only revealed at the end of a game!"),$i.forEach(C),L=J(_r,`
      Shows that you guessed the key right next to it.`),_r.forEach(C),Cs.forEach(C),Cn.forEach(C),N=te($),E=V($,"P",{});var Bi=I(E);H=J(Bi,"A new Melodle is available each day."),Bi.forEach(C),ie=te($),de=V($,"H2",{});var ji=I(de);se=J(ji,"Mobile users"),ji.forEach(C),oe=te($),fe=V($,"P",{});var Ui=I(fe);X=J(Ui,`Make sure your phone is not on silent mode, otherwise you won't be able to
  hear anything.`),Ui.forEach(C),Fe=te($),ze=V($,"H2",{});var zi=I(ze);ot=J(zi,"Desktop users"),zi.forEach(C),Ye=te($),mt=V($,"P",{});var Gi=I(mt);zt=J(Gi,`You can use the keyboard with the corresponding keys. To get a sharp note, you
  can use the up / down arrow keys.`),Gi.forEach(C),j=te($),K=V($,"H2",{});var Yi=I(K);Ee=J(Yi,"Notation"),Yi.forEach(C),pe=J($,`

I try to detect the notation style based on your language preferences. You can
change it anytime in the settings. There's also a solf\xE8ge syllables notation.

`),ce=V($,"HR",{}),we=te($),Te=V($,"P",{});var At=I(Te);lt=J(At,"Built by "),ut=V(At,"A",{href:!0});var Hi=I(ut);sn=J(Hi,"Matias Meno"),Hi.forEach(C),zn=J(At,`. This is a variant
  of the wildly successful game
  `),Gt=V(At,"A",{href:!0});var Xi=I(Gt);ur=J(Xi,"Wordle"),Xi.forEach(C),hr=J(At,` originally developed
  by Josh Wardle. Built with `),bn=V(At,"A",{href:!0});var Zi=I(bn);dr=J(Zi,"SvelteKit"),Zi.forEach(C),fr=J(At,`. I
  use analytics by `),Sn=V(At,"A",{href:!0});var Qi=I(Sn);pr=J(Qi,"GoatCounter"),Qi.forEach(C),mr=J(At,` and there
  is no Cookie consent box, because I don't track you.`),At.forEach(C),this.h()},h(){B(m,"class","example-tile svelte-ie7q09"),B(w,"class","description"),B(d,"class","example svelte-ie7q09"),B(y,"class","example-tile svelte-ie7q09"),B(D,"class","description"),B(_,"class","example svelte-ie7q09"),B(F,"class","example-tile svelte-ie7q09"),B(R,"class","description"),B(M,"class","example svelte-ie7q09"),B(p,"class","examples"),B(ut,"href","https://www.yesmeno.com"),B(Gt,"href","https://www.nytimes.com/games/wordle"),B(bn,"href","https://kit.svelte.dev"),B(Sn,"href","https://www.goatcounter.com")},m($,Se){z($,e,Se),A(e,t),z($,n,Se),z($,r,Se),A(r,i),A(r,o),A(o,a),A(r,c),z($,l,Se),z($,u,Se),A(u,h),z($,f,Se),z($,p,Se),A(p,d),A(d,m),ge(g,m,null),A(d,v),A(d,w),A(w,T),A(p,b),A(p,_),A(_,y),ge(k,y,null),A(_,S),A(_,D),A(D,x),A(p,O),A(p,M),A(M,F),ge(q,F,null),A(M,Y),A(M,R),A(R,W),A(W,G),A(R,L),z($,N,Se),z($,E,Se),A(E,H),z($,ie,Se),z($,de,Se),A(de,se),z($,oe,Se),z($,fe,Se),A(fe,X),z($,Fe,Se),z($,ze,Se),A(ze,ot),z($,Ye,Se),z($,mt,Se),A(mt,zt),z($,j,Se),z($,K,Se),A(K,Ee),z($,pe,Se),z($,ce,Se),z($,we,Se),z($,Te,Se),A(Te,lt),A(Te,ut),A(ut,sn),A(Te,zn),A(Te,Gt),A(Gt,ur),A(Te,hr),A(Te,bn),A(bn,dr),A(Te,fr),A(Te,Sn),A(Sn,pr),A(Te,mr),ws=!0},p:ue,i($){ws||(Z(g.$$.fragment,$),Z(k.$$.fragment,$),Z(q.$$.fragment,$),ws=!0)},o($){ne(g.$$.fragment,$),ne(k.$$.fragment,$),ne(q.$$.fragment,$),ws=!1},d($){$&&C(e),$&&C(n),$&&C(r),$&&C(l),$&&C(u),$&&C(f),$&&C(p),ve(g),ve(k),ve(q),$&&C(N),$&&C(E),$&&C(ie),$&&C(de),$&&C(oe),$&&C(fe),$&&C(Fe),$&&C(ze),$&&C(Ye),$&&C(mt),$&&C(j),$&&C(K),$&&C(pe),$&&C(ce),$&&C(we),$&&C(Te)}}}class ap extends Oe{constructor(e){super(),De(this,e,null,op,Ae,{})}}function cp(s){let e,t='<path fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32" d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192Z"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 320L192 192m0 128l128-128"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function lp(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class up extends Oe{constructor(e){super(),De(this,e,lp,cp,Ae,{})}}const hp=s=>({}),Ro=s=>({});function dp(s){let e,t,n,r,i,o,a,c,l,u,h,f,p,d,m,g;const v=s[2].title,w=Ji(v,s,s[1],Ro);l=new up({});const T=s[2].default,b=Ji(T,s,s[1],null);return{c(){e=P("section"),t=P("div"),n=ee(),r=P("div"),i=P("header"),o=P("h1"),w&&w.c(),a=ee(),c=P("button"),me(l.$$.fragment),u=ee(),h=P("div"),b&&b.c(),this.h()},l(_){e=V(_,"SECTION",{class:!0});var y=I(e);t=V(y,"DIV",{class:!0}),I(t).forEach(C),n=te(y),r=V(y,"DIV",{class:!0});var k=I(r);i=V(k,"HEADER",{class:!0});var S=I(i);o=V(S,"H1",{class:!0});var D=I(o);w&&w.l(D),D.forEach(C),a=te(S),c=V(S,"BUTTON",{class:!0});var x=I(c);_e(l.$$.fragment,x),x.forEach(C),S.forEach(C),u=te(k),h=V(k,"DIV",{class:!0});var O=I(h);b&&b.l(O),O.forEach(C),k.forEach(C),y.forEach(C),this.h()},h(){B(t,"class","backdrop svelte-1wu7fxk"),B(o,"class","svelte-1wu7fxk"),B(c,"class","close svelte-1wu7fxk"),B(i,"class","svelte-1wu7fxk"),B(h,"class","body svelte-1wu7fxk"),B(r,"class","content svelte-1wu7fxk"),B(e,"class","svelte-1wu7fxk")},m(_,y){z(_,e,y),A(e,t),A(e,n),A(e,r),A(r,i),A(i,o),w&&w.m(o,null),A(i,a),A(i,c),ge(l,c,null),A(r,u),A(r,h),b&&b.m(h,null),d=!0,m||(g=[nt(t,"click",s[3]),nt(c,"click",s[4])],m=!0)},p(_,[y]){w&&w.p&&(!d||y&2)&&Ki(w,v,_,_[1],d?to(v,_[1],y,hp):eo(_[1]),Ro),b&&b.p&&(!d||y&2)&&Ki(b,T,_,_[1],d?to(T,_[1],y,null):eo(_[1]),null)},i(_){d||(Z(w,_),Z(l.$$.fragment,_),Z(b,_),En(()=>{f||(f=Xt(r,so,{start:.9},!0)),f.run(1)}),En(()=>{p||(p=Xt(e,an,{duration:100},!0)),p.run(1)}),d=!0)},o(_){ne(w,_),ne(l.$$.fragment,_),ne(b,_),f||(f=Xt(r,so,{start:.9},!1)),f.run(0),p||(p=Xt(e,an,{duration:100},!1)),p.run(0),d=!1},d(_){_&&C(e),w&&w.d(_),ve(l),b&&b.d(_),_&&f&&f.end(),_&&p&&p.end(),m=!1,Ks(g)}}}function fp(s,e,t){let{$$slots:n={},$$scope:r}=e;const i=Qo(),o=()=>i("close"),a=()=>i("close");return s.$$set=c=>{"$$scope"in c&&t(1,r=c.$$scope)},[i,r,n,o,a]}class Ei extends Oe{constructor(e){super(),De(this,e,fp,dp,Ae,{})}}function pp(s){let e,t='<path fill="currentColor" d="M384 336a63.78 63.78 0 0 0-46.12 19.7l-148-83.27a63.85 63.85 0 0 0 0-32.86l148-83.27a63.8 63.8 0 1 0-15.73-27.87l-148 83.27a64 64 0 1 0 0 88.6l148 83.27A64 64 0 1 0 384 336Z"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=he(r,n[i]);return{c(){e=wt("svg"),this.h()},l(i){e=Tt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(C),this.h()},h(){Re(e,r)},m(i,o){z(i,e,o),e.innerHTML=t},p(i,[o]){Re(e,r=bt(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:ue,o:ue,d(i){i&&C(e)}}}function mp(s,e,t){return s.$$set=n=>{t(0,e=he(he({},e),Pe(n)))},e=Pe(e),[e]}class _p extends Oe{constructor(e){super(),De(this,e,mp,pp,Ae,{})}}var Pr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){var n=new Date,r=n.getFullYear(),i=n.getMonth(),o=n.getDate(),a=new Date(0);return a.setFullYear(r,i,o+1),a.setHours(0,0,0,0),a}s.exports=e.default})(Pr,Pr.exports);var gp=ri(Pr.exports),Vr={exports:{}},Fr={exports:{}},Js={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){(0,n.default)(2,arguments);var c=(0,t.default)(o),l=(0,t.default)(a),u=c.getTime()-l.getTime();return u<0?-1:u>0?1:u}s.exports=e.default})(Js,Js.exports);var qr={exports:{}},Wr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){(0,n.default)(2,arguments);var c=(0,t.default)(o),l=(0,t.default)(a),u=c.getFullYear()-l.getFullYear(),h=c.getMonth()-l.getMonth();return u*12+h}s.exports=e.default})(Wr,Wr.exports);var Lr={exports:{}},$r={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,n.default)(1,arguments);var a=(0,t.default)(o);return a.setHours(23,59,59,999),a}s.exports=e.default})($r,$r.exports);var Br={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,n.default)(1,arguments);var a=(0,t.default)(o),c=a.getMonth();return a.setFullYear(a.getFullYear(),c+1,0),a.setHours(23,59,59,999),a}s.exports=e.default})(Br,Br.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=o(vt.exports),n=o($r.exports),r=o(Br.exports),i=o(Je.exports);function o(c){return c&&c.__esModule?c:{default:c}}function a(c){(0,i.default)(1,arguments);var l=(0,t.default)(c);return(0,n.default)(l).getTime()===(0,r.default)(l).getTime()}s.exports=e.default})(Lr,Lr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=a(vt.exports),n=a(Wr.exports),r=a(Js.exports),i=a(Je.exports),o=a(Lr.exports);function a(l){return l&&l.__esModule?l:{default:l}}function c(l,u){(0,i.default)(2,arguments);var h=(0,t.default)(l),f=(0,t.default)(u),p=(0,r.default)(h,f),d=Math.abs((0,n.default)(h,f)),m;if(d<1)m=0;else{h.getMonth()===1&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-p*d);var g=(0,r.default)(h,f)===-p;(0,o.default)((0,t.default)(l))&&d===1&&(0,r.default)(l,f)===1&&(g=!1),m=p*(d-Number(g))}return m===0?0:m}s.exports=e.default})(qr,qr.exports);var jr={exports:{}},Ur={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){return(0,n.default)(2,arguments),(0,t.default)(o).getTime()-(0,t.default)(a).getTime()}s.exports=e.default})(Ur,Ur.exports);var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.getRoundingMethod=yp;var Po={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(s){return s<0?Math.ceil(s):Math.floor(s)}},vp="trunc";function yp(s){return s?Po[s]:Po[vp]}(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(Ur.exports),n=i(Je.exports),r=Ii;function i(a){return a&&a.__esModule?a:{default:a}}function o(a,c,l){(0,n.default)(2,arguments);var u=(0,t.default)(a,c)/1e3;return(0,r.getRoundingMethod)(l?.roundingMethod)(u)}s.exports=e.default})(jr,jr.exports);var zr={exports:{}},Gr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=function(i,o,a){var c,l=t[i];return typeof l=="string"?c=l:o===1?c=l.one:c=l.other.replace("{{count}}",o.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+c:c+" ago":c},r=n;e.default=r,s.exports=e.default})(Gr,Gr.exports);var Yr={exports:{}},Hr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.width?String(r.width):n.defaultWidth,o=n.formats[i]||n.formats[n.defaultWidth];return o}}s.exports=e.default})(Hr,Hr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Hr.exports);function n(l){return l&&l.__esModule?l:{default:l}}var r={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},i={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},a={date:(0,t.default)({formats:r,defaultWidth:"full"}),time:(0,t.default)({formats:i,defaultWidth:"full"}),dateTime:(0,t.default)({formats:o,defaultWidth:"full"})},c=a;e.default=c,s.exports=e.default})(Yr,Yr.exports);var Xr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=function(i,o,a,c){return t[i]},r=n;e.default=r,s.exports=e.default})(Xr,Xr.exports);var Zr={exports:{}},Qr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(r,i){var o=i||{},a=o.context?String(o.context):"standalone",c;if(a==="formatting"&&n.formattingValues){var l=n.defaultFormattingWidth||n.defaultWidth,u=o.width?String(o.width):l;c=n.formattingValues[u]||n.formattingValues[l]}else{var h=n.defaultWidth,f=o.width?String(o.width):n.defaultWidth;c=n.values[f]||n.values[h]}var p=n.argumentCallback?n.argumentCallback(r):r;return c[p]}}s.exports=e.default})(Qr,Qr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Qr.exports);function n(p){return p&&p.__esModule?p:{default:p}}var r={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},i={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},a={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},u=function(p,d){var m=Number(p),g=m%100;if(g>20||g<10)switch(g%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"},h={ordinalNumber:u,era:(0,t.default)({values:r,defaultWidth:"wide"}),quarter:(0,t.default)({values:i,defaultWidth:"wide",argumentCallback:function(p){return p-1}}),month:(0,t.default)({values:o,defaultWidth:"wide"}),day:(0,t.default)({values:a,defaultWidth:"wide"}),dayPeriod:(0,t.default)({values:c,defaultWidth:"wide",formattingValues:l,defaultFormattingWidth:"wide"})},f=h;e.default=f,s.exports=e.default})(Zr,Zr.exports);var Jr={exports:{}},Kr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(i){return function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.width,l=c&&i.matchPatterns[c]||i.matchPatterns[i.defaultMatchWidth],u=o.match(l);if(!u)return null;var h=u[0],f=c&&i.parsePatterns[c]||i.parsePatterns[i.defaultParseWidth],p=Array.isArray(f)?r(f,function(g){return g.test(h)}):n(f,function(g){return g.test(h)}),d;d=i.valueCallback?i.valueCallback(p):p,d=a.valueCallback?a.valueCallback(d):d;var m=o.slice(h.length);return{value:d,rest:m}}}function n(i,o){for(var a in i)if(i.hasOwnProperty(a)&&o(i[a]))return a}function r(i,o){for(var a=0;a<i.length;a++)if(o(i[a]))return a}s.exports=e.default})(Kr,Kr.exports);var ei={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(n.matchPattern);if(!o)return null;var a=o[0],c=r.match(n.parsePattern);if(!c)return null;var l=n.valueCallback?n.valueCallback(c[0]):c[0];l=i.valueCallback?i.valueCallback(l):l;var u=r.slice(a.length);return{value:l,rest:u}}}s.exports=e.default})(ei,ei.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(Kr.exports),n=r(ei.exports);function r(T){return T&&T.__esModule?T:{default:T}}var i=/^(\d+)(th|st|nd|rd)?/i,o=/\d+/i,a={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c={any:[/^b/i,/^(a|c)/i]},l={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},u={any:[/1/i,/2/i,/3/i,/4/i]},h={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},f={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},d={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},g={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v={ordinalNumber:(0,n.default)({matchPattern:i,parsePattern:o,valueCallback:function(T){return parseInt(T,10)}}),era:(0,t.default)({matchPatterns:a,defaultMatchWidth:"wide",parsePatterns:c,defaultParseWidth:"any"}),quarter:(0,t.default)({matchPatterns:l,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any",valueCallback:function(T){return T+1}}),month:(0,t.default)({matchPatterns:h,defaultMatchWidth:"wide",parsePatterns:f,defaultParseWidth:"any"}),day:(0,t.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any"}),dayPeriod:(0,t.default)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:g,defaultParseWidth:"any"})},w=v;e.default=w,s.exports=e.default})(Jr,Jr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Gr.exports),n=a(Yr.exports),r=a(Xr.exports),i=a(Zr.exports),o=a(Jr.exports);function a(u){return u&&u.__esModule?u:{default:u}}var c={code:"en-US",formatDistance:t.default,formatLong:n.default,formatRelative:r.default,localize:i.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},l=c;e.default=l,s.exports=e.default})(zr,zr.exports);var ti={exports:{}},ni={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");r=r||{};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}s.exports=e.default})(ni,ni.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=n(ni.exports);function n(i){return i&&i.__esModule?i:{default:i}}function r(i){return(0,t.default)({},i)}s.exports=e.default})(ti,ti.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=u(Js.exports),n=u(qr.exports),r=u(jr.exports),i=u(zr.exports),o=u(vt.exports),a=u(ti.exports),c=u(Is.exports),l=u(Je.exports);function u(g){return g&&g.__esModule?g:{default:g}}var h=1440,f=2520,p=43200,d=86400;function m(g,v){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,l.default)(2,arguments);var T=w.locale||i.default;if(!T.formatDistance)throw new RangeError("locale must contain formatDistance property");var b=(0,t.default)(g,v);if(isNaN(b))throw new RangeError("Invalid time value");var _=(0,a.default)(w);_.addSuffix=Boolean(w.addSuffix),_.comparison=b;var y,k;b>0?(y=(0,o.default)(v),k=(0,o.default)(g)):(y=(0,o.default)(g),k=(0,o.default)(v));var S=(0,r.default)(k,y),D=((0,c.default)(k)-(0,c.default)(y))/1e3,x=Math.round((S-D)/60),O;if(x<2)return w.includeSeconds?S<5?T.formatDistance("lessThanXSeconds",5,_):S<10?T.formatDistance("lessThanXSeconds",10,_):S<20?T.formatDistance("lessThanXSeconds",20,_):S<40?T.formatDistance("halfAMinute",null,_):S<60?T.formatDistance("lessThanXMinutes",1,_):T.formatDistance("xMinutes",1,_):x===0?T.formatDistance("lessThanXMinutes",1,_):T.formatDistance("xMinutes",x,_);if(x<45)return T.formatDistance("xMinutes",x,_);if(x<90)return T.formatDistance("aboutXHours",1,_);if(x<h){var M=Math.round(x/60);return T.formatDistance("aboutXHours",M,_)}else{if(x<f)return T.formatDistance("xDays",1,_);if(x<p){var F=Math.round(x/h);return T.formatDistance("xDays",F,_)}else if(x<d)return O=Math.round(x/p),T.formatDistance("aboutXMonths",O,_)}if(O=(0,n.default)(k,y),O<12){var q=Math.round(x/p);return T.formatDistance("xMonths",q,_)}else{var Y=O%12,R=Math.floor(O/12);return Y<3?T.formatDistance("aboutXYears",R,_):Y<9?T.formatDistance("overXYears",R,_):T.formatDistance("almostXYears",R+1,_)}}s.exports=e.default})(Fr,Fr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(Fr.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){return(0,n.default)(1,arguments),(0,t.default)(o,Date.now(),a)}s.exports=e.default})(Vr,Vr.exports);var wp=ri(Vr.exports);function Vo(s){let e,t;return{c(){e=P("span"),t=Q("Copied!")},l(n){e=V(n,"SPAN",{});var r=I(e);t=J(r,"Copied!"),r.forEach(C)},m(n,r){z(n,e,r),A(e,t)},d(n){n&&C(e)}}}function Tp(s){let e,t,n,r,i,o,a,c,l,u,h,f,p,d,m=s[0]&&Vo();return h=new _p({}),{c(){e=P("div"),t=P("span"),n=Q("You get a new melody tomorrow, in "),r=P("strong"),i=Q(s[2]),o=Q("."),a=ee(),m&&m.c(),c=ee(),l=P("button"),u=Q("Share "),me(h.$$.fragment),this.h()},l(g){e=V(g,"DIV",{class:!0});var v=I(e);t=V(v,"SPAN",{});var w=I(t);n=J(w,"You get a new melody tomorrow, in "),r=V(w,"STRONG",{});var T=I(r);i=J(T,s[2]),T.forEach(C),o=J(w,"."),w.forEach(C),a=te(v),m&&m.l(v),c=te(v),l=V(v,"BUTTON",{class:!0});var b=I(l);u=J(b,"Share "),_e(h.$$.fragment,b),b.forEach(C),v.forEach(C),this.h()},h(){B(l,"class","svelte-k43eck"),B(e,"class","share svelte-k43eck")},m(g,v){z(g,e,v),A(e,t),A(t,n),A(t,r),A(r,i),A(t,o),A(e,a),m&&m.m(e,null),A(e,c),A(e,l),A(l,u),ge(h,l,null),f=!0,p||(d=nt(l,"click",s[1]),p=!0)},p(g,[v]){g[0]?m||(m=Vo(),m.c(),m.m(e,c)):m&&(m.d(1),m=null)},i(g){f||(Z(h.$$.fragment,g),f=!0)},o(g){ne(h.$$.fragment,g),f=!1},d(g){g&&C(e),m&&m.d(),ve(h),p=!1,d()}}}function bp(s,e,t){let n;He(s,st,a=>t(3,n=a));let r=!1;const i=()=>{let a="";n.guesses.forEach(l=>{a+=Ko(n.melody,l.melody,{difficulty:n.difficulty,submitted:!0}).map(u=>{switch(u.status){case"correct":return"\u{1F7E9}";case"incorrect":return"\u2B1C";case"wrong-position":return"\u{1F7E8}";case"adjacent":return"\u{1F7EA}";default:return"??"}}).join(""),n.guesses.length===1&&(a+="\u{1F389}"),a+=`
`});const c=`#Melodle ${n.difficulty} ${n.index+1} \u{1F3B6}
${a}https://melodle.yesmeno.com`;Hn(`share-${n.difficulty}`),n.state!=="playing"&&Hn(`share-${n.state}`),typeof navigator.share<"u"&&navigator.canShare({text:c})?navigator.share({text:c}):(navigator.clipboard.writeText(c),t(0,r=!0))};let o=wp(gp());return[r,i,o]}class Sp extends Oe{constructor(e){super(),De(this,e,bp,Tp,Ae,{})}}function Fo(s){let e,t,n,r;return n=new Sp({}),{c(){e=P("hr"),t=ee(),me(n.$$.fragment)},l(i){e=V(i,"HR",{}),t=te(i),_e(n.$$.fragment,i)},m(i,o){z(i,e,o),z(i,t,o),ge(n,i,o),r=!0},i(i){r||(Z(n.$$.fragment,i),r=!0)},o(i){ne(n.$$.fragment,i),r=!1},d(i){i&&C(e),i&&C(t),ve(n,i)}}}function Cp(s){let e,t,n,r=s[0].playedGames+"",i,o,a,c,l,u,h,f=Math.round(s[0].winPercentage*100)+"",p,d,m,g,v,w,T,b=s[0].currentStreak+"",_,y,k,S,D,x,O,M=s[0].maxStreak+"",F,q,Y,R,W,G,L,N=s[1].state!=="playing"&&Fo();return{c(){e=P("div"),t=P("div"),n=P("div"),i=Q(r),o=ee(),a=P("div"),c=Q("Played"),l=ee(),u=P("div"),h=P("div"),p=Q(f),d=ee(),m=P("div"),g=Q("Win %"),v=ee(),w=P("div"),T=P("div"),_=Q(b),y=ee(),k=P("div"),S=Q("Current Streak"),D=ee(),x=P("div"),O=P("div"),F=Q(M),q=ee(),Y=P("div"),R=Q("Max Streak"),W=ee(),N&&N.c(),G=Mt(),this.h()},l(E){e=V(E,"DIV",{class:!0});var H=I(e);t=V(H,"DIV",{class:!0});var ie=I(t);n=V(ie,"DIV",{class:!0});var de=I(n);i=J(de,r),de.forEach(C),o=te(ie),a=V(ie,"DIV",{class:!0});var se=I(a);c=J(se,"Played"),se.forEach(C),ie.forEach(C),l=te(H),u=V(H,"DIV",{class:!0});var oe=I(u);h=V(oe,"DIV",{class:!0});var fe=I(h);p=J(fe,f),fe.forEach(C),d=te(oe),m=V(oe,"DIV",{class:!0});var X=I(m);g=J(X,"Win %"),X.forEach(C),oe.forEach(C),v=te(H),w=V(H,"DIV",{class:!0});var Fe=I(w);T=V(Fe,"DIV",{class:!0});var ze=I(T);_=J(ze,b),ze.forEach(C),y=te(Fe),k=V(Fe,"DIV",{class:!0});var ot=I(k);S=J(ot,"Current Streak"),ot.forEach(C),Fe.forEach(C),D=te(H),x=V(H,"DIV",{class:!0});var Ye=I(x);O=V(Ye,"DIV",{class:!0});var mt=I(O);F=J(mt,M),mt.forEach(C),q=te(Ye),Y=V(Ye,"DIV",{class:!0});var zt=I(Y);R=J(zt,"Max Streak"),zt.forEach(C),Ye.forEach(C),H.forEach(C),W=te(E),N&&N.l(E),G=Mt(),this.h()},h(){B(n,"class","number svelte-1c74lvr"),B(a,"class","name"),B(t,"class","stat svelte-1c74lvr"),B(h,"class","number svelte-1c74lvr"),B(m,"class","name"),B(u,"class","stat svelte-1c74lvr"),B(T,"class","number svelte-1c74lvr"),B(k,"class","name"),B(w,"class","stat svelte-1c74lvr"),B(O,"class","number svelte-1c74lvr"),B(Y,"class","name"),B(x,"class","stat svelte-1c74lvr"),B(e,"class","stats svelte-1c74lvr")},m(E,H){z(E,e,H),A(e,t),A(t,n),A(n,i),A(t,o),A(t,a),A(a,c),A(e,l),A(e,u),A(u,h),A(h,p),A(u,d),A(u,m),A(m,g),A(e,v),A(e,w),A(w,T),A(T,_),A(w,y),A(w,k),A(k,S),A(e,D),A(e,x),A(x,O),A(O,F),A(x,q),A(x,Y),A(Y,R),z(E,W,H),N&&N.m(E,H),z(E,G,H),L=!0},p(E,[H]){(!L||H&1)&&r!==(r=E[0].playedGames+"")&&Wt(i,r),(!L||H&1)&&f!==(f=Math.round(E[0].winPercentage*100)+"")&&Wt(p,f),(!L||H&1)&&b!==(b=E[0].currentStreak+"")&&Wt(_,b),(!L||H&1)&&M!==(M=E[0].maxStreak+"")&&Wt(F,M),E[1].state!=="playing"?N?H&2&&Z(N,1):(N=Fo(),N.c(),Z(N,1),N.m(G.parentNode,G)):N&&(Ft(),ne(N,1,1,()=>{N=null}),qt())},i(E){L||(Z(N),L=!0)},o(E){ne(N),L=!1},d(E){E&&C(e),E&&C(W),N&&N.d(E),E&&C(G)}}}function kp(s,e,t){let n,r;return He(s,sa,i=>t(0,n=i)),He(s,st,i=>t(1,r=i)),[n,r]}class Ap extends Oe{constructor(e){super(),De(this,e,kp,Cp,Ae,{})}}function qo(s,e,t){const n=s.slice();return n[2]=e[t],n}function Wo(s){let e,t=s[2]+"",n,r,i,o,a=xt(0,{notation:s[2]})+"",c,l,u,h=xt(1,{notation:s[2]})+"",f,p,d,m,g,v,w=xt(11,{notation:s[2]})+"",T,b,_,y;function k(){return s[1](s[2])}return{c(){e=P("button"),n=Q(t),r=ee(),i=P("div"),o=P("span"),c=Q(a),l=ee(),u=P("span"),f=Q(h),p=ee(),d=P("span"),m=Q("\u2192"),g=ee(),v=P("span"),T=Q(w),b=ee(),this.h()},l(S){e=V(S,"BUTTON",{class:!0});var D=I(e);n=J(D,t),D.forEach(C),r=te(S),i=V(S,"DIV",{class:!0});var x=I(i);o=V(x,"SPAN",{class:!0});var O=I(o);c=J(O,a),O.forEach(C),l=te(x),u=V(x,"SPAN",{class:!0});var M=I(u);f=J(M,h),M.forEach(C),p=te(x),d=V(x,"SPAN",{class:!0});var F=I(d);m=J(F,"\u2192"),F.forEach(C),g=te(x),v=V(x,"SPAN",{class:!0});var q=I(v);T=J(q,w),q.forEach(C),b=te(x),x.forEach(C),this.h()},h(){B(e,"class","pill svelte-1emr9u5"),ht(e,"selected",s[0].notation===s[2]),B(o,"class","svelte-1emr9u5"),B(u,"class","svelte-1emr9u5"),B(d,"class","svelte-1emr9u5"),B(v,"class","svelte-1emr9u5"),B(i,"class","name")},m(S,D){z(S,e,D),A(e,n),z(S,r,D),z(S,i,D),A(i,o),A(o,c),A(i,l),A(i,u),A(u,f),A(i,p),A(i,d),A(d,m),A(i,g),A(i,v),A(v,T),A(i,b),_||(y=nt(e,"click",xn(k)),_=!0)},p(S,D){s=S,D&1&&ht(e,"selected",s[0].notation===s[2])},d(S){S&&C(e),S&&C(r),S&&C(i),_=!1,y()}}}function xp(s){let e,t,n=no,r=[];for(let i=0;i<n.length;i+=1)r[i]=Wo(qo(s,n,i));return{c(){e=Q(`Choose how you want your notes to be named:

`),t=P("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=J(i,`Choose how you want your notes to be named:

`),t=V(i,"DIV",{class:!0});var o=I(t);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(C),this.h()},h(){B(t,"class","notations svelte-1emr9u5")},m(i,o){z(i,e,o),z(i,t,o);for(let a=0;a<r.length;a+=1)r[a].m(t,null)},p(i,[o]){if(o&1){n=no;let a;for(a=0;a<n.length;a+=1){const c=qo(i,n,a);r[a]?r[a].p(c,o):(r[a]=Wo(c),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:ue,o:ue,d(i){i&&C(e),i&&C(t),qn(r,i)}}}function Mp(s,e,t){let n;return He(s,un,i=>t(0,n=i)),[n,i=>{Hn(i),un.setNotation(i)}]}class Np extends Oe{constructor(e){super(),De(this,e,Mp,xp,Ae,{})}}function Lo(s,e,t){const n=s.slice();return n[16]=e[t],n}function Op(s){let e,t;return e=new Kf({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Dp(s){let e,t;return e=new Yf({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Ep(s){let e,t;return e=new Zf({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function $o(s){let e,t=s[16]+"",n,r,i;function o(){return s[11](s[16])}return{c(){e=P("a"),n=Q(t),this.h()},l(a){e=V(a,"A",{class:!0,href:!0});var c=I(e);n=J(c,t),c.forEach(C),this.h()},h(){B(e,"class","pill"),B(e,"href","/"),ht(e,"selected",s[4]===s[16])},m(a,c){z(a,e,c),A(e,n),r||(i=nt(e,"click",xn(o)),r=!0)},p(a,c){s=a,c&16&&ht(e,"selected",s[4]===s[16])},d(a){a&&C(e),r=!1,i()}}}function Bo(s){let e,t;return e=new Ei({props:{$$slots:{title:[Rp],default:[Ip]},$$scope:{ctx:s}}}),e.$on("close",s[5]),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p(n,r){const i={};r&524288&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Ip(s){let e,t;return e=new ap({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Rp(s){let e,t;return{c(){e=P("div"),t=Q("Rules"),this.h()},l(n){e=V(n,"DIV",{slot:!0});var r=I(e);t=J(r,"Rules"),r.forEach(C),this.h()},h(){B(e,"slot","title")},m(n,r){z(n,e,r),A(e,t)},p:ue,d(n){n&&C(e)}}}function jo(s){let e,t;return e=new Ei({props:{$$slots:{title:[Vp],default:[Pp]},$$scope:{ctx:s}}}),e.$on("close",s[14]),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p(n,r){const i={};r&524304&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Pp(s){let e,t;return e=new Ap({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Vp(s){let e,t,n;return{c(){e=Q("Statistics "),t=P("span"),n=Q(s[4]),this.h()},l(r){e=J(r,"Statistics "),t=V(r,"SPAN",{class:!0});var i=I(t);n=J(i,s[4]),i.forEach(C),this.h()},h(){B(t,"class","pill")},m(r,i){z(r,e,i),z(r,t,i),A(t,n)},p(r,i){i&16&&Wt(n,r[4])},d(r){r&&C(e),r&&C(t)}}}function Uo(s){let e,t;return e=new Ei({props:{$$slots:{title:[qp],default:[Fp]},$$scope:{ctx:s}}}),e.$on("close",s[15]),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p(n,r){const i={};r&524288&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function Fp(s){let e,t;return e=new Np({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}function qp(s){let e,t;return{c(){e=P("div"),t=Q("Settings"),this.h()},l(n){e=V(n,"DIV",{slot:!0});var r=I(e);t=J(r,"Settings"),r.forEach(C),this.h()},h(){B(e,"slot","title")},m(n,r){z(n,e,r),A(e,t)},p:ue,d(n){n&&C(e)}}}function Wp(s){let e,t,n,r,i,o,a,c,l,u,h,f,p,d,m,g,v,w,T,b,_,y,k,S,D,x,O;n=new Uf({});const M=[Ep,Dp,Op],F=[];function q(N,E){return N[3].brightness==="light"?0:N[3].brightness==="dark"?1:2}o=q(s),a=F[o]=M[o](s);let Y=yr,R=[];for(let N=0;N<Y.length;N+=1)R[N]=$o(Lo(s,Y,N));v=new ip({}),b=new np({});let W=s[0]&&Bo(s),G=s[1]&&jo(s),L=s[2]&&Uo(s);return{c(){e=P("nav"),t=P("a"),me(n.$$.fragment),r=ee(),i=P("a"),a.c(),l=ee(),u=P("div"),h=P("strong"),f=Q("Melodle"),p=ee(),d=P("div");for(let N=0;N<R.length;N+=1)R[N].c();m=ee(),g=P("a"),me(v.$$.fragment),w=ee(),T=P("a"),me(b.$$.fragment),_=ee(),W&&W.c(),y=ee(),G&&G.c(),k=ee(),L&&L.c(),S=Mt(),this.h()},l(N){e=V(N,"NAV",{class:!0});var E=I(e);t=V(E,"A",{href:!0});var H=I(t);_e(n.$$.fragment,H),H.forEach(C),r=te(E),i=V(E,"A",{href:!0,title:!0});var ie=I(i);a.l(ie),ie.forEach(C),l=te(E),u=V(E,"DIV",{class:!0});var de=I(u);h=V(de,"STRONG",{});var se=I(h);f=J(se,"Melodle"),se.forEach(C),p=te(de),d=V(de,"DIV",{class:!0});var oe=I(d);for(let Fe=0;Fe<R.length;Fe+=1)R[Fe].l(oe);oe.forEach(C),de.forEach(C),m=te(E),g=V(E,"A",{href:!0});var fe=I(g);_e(v.$$.fragment,fe),fe.forEach(C),w=te(E),T=V(E,"A",{href:!0});var X=I(T);_e(b.$$.fragment,X),X.forEach(C),E.forEach(C),_=te(N),W&&W.l(N),y=te(N),G&&G.l(N),k=te(N),L&&L.l(N),S=Mt(),this.h()},h(){B(t,"href","/"),B(i,"href","/"),B(i,"title",c=`Brighness ${s[3].brightness}`),B(d,"class","difficulties svelte-1dudseb"),B(u,"class","name svelte-1dudseb"),B(g,"href","/"),B(T,"href","/"),B(e,"class","svelte-1dudseb")},m(N,E){z(N,e,E),A(e,t),ge(n,t,null),A(e,r),A(e,i),F[o].m(i,null),A(e,l),A(e,u),A(u,h),A(h,f),A(u,p),A(u,d);for(let H=0;H<R.length;H+=1)R[H].m(d,null);A(e,m),A(e,g),ge(v,g,null),A(e,w),A(e,T),ge(b,T,null),z(N,_,E),W&&W.m(N,E),z(N,y,E),G&&G.m(N,E),z(N,k,E),L&&L.m(N,E),z(N,S,E),D=!0,x||(O=[nt(t,"click",xn(s[9])),nt(i,"click",xn(s[10])),nt(g,"click",xn(s[12])),nt(T,"click",xn(s[13]))],x=!0)},p(N,[E]){let H=o;if(o=q(N),o!==H&&(Ft(),ne(F[H],1,1,()=>{F[H]=null}),qt(),a=F[o],a||(a=F[o]=M[o](N),a.c()),Z(a,1),a.m(i,null)),(!D||E&8&&c!==(c=`Brighness ${N[3].brightness}`))&&B(i,"title",c),E&16){Y=yr;let ie;for(ie=0;ie<Y.length;ie+=1){const de=Lo(N,Y,ie);R[ie]?R[ie].p(de,E):(R[ie]=$o(de),R[ie].c(),R[ie].m(d,null))}for(;ie<R.length;ie+=1)R[ie].d(1);R.length=Y.length}N[0]?W?(W.p(N,E),E&1&&Z(W,1)):(W=Bo(N),W.c(),Z(W,1),W.m(y.parentNode,y)):W&&(Ft(),ne(W,1,1,()=>{W=null}),qt()),N[1]?G?(G.p(N,E),E&2&&Z(G,1)):(G=jo(N),G.c(),Z(G,1),G.m(k.parentNode,k)):G&&(Ft(),ne(G,1,1,()=>{G=null}),qt()),N[2]?L?(L.p(N,E),E&4&&Z(L,1)):(L=Uo(N),L.c(),Z(L,1),L.m(S.parentNode,S)):L&&(Ft(),ne(L,1,1,()=>{L=null}),qt())},i(N){D||(Z(n.$$.fragment,N),Z(a),Z(v.$$.fragment,N),Z(b.$$.fragment,N),Z(W),Z(G),Z(L),D=!0)},o(N){ne(n.$$.fragment,N),ne(a),ne(v.$$.fragment,N),ne(b.$$.fragment,N),ne(W),ne(G),ne(L),D=!1},d(N){N&&C(e),ve(n),F[o].d(),qn(R,N),ve(v),ve(b),N&&C(_),W&&W.d(N),N&&C(y),G&&G.d(N),N&&C(k),L&&L.d(N),N&&C(S),x=!1,Ks(O)}}}function Lp(s,e,t){let n,r,i;He(s,st,T=>t(8,n=T)),He(s,un,T=>t(3,r=T)),He(s,Qt,T=>t(4,i=T));let o=typeof localStorage<"u"&&!localStorage.getItem("showedHelp");const a=()=>{t(0,o=!1),localStorage.setItem("showedHelp","true")};let c=n.state,l=n.difficulty,u=n.state!=="playing",h=!1;const f=()=>t(0,o=!0),p=()=>un.switchBrightness(),d=T=>pc(Qt,i=T,i),m=()=>t(2,h=!0),g=()=>t(1,u=!0),v=()=>t(1,u=!1),w=()=>t(2,h=!1);return s.$$.update=()=>{s.$$.dirty&448&&(n.state!=="playing"&&(c==="playing"||l!==n.difficulty)&&setTimeout(()=>{t(1,u=!0)},1e3),t(6,c=n.state),t(7,l=n.difficulty))},[o,u,h,r,i,a,c,l,n,f,p,d,m,g,v,w]}class $p extends Oe{constructor(e){super(),De(this,e,Lp,Wp,Ae,{})}}function zo(s,e,t){const n=s.slice();return n[4]=e[t],n}function Go(s){let e,t,n,r=s[0].melody.map(s[2]),i=[];for(let o=0;o<r.length;o+=1)i[o]=Yo(zo(s,r,o));return{c(){e=P("div"),t=P("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var a=I(e);t=V(a,"DIV",{class:!0});var c=I(t);for(let l=0;l<i.length;l+=1)i[l].l(c);c.forEach(C),a.forEach(C),this.h()},h(){B(t,"class","notes svelte-1548acw"),B(e,"class","solution svelte-1548acw")},m(o,a){z(o,e,a),A(e,t);for(let c=0;c<i.length;c+=1)i[c].m(t,null)},p(o,a){if(a&3){r=o[0].melody.map(o[2]);let c;for(c=0;c<r.length;c+=1){const l=zo(o,r,c);i[c]?i[c].p(l,a):(i[c]=Yo(l),i[c].c(),i[c].m(t,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},i(o){n||En(()=>{n=Xo(e,an,{duration:500,delay:1e3}),n.start()})},o:ue,d(o){o&&C(e),qn(i,o)}}}function Yo(s){let e,t=s[4]+"",n;return{c(){e=P("span"),n=Q(t)},l(r){e=V(r,"SPAN",{});var i=I(e);n=J(i,t),i.forEach(C)},m(r,i){z(r,e,i),A(e,n)},p(r,i){i&3&&t!==(t=r[4]+"")&&Wt(n,t)},d(r){r&&C(e)}}}function Ho(s){let e,t,n,r;e=new Ec({});let i=s[0].state==="failed"&&Go(s);return{c(){me(e.$$.fragment),t=ee(),i&&i.c(),n=Mt()},l(o){_e(e.$$.fragment,o),t=te(o),i&&i.l(o),n=Mt()},m(o,a){ge(e,o,a),z(o,t,a),i&&i.m(o,a),z(o,n,a),r=!0},p(o,a){o[0].state==="failed"?i?(i.p(o,a),a&1&&Z(i,1)):(i=Go(o),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(o){r||(Z(e.$$.fragment,o),Z(i),r=!0)},o(o){ne(e.$$.fragment,o),r=!1},d(o){ve(e,o),o&&C(t),i&&i.d(o),o&&C(n)}}}function Bp(s){let e,t,n,r,i=`${s[0].index}-${s[0].difficulty}`,o,a,c;t=new $p({});let l=Ho(s);return a=new $f({}),a.$on("add",s[3]),a.$on("delete",st.deleteGuess),a.$on("submit",st.submit),a.$on("sharp",st.sharp),a.$on("flat",st.flat),{c(){e=P("div"),me(t.$$.fragment),n=ee(),r=P("div"),l.c(),o=ee(),me(a.$$.fragment),this.h()},l(u){e=V(u,"DIV",{class:!0});var h=I(e);_e(t.$$.fragment,h),n=te(h),r=V(h,"DIV",{class:!0});var f=I(r);l.l(f),f.forEach(C),o=te(h),_e(a.$$.fragment,h),h.forEach(C),this.h()},h(){B(r,"class","guesses svelte-1548acw"),B(e,"class","board svelte-1548acw")},m(u,h){z(u,e,h),ge(t,e,null),A(e,n),A(e,r),l.m(r,null),A(e,o),ge(a,e,null),c=!0},p(u,[h]){h&1&&Ae(i,i=`${u[0].index}-${u[0].difficulty}`)?(Ft(),ne(l,1,1,ue),qt(),l=Ho(u),l.c(),Z(l),l.m(r,null)):l.p(u,h)},i(u){c||(Z(t.$$.fragment,u),Z(l),Z(a.$$.fragment,u),c=!0)},o(u){ne(t.$$.fragment,u),ne(l),ne(a.$$.fragment,u),c=!1},d(u){u&&C(e),ve(t),l.d(u),ve(a)}}}function jp(s,e,t){let n,r;return He(s,st,a=>t(0,n=a)),He(s,un,a=>t(1,r=a)),[n,r,a=>xt(a,{notation:r.notation}),a=>st.addGuessNote(a.detail)]}class Up extends Oe{constructor(e){super(),De(this,e,jp,Bp,Ae,{})}}function zp(s){let e,t;return e=new Up({}),{c(){me(e.$$.fragment)},l(n){_e(e.$$.fragment,n)},m(n,r){ge(e,n,r),t=!0},p:ue,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){ne(e.$$.fragment,n),t=!1},d(n){ve(e,n)}}}class Sm extends Oe{constructor(e){super(),De(this,e,null,zp,Ae,{})}}export{Sm as default};
