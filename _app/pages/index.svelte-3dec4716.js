import{L as pc,M as gn,S as Pe,i as Ve,s as Oe,l as kt,g as G,n as Gt,o as se,E as pe,p as zt,e as R,t as H,c as P,a as I,h as X,d as A,b as q,N as Ds,K as M,j as Rt,O as On,P as Xo,q as Z,k as ee,m as te,Q as Qe,w as ye,x as we,y as Te,B as be,R as Vn,C as Ae,T as Jt,U as Kt,V as ze,z as en,W as Ye,X as at,Y as Js,v as Zo,Z as ht,_ as Ut,$ as Qo,F as Ki,H as eo,I as to,J as no,a0 as Un,a1 as mc}from"../chunks/index-21bda582.js";import{w as Ks}from"../chunks/index-7b7f758e.js";function Jo(s){const e=s-1;return e*e*e+1}function _c(s){return-s*(s-2)}function an(s,{delay:e=0,duration:t=400,easing:n=pc}={}){const r=+getComputedStyle(s).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*r}`}}function so(s,{delay:e=0,duration:t=400,easing:n=Jo,start:r=0,opacity:i=0}={}){const o=getComputedStyle(s),a=+o.opacity,c=o.transform==="none"?"":o.transform,l=1-r,u=a*(1-i);return{delay:e,duration:t,easing:n,css:(h,d)=>`
			transform: ${c} scale(${1-l*d});
			opacity: ${a-u*d}
		`}}const gc={english:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],romance:["Do","Do#","Re","Re#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Si"],german:["C","C#","D","D#","E","F","F#","G","G#","A","A#","H"],solfege:["Do","Di","Re","Ri","Mi","Fa","Fi","Sol","Si","La","Li","Ti"]},Ct=(s,{octave:e=!1,notation:t="english"}={})=>{const n=gc[t][s%12];return e?`${n}${Math.floor(s/12)}`:n},vc=(s,e)=>{if(e.length!=5)return!1;for(let t=0;t<5;t++)if(Ct(e[t])!==Ct(s[t]))return!1;return!0},ro=s=>s<0?s+12:s%12,Ko=(s,e,{difficulty:t,submitted:n=!1,mode:r="adjacent"})=>{if(!e)return[{},{},{},{},{}];e=e.map(ro);const i=s.map(ro),o=[];for(let a=0;a<5;a++)o[a]=e[a]!==void 0?{semitone:e[a]}:{};if(n){switch(e.forEach((a,c)=>{i[c]===a&&(o[c].status="correct",i[c]=void 0)}),r){case"position":e.forEach((a,c)=>{o[c].status===void 0&&i.includes(a)&&(o[c].status="wrong-position",i[i.indexOf(a)]=void 0)});break;case"adjacent":e.forEach((a,c)=>{const l=t==="easy"?[0,2,4,5,7,9,11]:Array.from(Array(12).keys()),u=l.indexOf(a),h=l[u-1],d=l[u+1];(h!==void 0&&h===i[c]||d!==void 0&&d===i[c])&&(o[c].status="adjacent",i[c]=void 0)});break}o.filter(a=>a.status===void 0).forEach(a=>a.status="incorrect")}return o},yc=[[0,9,11,11,7],[0,7,4,4,2],[0,9,9,9,4],[5,7,9,2,7],[7,5,11,0,9],[7,2,5,4,5],[11,0,4,7,11],[5,4,2,11,11],[9,7,0,2,4],[4,5,0,5,7],[2,5,4,11,9],[0,9,0,9,0],[4,7,7,7,9],[7,4,9,5,0],[2,11,7,5,7],[9,9,2,11,11],[9,4,4,11,9],[2,0,0,2,5],[11,0,0,9,2],[5,5,9,7,11],[0,2,9,2,2],[7,2,9,7,4],[4,5,11,4,4],[5,2,0,4,4],[11,11,11,7,5],[0,7,9,2,9],[7,11,5,9,2],[11,4,2,11,9],[0,7,4,0,5],[7,0,2,4,2],[4,5,5,9,11],[7,11,0,7,0],[11,11,7,5,11],[4,4,11,11,9],[2,4,2,11,4],[5,9,5,11,4],[2,9,7,7,4],[7,9,9,5,9],[5,5,9,5,2],[5,2,0,9,5],[11,7,7,9,2],[4,7,2,4,11],[0,2,4,2,9],[9,11,2,2,11],[0,9,5,2,9],[0,4,9,11,7],[5,0,7,11,7],[4,5,2,0,9],[9,9,4,7,7],[7,11,9,0,0],[5,5,9,5,0],[7,5,0,7,9],[0,5,9,4,2],[11,11,4,0,5],[2,4,0,9,2],[5,11,5,11,2],[4,9,0,4,11],[2,2,9,4,7],[4,11,9,7,4],[11,0,0,11,0],[5,5,2,9,7],[0,9,11,7,2],[9,4,9,7,0],[0,4,5,2,11],[0,7,4,11,4],[11,0,9,9,5],[5,5,0,9,11],[4,7,11,7,0],[2,2,11,2,5],[9,11,2,0,0],[11,7,0,9,4],[5,7,11,4,9],[4,9,11,2,2],[2,0,9,11,9],[11,11,9,2,7],[0,2,5,9,11],[11,4,9,5,7],[11,11,7,2,7],[9,7,11,4,11],[0,0,5,2,5],[4,11,2,2,9],[5,0,11,5,11],[4,9,7,5,0],[5,4,5,5,7],[5,9,7,0,7],[7,5,11,7,0],[2,0,2,7,4],[5,0,2,5,2],[9,11,9,0,5],[11,0,11,5,4],[11,11,9,7,7],[2,11,9,5,0],[2,0,2,7,9],[9,2,2,2,7],[9,0,9,4,2],[2,9,2,2,9],[11,2,5,5,11],[11,9,9,0,11],[5,4,2,9,5],[4,9,11,7,9],[0,9,0,9,9],[0,2,7,9,0],[2,7,9,5,5],[7,9,9,4,4],[11,0,7,11,2],[5,11,9,0,9],[2,11,2,11,5],[11,0,11,4,9],[4,4,7,11,0],[2,5,7,2,4],[9,7,7,4,9],[2,11,5,4,5],[0,11,0,11,11],[9,7,5,4,4],[9,2,0,0,2],[4,11,2,9,9],[2,7,5,2,5],[5,5,11,9,0],[4,4,9,11,11],[11,2,0,2,9],[4,5,9,7,5],[11,0,7,5,9],[2,0,5,2,4],[5,7,7,2,0],[4,5,2,11,11],[7,4,0,2,2],[0,2,7,7,0],[11,9,9,9,7],[11,2,11,7,0],[2,4,4,9,0],[9,11,4,7,5],[0,7,7,9,5],[11,4,2,9,5],[9,0,11,4,7],[7,0,7,5,2],[9,0,2,4,5],[11,9,11,7,2],[11,4,5,7,0],[4,9,7,4,4],[11,11,0,4,7],[2,9,2,9,9],[9,4,11,5,0],[11,2,4,4,4],[7,7,4,4,7],[9,11,5,9,9],[9,0,7,7,2],[9,4,4,4,9],[9,2,7,2,0],[11,9,9,5,2],[9,2,4,5,5],[0,4,7,11,0],[4,5,9,0,7],[4,11,5,0,9],[11,9,2,0,9],[7,7,7,11,7],[5,0,2,0,5],[7,7,5,7,5],[4,9,7,5,4],[4,2,9,7,4],[7,11,4,9,2],[4,9,2,11,11],[0,5,7,5,9],[5,5,9,11,2],[7,5,11,2,9],[0,7,0,2,11],[5,9,4,7,0],[0,11,7,0,11],[5,9,0,11,11],[11,9,5,2,9],[5,5,11,4,2],[4,9,0,7,9],[11,11,4,7,7],[7,9,7,4,2],[9,0,0,2,5],[2,2,9,0,7],[9,0,5,0,9],[4,9,11,2,0],[0,2,7,4,0],[0,9,2,11,0],[11,9,5,2,0],[5,2,11,9,0],[11,0,9,0,11],[5,0,7,11,2],[4,4,0,11,11],[5,0,5,4,9],[5,2,0,11,9],[2,2,7,4,7],[2,7,4,9,5],[2,5,7,0,4],[5,9,7,7,9],[11,11,0,0,2],[5,7,5,5,7],[5,2,4,11,7],[9,2,4,0,5],[7,5,11,2,5],[11,11,7,9,0],[4,11,11,11,2],[5,5,2,9,9],[7,5,9,9,11],[4,0,5,2,0],[0,4,0,4,4],[2,4,2,11,9],[4,4,0,11,9],[5,11,9,7,11],[0,2,4,2,2],[11,5,7,7,0],[0,5,5,5,2],[5,9,4,7,0],[9,2,9,11,7],[2,9,9,7,0],[4,11,0,5,11],[5,0,2,5,7],[7,4,7,9,11],[2,0,0,5,5],[7,4,11,11,11],[2,0,11,9,4],[5,7,11,9,5],[11,0,5,5,0],[7,5,11,9,5],[5,0,4,7,2],[9,4,2,2,5],[9,7,5,9,0],[5,9,7,4,11],[5,0,11,7,7],[2,2,5,0,5],[11,2,5,5,11],[0,11,9,2,4],[7,5,9,9,7],[0,5,4,5,11],[11,2,9,4,9],[5,11,2,5,4],[5,4,9,9,0],[0,2,5,5,11],[5,7,2,5,4],[0,4,7,5,9],[2,5,7,7,2],[2,0,11,0,11],[0,2,0,4,2],[4,7,5,7,9],[2,9,11,9,5],[2,4,2,11,2],[9,5,5,2,0],[5,0,2,0,0],[11,0,11,2,5],[5,7,0,11,5],[4,4,7,7,2],[4,9,11,9,0],[7,7,9,4,4],[9,11,5,4,5],[4,2,7,9,7],[5,2,2,4,7],[11,0,2,0,4],[0,2,2,9,2],[9,5,5,2,4],[2,4,9,2,7],[7,11,4,0,9],[5,2,9,2,0],[9,4,2,5,2],[2,11,2,4,4],[4,5,4,4,2],[4,0,5,4,5],[9,2,11,7,5],[4,7,11,2,9],[11,5,4,5,11],[5,0,5,0,0],[11,7,4,5,11],[7,11,7,0,5],[0,0,4,0,4],[0,9,0,11,5],[4,5,2,0,4],[7,4,5,7,0],[11,11,7,11,11],[5,11,11,5,9],[0,11,7,2,5],[4,2,4,9,5],[9,2,9,11,7],[4,2,0,5,0],[2,9,9,0,0],[5,4,0,4,7],[9,7,7,11,11],[7,5,2,7,11],[4,11,7,5,5],[4,2,9,11,5],[4,4,5,5,5],[7,0,2,4,5],[9,7,0,2,9],[11,0,2,2,5],[11,7,9,0,0],[0,2,5,11,7],[5,2,7,9,9],[5,11,5,7,2],[7,0,5,7,11],[9,0,0,5,9],[5,0,0,7,7],[5,0,4,5,2],[5,0,0,4,7],[0,11,11,11,11],[9,5,5,5,7],[7,2,4,5,4],[0,7,11,11,0],[7,11,11,2,4],[5,2,0,5,0],[0,5,4,9,0],[2,5,11,9,9],[7,11,5,11,0],[11,0,9,9,11],[5,11,2,4,2],[9,5,5,9,7],[9,2,5,11,4],[7,0,5,2,11],[4,5,7,2,9],[7,4,9,7,0],[4,11,9,7,11],[2,5,5,9,9],[7,0,4,5,4],[2,7,7,4,2],[4,5,2,2,7],[0,11,0,4,4],[4,11,2,2,4],[5,11,9,5,9],[4,9,9,4,9],[2,7,11,5,7],[2,4,9,7,7],[0,2,11,0,7],[11,5,0,2,5],[0,5,5,5,5],[11,4,9,9,11],[4,11,7,4,0],[4,11,11,4,11],[11,11,0,4,4],[7,11,5,9,7],[2,11,9,0,4],[7,7,2,4,7],[9,11,0,7,2],[2,5,11,11,2],[2,7,7,4,9],[5,11,4,9,5],[2,0,9,9,7],[2,11,2,11,4],[0,4,5,4,0],[7,7,7,0,9],[11,7,2,7,9],[4,4,7,9,2],[9,7,7,2,7],[2,11,0,2,7],[4,7,2,0,11],[9,2,4,2,9],[4,9,2,11,9],[9,0,2,2,11],[7,11,0,4,4],[11,9,0,0,4],[4,0,2,4,7],[7,5,5,5,9],[0,11,4,5,4],[11,5,11,5,0],[11,11,5,2,2],[2,5,0,9,9],[5,4,5,7,5],[5,7,5,9,0],[2,0,11,5,0],[7,7,0,7,0],[0,7,4,5,9],[9,0,0,5,2],[11,0,9,7,9],[9,4,11,9,4],[5,0,0,9,0],[0,4,5,2,11],[2,4,4,0,4],[9,2,4,7,0],[11,9,9,9,0],[5,4,0,7,9],[11,0,2,2,7],[2,2,7,11,11],[4,7,11,5,11],[9,9,2,11,5],[2,4,5,11,5],[11,11,9,5,4],[9,2,5,5,9],[4,5,7,11,9],[4,4,11,9,2],[0,5,11,5,4],[7,4,11,2,0],[4,7,0,9,5],[11,9,2,0,0],[5,9,11,0,4],[9,5,4,4,0],[2,9,4,4,4],[7,9,0,7,9],[7,11,9,2,5],[5,4,5,4,4],[0,7,9,2,5],[5,4,5,0,7],[11,7,11,9,9],[2,9,5,0,4],[11,2,0,7,2],[9,11,11,11,9],[5,9,0,2,11],[7,11,2,2,5],[2,7,2,7,5],[7,0,4,9,9],[5,5,4,0,7],[11,2,4,9,2],[4,0,4,9,7],[9,5,9,4,5],[0,5,0,5,9],[2,2,7,5,7],[4,11,4,0,0],[2,11,0,5,0],[2,11,0,5,0],[7,5,11,7,7],[5,4,5,9,7],[0,7,0,9,2],[5,5,5,11,7],[0,2,2,7,7],[4,4,4,2,11],[9,4,0,0,5],[4,5,11,4,0],[9,0,0,9,5],[0,11,2,11,7],[7,2,5,0,5],[9,2,5,7,5],[7,7,7,4,11],[4,2,2,5,4],[0,0,7,0,11],[5,9,7,5,4],[9,7,5,9,0],[5,5,5,5,7],[0,2,11,5,2],[5,4,4,7,0],[0,0,11,11,5],[5,5,9,4,7],[11,4,4,4,4],[7,0,11,9,2],[7,11,0,9,5],[9,9,0,7,2],[4,4,4,0,4],[9,5,0,7,0],[7,0,5,7,2],[2,11,7,0,2],[9,11,4,5,7],[11,4,4,0,5],[0,7,5,0,5],[4,9,4,9,0],[2,9,2,5,7],[0,9,5,5,0],[7,7,2,9,2],[0,0,9,0,7],[0,5,5,0,9],[0,5,11,5,11],[0,5,11,0,7],[9,11,11,4,2],[5,11,11,7,5],[0,7,5,2,2],[2,0,5,0,2],[11,9,4,11,5],[7,0,4,11,11],[4,4,0,7,9],[11,9,5,2,0],[5,11,4,11,0],[4,5,9,11,4],[9,11,11,4,2],[2,9,11,7,4],[7,2,11,0,2],[5,7,0,0,0],[2,7,2,11,5],[5,4,4,7,4],[11,4,4,7,5],[7,0,7,4,5],[11,7,5,2,5],[5,9,4,11,11],[4,2,7,7,2],[7,5,4,5,7],[0,0,0,0,11],[4,0,11,11,5],[11,2,0,7,9],[9,7,0,11,5],[4,9,0,7,0],[7,9,7,2,7],[7,7,2,11,5],[4,0,5,9,5],[5,5,5,9,5],[2,2,9,7,0],[11,5,2,9,4],[2,7,2,0,5],[9,4,2,11,0],[11,11,9,2,5],[9,0,4,11,2],[0,0,0,7,0],[7,4,11,7,4],[2,9,5,7,11],[2,5,2,4,11],[4,11,9,7,9],[5,9,9,11,9],[9,11,4,11,7],[4,11,0,7,5],[11,0,11,9,5],[2,11,0,11,9],[5,9,7,11,11],[4,0,4,9,7],[9,9,9,4,9],[5,9,5,9,7],[2,5,0,0,11],[5,11,2,11,0],[11,9,2,7,4],[0,9,2,11,0],[2,7,7,0,7],[2,11,9,11,0],[11,0,0,4,5],[0,7,9,7,11],[4,0,5,0,5],[7,9,9,7,4],[7,2,2,5,7],[2,2,0,5,4],[4,4,0,11,5],[7,0,4,4,5],[5,7,5,11,7],[0,11,5,11,9],[0,9,5,11,0],[5,11,4,11,4],[0,9,7,9,4],[2,9,4,2,9],[2,0,2,0,0],[7,11,2,11,9],[2,11,0,11,9],[2,4,2,9,2],[9,4,2,0,9],[5,4,5,4,11],[7,4,0,2,9],[2,9,7,0,9],[7,9,5,2,2],[11,9,0,0,0],[9,9,9,4,7],[2,2,5,9,9],[2,7,7,7,11],[9,0,7,7,9],[0,7,7,11,5],[2,0,0,5,5],[11,0,11,11,2],[4,7,7,0,5],[11,0,11,5,7],[4,0,9,7,2],[9,0,0,2,2],[4,9,5,11,2],[7,11,11,11,7],[11,9,9,4,9],[0,0,7,4,9],[7,9,2,11,4],[9,0,4,0,2],[7,7,9,9,0],[5,0,11,2,2],[11,4,11,5,2],[7,2,7,4,11],[5,9,9,0,9],[5,4,0,11,11],[4,5,4,9,9],[9,9,11,5,11],[0,5,4,5,2],[11,7,11,7,9],[4,2,4,11,9],[2,4,9,5,9],[4,9,11,11,11],[5,4,11,0,4],[4,4,5,7,0],[9,9,11,2,0],[5,9,0,7,4],[0,0,9,11,4],[7,2,2,5,5],[11,4,2,2,4],[11,7,5,2,2],[11,4,9,5,9],[0,11,11,9,11],[9,2,2,4,5],[11,7,11,0,5],[0,9,7,11,2],[7,2,7,9,0],[7,2,0,4,9],[9,0,9,5,11],[4,7,0,0,4],[11,5,0,5,9],[11,9,0,9,9],[2,9,2,7,9],[11,0,5,4,11],[4,11,9,5,0],[7,7,2,7,5],[0,0,2,0,2],[2,5,4,5,9],[0,11,0,2,2],[5,5,11,9,0],[4,5,2,5,9],[2,5,5,9,4],[0,5,5,11,9],[9,5,9,2,2],[2,0,11,7,11],[0,9,11,11,7],[4,9,11,5,11],[11,7,2,2,4],[5,7,9,11,7],[9,7,4,5,11],[5,11,5,9,7],[11,2,4,9,5],[9,7,2,2,11],[9,2,4,2,4],[0,11,5,11,11],[7,4,7,9,5],[0,2,11,7,5],[5,0,11,9,4],[0,7,11,4,2],[11,0,2,0,2],[4,9,4,5,9],[0,2,11,4,5],[2,7,9,4,4],[7,11,11,9,4],[9,11,2,5,9],[7,7,9,9,0],[4,7,7,2,7],[7,11,9,9,4],[5,7,7,7,9],[0,11,7,7,4],[0,11,0,4,9],[11,11,11,9,4],[2,4,5,9,4],[7,4,11,9,11],[9,0,5,0,2],[0,2,7,4,0],[9,5,4,0,0],[2,9,11,5,2],[9,7,5,2,9],[11,2,7,7,5],[2,0,11,2,5],[4,9,7,11,7],[4,5,5,11,0],[4,4,5,0,9],[7,11,11,7,2],[0,9,4,11,2],[5,11,0,2,4],[4,4,7,5,7],[9,9,11,0,2],[11,7,2,0,9],[4,7,7,11,5],[7,9,4,11,2],[2,7,2,11,9],[4,9,5,7,7],[11,5,9,5,0],[0,5,7,7,9],[11,0,5,4,5],[9,4,0,5,5],[9,0,2,9,9],[4,9,9,9,9],[4,0,4,11,5],[5,4,9,7,4],[9,2,9,2,9],[4,2,0,4,11],[4,0,5,7,2],[2,9,11,0,9],[4,0,9,4,9],[5,11,11,11,7],[7,4,5,5,2],[4,11,5,9,7],[11,2,5,5,11],[7,4,2,9,7],[2,9,11,7,9],[7,7,9,0,2],[2,2,11,11,7],[7,9,5,2,0],[2,9,7,9,5],[4,11,4,5,5],[11,0,11,11,4],[7,11,11,5,5],[11,4,11,4,0],[7,5,0,7,11],[2,11,7,11,5],[11,0,5,0,11],[9,0,0,4,0],[11,9,2,2,0],[5,5,7,11,4],[9,9,5,9,7],[7,7,7,9,11],[2,5,7,2,7],[2,7,0,11,0],[5,5,2,4,7],[0,7,2,9,4],[2,9,11,0,2],[2,0,5,5,9],[5,9,5,2,9],[4,7,0,11,9],[11,7,0,9,9],[4,4,2,2,5],[4,11,5,11,9],[7,4,0,0,5],[2,0,5,11,9],[7,5,11,4,9],[9,5,5,11,5],[4,11,5,0,5],[9,7,4,11,9],[0,11,5,9,7],[0,11,0,4,11],[9,0,0,0,2],[5,9,11,7,4],[4,5,11,9,11],[7,4,2,7,0],[4,4,4,11,2],[4,4,7,5,11],[0,11,5,5,4],[4,2,11,0,0],[5,11,2,4,11],[0,11,5,7,4],[2,5,0,11,2],[2,5,5,4,5],[7,5,2,2,9],[0,11,11,2,9],[4,0,0,7,11],[0,5,11,9,2],[9,9,11,11,4],[7,5,4,4,4],[4,9,4,4,4],[5,0,5,11,0],[11,2,9,11,2],[11,2,9,0,11],[9,9,2,0,7],[2,7,9,7,9],[11,9,0,11,0],[11,4,7,9,11],[7,4,0,11,7],[0,7,4,4,4],[2,0,2,9,11],[9,4,9,11,7],[4,7,0,5,2],[9,2,7,0,9],[11,4,0,2,0],[5,0,9,4,0],[4,5,2,7,2],[9,2,0,7,9],[5,0,11,5,11],[5,4,7,0,4],[11,9,7,0,5],[7,5,0,2,9],[4,7,5,4,0],[9,2,5,0,5],[0,9,0,11,4],[5,5,11,9,11],[5,2,9,7,9],[5,11,7,0,2],[0,2,4,2,2],[2,9,11,9,2],[4,4,11,0,5],[2,5,9,5,11],[9,0,11,9,5],[9,9,9,0,0],[9,0,4,7,9],[5,11,0,11,2],[0,7,4,4,11],[11,2,7,0,9],[11,4,2,0,0],[0,0,7,0,9],[0,0,5,11,9],[0,0,0,4,5],[9,7,5,0,2],[11,2,2,5,5],[9,7,2,0,9],[5,11,7,11,7],[5,11,2,2,7],[7,2,11,4,4],[2,4,11,0,7],[4,11,0,0,9],[5,9,2,0,5],[2,9,7,2,2],[4,5,11,5,9],[5,7,2,2,5],[5,9,11,0,11],[5,9,5,2,2],[9,9,11,7,9],[0,11,11,0,7],[5,0,11,5,0],[5,4,7,4,4],[9,2,0,5,7],[7,7,7,9,0],[9,5,5,0,2],[7,2,5,5,4],[11,9,7,9,2],[0,11,4,11,4],[4,9,4,0,4],[0,5,11,11,11],[0,5,2,7,11],[11,4,9,4,5],[9,0,11,7,5],[0,4,5,7,4],[2,5,4,2,2],[5,7,0,0,2],[11,2,2,7,0],[11,2,0,9,5],[7,5,2,5,2],[2,7,0,2,4],[7,11,5,11,9],[0,9,11,4,0],[7,2,9,4,11],[0,4,9,4,5],[11,9,5,0,5],[2,5,7,11,5],[4,9,11,0,5],[9,9,5,0,7],[7,0,5,4,0],[7,2,5,4,0],[9,7,11,0,11],[2,4,11,7,2],[5,4,9,11,9],[5,5,9,7,7],[2,7,5,0,7],[11,2,2,5,4],[5,5,0,11,5],[0,4,2,11,2],[4,2,7,7,11],[2,5,7,11,2],[11,9,2,0,11],[11,4,4,2,4],[4,9,0,9,7],[11,9,0,0,4],[4,5,7,7,7],[9,11,9,9,0],[4,0,0,11,4],[9,9,9,11,9],[5,5,5,2,5],[4,5,9,4,0],[0,11,5,9,7],[11,2,4,7,5],[11,11,7,2,4],[7,2,5,7,7],[0,11,9,11,4],[0,0,11,4,7],[7,7,4,2,2],[11,9,5,4,11],[0,9,5,5,2],[2,0,0,4,11],[9,5,5,0,11],[9,7,0,5,4],[2,7,2,11,11],[4,9,0,2,11],[9,7,9,2,4],[9,4,2,5,4],[0,9,11,2,5],[4,7,11,2,7],[11,2,7,5,2],[2,2,4,0,2],[2,0,11,11,5],[7,4,7,0,9],[7,2,5,7,9],[2,5,2,0,4],[0,5,11,11,2],[11,2,4,9,5],[2,11,5,11,11],[7,2,11,9,11],[0,2,9,2,4],[4,4,2,2,0],[5,9,0,0,7],[7,5,7,11,4],[2,5,11,2,4],[9,5,0,11,9],[5,4,9,4,0],[0,2,2,5,5],[5,4,11,9,7],[9,11,5,11,11],[5,7,9,0,7],[5,4,2,4,9],[0,11,2,4,0],[11,0,5,5,7],[9,0,9,2,0],[11,4,11,2,0],[2,7,7,11,7],[5,11,0,5,9],[11,11,5,2,4],[2,4,2,7,2],[2,9,2,2,7],[7,11,7,11,9],[2,4,11,9,4],[4,0,4,11,5],[11,11,5,5,5],[0,2,2,9,9],[0,11,11,9,5],[2,7,5,9,0],[4,2,9,2,0],[11,5,0,2,2],[4,2,9,2,5],[7,5,4,9,5],[2,11,4,9,7],[0,11,2,2,11],[9,2,7,2,2],[5,0,7,5,9],[5,7,9,7,2],[5,5,4,9,9],[2,7,7,7,5],[2,9,7,11,7],[5,5,7,5,0],[11,4,11,11,4],[5,2,9,7,7],[9,2,2,4,2],[5,5,7,9,2],[4,9,5,5,4],[4,2,0,5,5],[9,11,4,0,5],[0,11,0,9,9],[0,5,9,5,11],[5,11,11,5,7],[0,11,9,0,5],[9,4,4,9,4],[4,11,2,4,4],[7,7,0,5,9],[11,11,5,4,2],[9,11,2,11,9],[7,0,9,0,5],[2,2,4,7,7],[5,0,4,0,11],[0,0,9,9,9],[9,5,2,5,0],[11,2,2,11,4],[2,0,11,11,9],[0,2,4,2,7],[0,11,4,7,9],[0,0,7,2,11],[7,11,7,11,7],[9,5,2,4,7],[0,0,0,0,9],[9,0,5,7,7],[9,2,0,4,4],[7,9,7,2,4],[7,5,11,4,0],[11,0,9,5,2],[2,4,9,4,0],[9,0,2,4,4],[9,11,7,7,7],[0,11,7,9,2],[9,4,7,2,9],[7,4,4,0,11],[9,4,9,4,11],[9,0,7,4,9],[7,5,4,9,9],[2,11,9,7,5],[7,0,2,0,5],[2,0,5,4,5],[9,5,5,4,11],[5,7,5,0,9],[9,9,11,0,5],[4,4,5,5,2],[7,4,11,4,9],[9,11,9,5,2],[7,7,11,5,2],[11,2,9,11,5],[11,7,2,4,5],[5,11,5,9,5],[11,5,2,5,7],[4,11,0,2,4],[0,11,2,2,0],[11,11,0,11,9],[2,4,2,2,0],[9,9,2,0,2],[9,2,7,7,11],[7,7,5,11,7],[5,2,11,5,2],[4,0,2,4,11],[11,4,2,2,0],[7,7,5,7,9],[9,0,11,9,9],[2,5,0,0,9],[9,5,11,5,9],[2,0,9,4,5],[0,0,11,4,4],[9,11,4,4,11],[4,7,5,5,7],[7,4,2,7,0],[11,9,7,7,11],[7,4,4,2,7],[9,9,4,9,9],[5,5,4,2,9],[5,2,9,4,0],[2,7,5,7,4],[9,0,0,9,5],[7,5,9,11,9],[7,9,7,11,0],[0,7,11,4,11],[2,7,4,11,5],[0,4,2,4,9],[4,4,2,0,11],[9,2,7,7,2],[4,7,5,0,2],[11,11,7,7,5],[7,5,5,5,9],[2,11,11,9,9],[11,5,9,0,11],[2,5,5,2,7],[5,11,4,7,4],[7,9,7,9,2],[4,4,11,9,9],[0,5,4,5,5],[9,9,7,4,5],[11,2,2,5,4],[7,4,5,9,7],[5,11,0,7,4],[9,5,2,2,2],[4,2,7,5,11],[0,4,4,2,2],[11,2,7,0,9],[9,0,7,11,7]],wc=[[3,5,5,3,5],[11,0,10,8,0],[4,0,9,1,9],[8,4,4,11,3],[9,1,3,3,5],[7,10,7,7,6],[10,3,8,9,6],[8,11,1,3,2],[7,1,5,0,3],[9,0,4,8,11],[2,7,4,9,0],[3,9,5,6,2],[9,7,3,6,2],[4,7,3,0,11],[8,11,5,9,1],[4,0,1,2,0],[1,6,8,7,3],[3,4,10,3,11],[2,3,11,6,11],[2,3,4,2,10],[2,9,7,3,6],[3,7,1,8,1],[9,0,4,7,6],[3,9,11,3,5],[1,9,10,9,10],[9,4,5,5,9],[6,8,9,6,10],[1,6,7,5,2],[4,0,4,4,5],[5,8,5,11,6],[0,11,6,11,11],[1,6,11,11,3],[5,9,6,2,10],[9,3,2,4,5],[9,0,6,10,6],[10,8,10,11,9],[7,5,9,0,3],[3,11,8,8,7],[5,10,6,2,2],[3,0,11,2,10],[7,4,2,10,8],[1,3,2,11,6],[0,4,2,10,10],[7,5,10,1,10],[11,3,4,0,8],[5,7,0,3,6],[3,7,4,0,8],[2,7,0,0,10],[7,10,8,7,4],[7,1,5,1,6],[0,9,0,4,8],[10,1,8,8,4],[1,5,10,10,1],[6,3,7,10,5],[5,4,4,10,0],[9,8,3,6,2],[8,7,4,6,11],[6,7,6,4,7],[3,10,8,6,3],[8,7,2,2,2],[10,6,6,3,8],[10,0,10,11,1],[10,7,4,1,3],[4,2,3,2,4],[10,1,3,0,10],[9,10,1,1,9],[0,6,2,9,10],[10,6,5,6,10],[4,11,2,0,6],[8,3,4,8,8],[7,6,5,8,10],[3,0,8,5,6],[11,3,3,6,7],[2,9,10,9,4],[11,11,6,2,0],[6,6,8,9,10],[0,2,2,11,0],[5,0,1,7,5],[8,9,10,11,10],[0,2,3,6,9],[7,10,6,10,0],[2,3,4,4,11],[0,3,8,8,5],[5,11,3,1,7],[5,9,4,8,6],[0,2,5,6,10],[1,6,4,10,10],[8,1,4,6,0],[3,6,10,2,2],[11,4,0,7,7],[9,11,11,9,6],[8,7,7,7,0],[10,6,5,6,3],[7,7,3,9,1],[4,0,2,11,1],[0,0,0,9,4],[0,10,2,3,2],[3,3,2,11,2],[11,0,11,9,2],[7,11,7,2,9],[4,7,0,10,1],[5,4,6,7,8],[7,9,8,4,9],[4,0,3,2,5],[0,0,11,11,9],[8,10,11,11,1],[3,4,11,3,7],[8,1,7,7,11],[10,5,6,7,1],[8,8,5,10,7],[9,2,7,2,2],[3,5,0,7,5],[7,3,10,3,11],[4,7,10,4,4],[1,4,9,10,6],[9,9,10,2,11],[2,1,4,0,8],[5,1,6,0,11],[6,1,6,10,10],[4,5,8,9,5],[6,5,8,4,1],[6,2,1,6,2],[4,0,6,11,1],[3,5,11,8,11],[3,11,6,2,3],[5,10,5,4,11],[2,8,0,0,1],[3,9,1,4,8],[8,1,1,6,8],[2,3,11,7,11],[11,8,8,8,6],[9,6,8,10,11],[1,11,10,1,9],[8,8,5,1,8],[4,10,8,6,7],[8,3,11,4,9],[3,0,8,1,4],[1,2,10,2,2],[10,5,6,10,9],[2,10,5,10,9],[5,5,11,9,5],[6,0,0,8,9],[2,11,2,9,6],[6,4,1,10,3],[7,4,1,11,6],[11,7,6,0,5],[2,3,11,5,10],[7,2,0,8,8],[7,5,10,4,11],[8,4,10,0,9],[8,4,11,4,6],[4,4,4,2,2],[8,7,8,11,4],[7,6,0,7,6],[11,6,8,10,2],[8,7,5,2,6],[11,9,4,2,6],[9,8,6,9,4],[2,0,2,7,7],[6,7,0,1,5],[5,2,9,4,3],[7,3,2,3,2],[2,3,4,9,5],[5,3,1,7,2],[4,8,8,5,7],[0,6,3,4,11],[8,2,10,10,10],[10,8,2,2,11],[7,2,5,7,8],[1,3,10,3,5],[4,0,6,10,10],[3,7,11,1,9],[8,8,7,8,3],[0,1,2,3,4],[0,10,10,8,3],[10,2,6,0,10],[9,8,7,8,3],[5,7,4,1,6],[8,7,8,1,3],[7,3,4,11,4],[1,2,4,7,9],[2,6,6,2,2],[0,11,3,9,1],[4,5,9,0,5],[9,11,3,4,7],[2,0,11,5,10],[4,5,10,0,1],[4,4,2,5,5],[8,11,2,5,11],[2,0,3,0,10],[9,10,10,1,4],[11,5,6,6,0],[9,4,2,11,5],[5,4,9,6,9],[0,10,10,5,0],[5,11,4,9,10],[6,10,7,1,8],[5,11,0,8,3],[8,1,3,10,6],[8,4,2,8,6],[2,2,9,1,0],[10,0,1,11,0],[1,6,2,7,4],[9,9,11,8,8],[2,1,4,11,6],[1,7,4,11,8],[4,6,2,4,4],[8,9,10,11,3],[1,3,3,9,3],[4,11,0,4,0],[0,7,4,9,5],[11,10,10,1,3],[9,10,2,6,3],[1,6,6,9,3],[2,1,8,10,4],[0,8,0,11,2],[7,3,0,8,7],[0,7,6,10,6],[3,5,4,1,0],[1,2,10,7,9],[7,1,0,7,6],[8,4,11,8,8],[7,4,5,4,11],[6,9,5,2,0],[6,3,0,8,3],[5,3,1,1,3],[11,11,8,10,5],[4,4,3,10,8],[1,5,7,10,1],[8,0,5,3,0],[9,5,4,0,11],[0,8,10,2,6],[5,1,9,6,8],[10,6,5,8,8],[11,7,6,3,0],[11,0,10,10,1],[10,6,10,5,5],[4,9,0,9,7],[10,5,9,10,7],[3,0,10,3,7],[10,1,5,9,1],[11,3,11,1,11],[10,9,4,8,10],[9,0,10,6,2],[0,6,9,10,7],[4,10,7,10,0],[7,1,1,11,9],[11,3,1,6,5],[4,4,11,0,1],[11,9,11,10,9],[7,0,7,1,10],[11,1,9,5,1],[8,7,11,7,5],[8,3,3,1,3],[11,5,3,3,5],[5,10,4,1,2],[3,2,4,4,3],[8,3,3,0,9],[1,7,7,4,10],[10,9,3,3,9],[1,10,9,2,8],[7,1,3,0,5],[4,8,6,9,4],[4,4,0,1,9],[7,10,8,2,11],[9,10,11,1,1],[5,9,6,2,10],[11,7,3,5,0],[10,2,9,2,6],[4,6,6,8,10],[9,0,1,4,10],[3,6,3,2,8],[5,7,6,6,7],[1,11,9,10,10],[3,11,0,7,7],[4,5,6,4,1],[0,4,5,2,3],[9,4,11,10,8],[5,3,6,0,11],[5,4,4,1,2],[9,1,9,9,6],[3,6,2,9,7],[4,11,9,2,1],[2,8,8,4,5],[3,10,11,6,1],[8,0,1,6,3],[9,8,3,6,0],[9,4,3,3,3],[3,4,11,0,10],[8,10,7,3,10],[2,3,3,2,11],[6,5,6,10,10],[2,9,1,5,7],[3,10,5,5,10],[0,7,9,7,5],[5,9,10,1,4],[8,3,0,1,3],[7,3,3,6,1],[7,0,10,9,11],[8,1,7,2,10],[6,8,9,3,8],[2,8,8,8,5],[8,0,11,1,10],[1,10,2,9,7],[9,10,6,6,9],[7,6,6,5,1],[11,10,5,2,0],[1,7,1,3,10],[7,5,6,2,0],[0,6,11,11,8],[8,6,9,10,5],[9,6,9,6,5],[8,5,9,1,6],[0,6,2,0,8],[5,8,3,5,1],[9,9,3,10,0],[11,5,4,5,11],[4,4,1,1,6],[4,8,5,4,8],[7,2,11,11,1],[8,1,7,0,7],[11,11,2,3,8],[2,0,9,6,11],[0,9,3,8,6],[7,4,10,3,7],[9,7,1,11,5],[7,0,9,3,0],[5,7,10,10,6],[7,2,2,11,6],[1,11,0,3,9],[10,4,9,10,10],[8,1,4,7,7],[0,0,10,3,1],[5,11,0,6,8],[2,11,1,11,7],[7,5,4,10,6],[7,2,6,3,2],[2,6,3,7,1],[8,7,2,4,0],[10,7,11,4,10],[6,4,9,7,11],[0,3,1,8,10],[9,4,4,5,10],[1,8,0,3,3],[9,10,10,8,0],[6,0,11,5,5],[5,6,6,7,1],[9,1,5,3,5],[8,10,6,4,7],[6,10,11,8,0],[0,7,2,11,11],[1,7,6,0,6],[3,8,0,1,11],[6,1,6,11,8],[3,7,4,10,1],[10,3,3,2,1],[5,7,9,7,5],[2,1,1,11,5],[3,11,2,2,2],[10,6,6,8,3],[10,0,9,5,11],[9,1,5,5,4],[9,2,7,11,7],[2,6,9,9,9],[1,0,1,4,6],[8,6,9,5,2],[4,8,8,2,4],[1,0,7,5,6],[6,1,5,9,0],[4,8,2,4,11],[5,9,9,7,10],[6,11,0,8,10],[2,7,1,3,10],[9,5,10,1,11],[5,1,0,5,11],[1,11,1,1,0],[0,9,6,7,3],[9,7,10,1,2],[8,11,2,3,6],[10,9,0,9,6],[4,0,7,6,11],[9,8,2,1,7],[11,8,8,8,7],[1,9,2,2,1],[10,1,3,1,7],[8,6,0,6,11],[7,6,6,1,3],[11,0,8,4,10],[7,6,0,0,8],[2,1,4,0,11],[8,0,11,7,9],[0,1,8,0,8],[5,5,3,1,4],[11,10,7,2,7],[2,7,9,0,6],[9,10,0,1,8],[5,8,2,11,3],[9,3,9,4,4],[9,11,7,8,5],[11,7,8,2,6],[2,11,7,2,2],[10,1,6,4,3],[1,5,5,2,7],[3,9,4,1,6],[2,1,1,5,3],[7,2,8,4,9],[9,9,1,1,5],[9,3,1,7,7],[9,6,9,11,5],[6,1,5,9,5],[1,1,9,8,1],[3,10,9,5,11],[9,6,9,4,10],[1,6,6,7,1],[10,4,8,10,11],[5,0,9,3,4],[0,3,11,5,1],[2,2,2,4,11],[0,11,3,8,2],[5,7,3,5,8],[4,4,0,4,5],[1,0,10,4,8],[6,1,0,6,7],[0,1,0,11,3],[6,4,7,6,6],[10,5,3,0,3],[11,9,4,3,4],[8,4,7,7,4],[5,6,7,8,2],[10,11,5,8,6],[10,0,1,7,11],[2,3,10,11,11],[11,2,6,9,6],[2,5,8,8,2],[0,11,11,4,7],[4,11,7,2,4],[3,9,6,2,1],[3,4,1,0,11],[9,11,11,8,10],[9,4,0,10,11],[1,7,2,0,9],[8,9,4,2,7],[10,5,7,3,11],[6,8,0,11,0],[1,8,8,4,3],[11,7,7,10,5],[0,3,1,6,8],[0,0,9,3,10],[11,9,3,3,11],[5,2,11,3,1],[10,2,9,1,7],[3,6,2,2,4],[10,4,1,3,2],[1,8,6,7,5],[7,5,1,4,3],[9,1,0,1,4],[6,11,1,7,3],[2,2,4,3,7],[5,5,6,3,8],[4,2,6,10,5],[4,7,6,7,9],[3,3,10,5,5],[6,5,9,1,2],[9,11,5,6,8],[9,10,8,2,4],[8,10,8,3,8],[11,0,2,4,0],[1,5,11,0,8],[6,9,9,8,9],[3,0,5,11,3],[9,11,2,9,1],[8,8,11,7,0],[10,8,7,10,3],[4,6,10,2,11],[0,9,11,3,10],[10,7,9,3,1],[9,3,8,0,11],[3,2,3,6,0],[0,5,7,7,10],[8,2,4,2,2],[3,7,10,0,0],[9,7,9,3,11],[1,8,1,11,4],[0,7,0,8,4],[11,0,10,8,4],[10,6,9,1,2],[8,5,0,3,1],[9,3,11,10,9],[0,2,10,7,10],[6,0,6,7,7],[1,10,11,4,7],[4,7,6,10,5],[9,9,6,9,1],[1,9,6,2,2],[4,7,0,6,2],[6,1,11,10,6],[9,3,4,9,7],[7,5,0,2,7],[4,9,6,6,11],[10,3,1,5,7],[4,7,0,4,11],[3,1,3,8,7],[1,10,1,6,10],[2,1,5,9,2],[4,7,1,1,0],[6,2,5,1,1],[3,8,3,11,1],[2,9,0,2,2],[8,11,2,10,5],[8,5,6,1,11],[7,7,7,10,1],[5,1,1,9,5],[2,3,0,1,3],[11,9,6,5,0],[2,7,1,10,5],[4,11,1,10,0],[10,3,3,7,11],[5,9,1,9,4],[7,7,11,10,11],[10,7,5,2,9],[9,10,11,7,10],[4,10,8,10,10],[5,8,0,7,6],[6,2,9,3,7],[8,10,7,4,2],[7,8,11,3,9],[4,7,2,2,6],[11,3,7,6,6],[11,2,6,0,3],[6,7,1,6,6],[2,0,6,4,1],[8,6,10,3,1],[7,1,3,1,9],[2,1,9,1,4],[8,7,6,8,6],[3,7,5,7,11],[1,8,10,1,4],[7,9,11,3,5],[3,8,9,7,8],[8,11,7,3,10],[3,3,4,10,6],[8,8,5,6,4],[3,8,6,8,5],[5,5,4,1,11],[7,10,8,1,4],[1,6,0,1,4],[9,1,1,1,6],[10,7,5,10,5],[3,9,9,7,6],[10,8,0,4,6],[8,5,7,3,9],[1,2,4,2,11],[6,9,8,11,11],[9,7,4,8,8],[8,5,7,8,8],[9,3,1,0,4],[9,6,11,8,3],[4,1,8,0,4],[4,9,6,2,7],[5,10,6,3,2],[11,7,6,3,5],[0,4,11,8,1],[4,10,4,6,6],[11,5,8,11,5],[8,3,3,8,5],[11,10,11,2,3],[7,10,9,6,2],[8,8,5,10,4],[1,2,6,8,3],[11,3,3,5,10],[4,9,7,1,2],[8,2,8,9,3],[5,2,7,4,3],[8,5,5,4,3],[7,8,8,3,8],[8,10,7,8,2],[9,2,7,0,10],[9,8,8,11,1],[3,8,3,6,2],[4,6,5,11,4],[7,7,5,6,9],[3,5,8,10,0],[4,4,6,8,7],[4,10,9,6,8],[4,10,6,0,9],[9,6,5,11,7],[4,9,0,10,5],[0,0,8,3,5],[9,7,4,0,9],[3,11,1,7,9],[6,0,8,4,7],[1,9,4,2,0],[10,5,0,0,8],[5,8,3,7,1],[9,1,3,11,6],[8,8,3,1,2],[4,2,5,0,5],[5,1,1,5,7],[2,2,8,6,0],[3,3,9,7,0],[8,11,7,9,7],[1,9,2,0,0],[1,1,11,0,10],[7,1,7,6,3],[10,1,5,0,0],[0,9,7,7,6],[9,7,1,6,7],[1,11,7,4,3],[1,9,8,4,4],[8,10,1,11,8],[7,7,2,4,7],[0,7,0,10,1],[10,4,5,6,7],[11,7,11,2,2],[5,3,6,7,0],[7,3,11,7,6],[5,10,8,11,0],[7,8,11,0,9],[10,9,6,5,1],[2,9,11,2,4],[6,5,8,6,5],[5,10,9,9,10],[6,1,11,1,3],[9,10,9,4,1],[11,8,8,8,5],[6,9,7,6,3],[8,6,10,0,9],[10,4,0,11,0],[3,8,1,10,10],[8,7,7,10,1],[1,11,9,2,6],[2,10,7,5,2],[2,3,3,10,6],[6,3,3,9,3],[2,3,1,11,8],[5,0,7,11,11],[10,7,1,8,2],[11,10,5,9,3],[7,7,6,9,3],[6,4,3,5,3],[3,1,1,1,9],[6,4,1,11,3],[2,8,6,11,6],[5,1,10,7,5],[4,4,4,2,11],[8,11,3,5,4],[7,11,9,8,10],[1,11,0,11,5],[9,5,6,5,10],[9,8,0,0,3],[9,6,4,10,5],[2,7,3,7,0],[4,0,11,6,8],[2,9,6,10,3],[9,3,3,8,8],[0,11,7,8,0],[11,2,6,9,5],[11,11,0,11,2],[3,1,6,2,1],[1,3,4,7,4],[7,5,9,9,3],[1,10,10,2,11],[3,3,8,10,9],[1,8,7,5,8],[9,0,11,6,2],[5,6,9,11,1],[3,3,11,3,11],[4,8,8,10,6],[7,6,9,9,2],[11,11,9,2,7],[6,1,2,10,3],[11,3,10,1,4],[11,1,6,7,5],[4,8,2,6,3],[9,0,11,8,1],[2,3,4,0,3],[5,3,8,7,11],[0,5,2,11,10],[1,5,2,7,5],[5,10,4,8,9],[0,2,7,3,8],[4,8,0,7,4],[8,4,1,9,10],[9,5,2,3,4],[9,4,9,6,8],[1,1,1,4,8],[8,8,4,3,4],[3,1,3,5,7],[9,8,0,10,7],[2,7,5,9,4],[11,7,10,0,10],[4,10,11,0,1],[2,0,5,4,3],[9,11,4,2,7],[11,7,5,3,8],[0,5,9,1,3],[1,5,3,8,0],[6,1,3,10,0],[0,9,0,4,0],[6,9,2,5,10],[4,3,8,6,0],[6,3,2,7,7],[7,10,4,3,1],[8,6,1,8,8],[9,4,0,11,5],[9,8,6,6,6],[8,1,8,2,3],[9,3,5,11,8],[8,6,2,1,11],[1,1,11,0,7],[8,11,0,6,8],[10,0,3,11,9],[11,2,5,4,11],[2,9,11,3,9],[9,0,6,11,5],[0,11,8,11,5],[4,0,8,8,1],[5,4,2,1,0],[10,10,8,7,5],[10,8,11,0,2],[7,5,11,6,0],[1,1,0,3,9],[0,5,10,6,3],[9,8,5,7,2],[7,7,2,4,2],[10,0,8,6,0],[0,8,1,5,6],[2,11,9,7,11],[9,11,6,8,5],[4,2,7,8,10],[4,2,8,5,11],[7,8,6,1,10],[7,11,6,1,11],[3,7,2,3,1],[4,7,8,2,4],[9,2,10,0,4],[6,11,2,4,10],[10,9,10,4,0],[9,7,6,11,3],[3,10,1,1,4],[2,6,9,0,11],[3,11,1,10,4],[4,0,11,0,0],[11,8,4,2,10],[2,5,0,10,0],[2,0,8,8,0],[2,9,1,3,1],[9,5,3,1,1],[8,10,2,3,8],[5,3,11,4,0],[3,10,9,11,0],[7,0,6,6,3],[3,10,10,8,7],[2,6,1,10,10],[6,4,5,2,3],[6,5,1,3,9],[3,0,10,10,5],[10,3,10,10,5],[10,5,2,0,0],[9,0,1,7,2],[5,1,11,1,11],[0,3,9,3,9],[11,1,1,5,8],[3,0,1,4,0],[9,10,9,10,0],[8,7,1,7,0],[2,4,4,1,1],[10,6,1,5,10],[6,3,7,4,9],[5,2,7,2,1],[8,9,7,2,3],[4,11,6,5,8],[5,6,10,8,5],[9,7,3,10,3],[8,6,2,3,3],[1,4,0,4,11],[4,3,4,7,7],[5,9,5,6,1],[10,0,6,0,3],[11,2,6,11,11],[3,6,6,10,5],[5,8,8,7,7],[11,6,0,6,4],[3,6,3,8,8],[0,5,2,0,9],[2,8,0,11,4],[9,0,7,6,4],[7,0,8,3,8],[8,11,1,8,8],[8,8,5,2,5],[9,8,9,3,6],[6,4,6,7,9],[8,10,11,7,2],[5,11,0,11,11],[9,5,0,1,6],[1,11,6,8,6],[7,10,5,8,2],[3,0,4,7,8],[6,11,6,2,9],[9,10,5,3,9],[11,10,2,10,9],[6,0,0,3,4],[3,8,4,3,0],[10,11,5,7,4],[4,3,4,3,0],[8,5,0,5,1],[7,2,6,0,11],[9,4,6,2,3],[0,2,5,0,2],[10,0,11,5,9],[7,3,9,11,10],[8,1,10,0,1],[6,8,3,0,9],[0,7,0,2,0],[11,2,11,7,4],[5,0,2,7,1],[3,2,1,0,3],[2,11,0,3,6],[5,6,0,7,1],[1,5,9,5,6],[11,7,4,4,6],[8,9,5,11,1],[8,10,5,2,3],[7,8,6,7,10],[11,5,9,4,3],[5,9,3,3,9],[2,3,10,5,0],[2,1,1,2,6],[3,10,6,5,4],[10,10,1,5,4],[3,1,11,8,10],[3,2,10,9,1],[9,10,10,2,2],[5,8,11,10,8],[3,8,8,0,5],[7,10,8,2,8],[11,1,11,4,3],[6,10,9,1,4],[5,10,4,8,1],[5,4,0,7,5],[2,2,4,9,6],[2,8,6,2,7],[7,1,7,0,4],[3,6,6,6,9],[0,5,3,5,2],[2,9,0,1,4],[10,0,2,9,10],[6,8,5,6,7],[10,7,3,0,5],[9,3,1,10,0],[10,1,2,2,5],[5,8,9,4,9],[0,3,4,5,7],[8,5,8,6,2],[7,11,3,6,3],[5,4,4,1,11],[1,4,3,10,4],[5,11,10,10,4],[7,4,8,5,4],[9,8,1,2,3],[6,4,6,2,7],[1,3,3,9,4],[8,2,6,2,0],[10,3,8,6,0],[2,7,0,10,11],[9,10,0,5,9],[8,4,5,4,4],[7,5,8,8,4],[6,7,0,10,1],[11,11,4,1,5],[3,1,6,9,1],[7,9,4,0,8],[2,2,10,4,4],[10,7,3,11,1],[8,2,7,6,2],[10,0,1,7,6],[4,7,3,8,11],[3,4,10,6,5],[10,0,3,7,6],[11,3,8,5,8],[6,8,2,10,8],[5,5,6,4,9],[5,7,5,0,2],[0,9,4,9,10],[9,6,11,3,11],[2,10,3,5,2],[2,8,9,8,8],[4,5,11,8,6],[0,7,2,10,10],[6,5,5,1,0],[7,10,1,1,2],[8,7,9,4,1],[6,3,8,0,6],[8,5,2,1,1],[7,7,4,2,5],[5,10,0,6,4],[3,11,9,9,7],[8,6,11,0,8],[5,0,8,3,0],[1,11,5,6,9],[11,7,0,9,4],[6,9,8,6,0],[2,6,2,2,5],[0,2,3,3,11],[10,5,8,8,11],[1,0,11,11,0],[4,5,7,5,2],[6,5,3,0,1],[7,0,0,8,1],[2,9,1,9,7],[11,2,3,0,9],[2,2,11,1,5],[2,4,4,1,2],[5,11,4,6,10],[3,2,11,6,10],[2,10,10,4,6],[1,3,7,4,8],[6,1,11,9,10],[0,0,11,3,8],[7,7,0,6,11],[6,5,7,2,0],[4,5,9,6,2],[0,8,8,1,3],[4,3,7,8,8],[9,8,5,5,7],[8,8,10,3,5],[2,0,7,5,0],[0,8,3,1,3],[10,9,0,9,4],[3,1,4,9,5],[11,7,7,3,4],[9,11,11,6,2],[11,9,2,5,4],[3,7,2,7,2],[1,9,4,3,8],[8,9,1,6,4],[4,5,2,4,3],[5,10,8,5,8],[1,6,9,2,4],[3,4,1,8,6],[11,6,3,6,0],[7,3,2,11,7],[11,4,7,0,5],[1,7,6,5,7],[6,7,4,6,9],[8,1,9,1,9],[5,9,0,8,6],[0,9,1,10,6],[9,0,8,7,2],[8,8,4,4,0],[10,9,8,0,3],[2,11,5,1,9],[4,2,9,7,7],[5,11,10,2,4],[4,6,7,6,0],[10,4,5,9,2],[11,7,10,11,4],[9,3,4,10,5],[6,6,0,4,4],[4,0,0,1,1],[1,6,3,10,10],[11,3,0,5,5],[11,8,7,6,9],[10,7,6,5,5],[8,5,2,1,6],[1,6,8,5,11],[8,0,8,11,10],[0,1,11,2,9],[10,3,7,9,5],[10,4,2,3,6],[7,11,3,4,3],[9,10,5,0,11],[1,3,11,0,1],[5,10,11,5,3],[0,6,9,0,1],[4,2,11,9,4],[5,2,7,2,2],[10,6,4,10,5],[7,8,3,0,10],[0,4,3,0,9],[9,6,10,8,10],[2,8,7,2,10],[5,10,9,3,6],[5,10,6,0,11],[1,10,9,7,9],[2,3,11,2,5],[3,9,3,11,0],[3,1,1,9,10],[8,4,3,0,6],[5,5,0,2,7],[2,4,1,5,11],[4,4,4,2,4],[10,3,0,1,9],[8,6,1,3,8],[2,2,0,8,1],[10,10,11,11,9],[2,11,5,7,0],[2,10,11,9,7],[0,8,3,10,2],[8,0,9,5,10]],ea="difficulty",yr=["easy","hard"],Tc=s=>yr.includes(s),bc=()=>{const s="easy";if(typeof localStorage>"u")return s;let e=localStorage.getItem(ea);return e==="medium"&&(e="hard"),Tc(e)?e:s},Ht=Ks(bc());Ht.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(ea,s)});const ta={easy:"stats_easy",hard:"stats"},wr=s=>({difficulty:s,lastIndex:-2,playedGames:0,winPercentage:0,currentStreak:0,maxStreak:0,guessDistribution:[]}),na=s=>{if(typeof localStorage>"u")return wr(s);try{const e=localStorage.getItem(ta[s]);if(!e)throw`No stats stored for ${s}`;const t=JSON.parse(e);return(typeof t.difficulty!="string"||t.difficulty!==s)&&(t.difficulty=s),t}catch(e){console.warn(e)}return wr(s)},xn=Ks(na(gn(Ht)));xn.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(ta[s.difficulty],JSON.stringify(s))});Ht.subscribe(s=>{s!==gn(xn).difficulty&&xn.set(na(s))});const sa={subscribe:xn.subscribe,reset:s=>{xn.set(wr(s))},addNew:s=>{xn.update(e=>{var n;e.lastIndex===s.index-1&&s.state==="success"?e.currentStreak++:e.currentStreak=s.state==="success"?1:0,e.currentStreak>e.maxStreak&&(e.maxStreak=e.currentStreak),e.winPercentage=(e.winPercentage*e.playedGames+(s.state==="success"?1:0))/(e.playedGames+1),e.playedGames++,e.lastIndex=s.index;const t=Sr(s)-1;return(n=e.guessDistribution)[t]??(n[t]=0),e.guessDistribution[t]++,e})}};function ii(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tr={exports:{}},Es={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){var r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),n.getTime()-r.getTime()}s.exports=e.default})(Es,Es.exports);var br={exports:{}},vt={exports:{}},Je={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){if(r.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+r.length+" present")}s.exports=e.default})(Je,Je.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=n(Je.exports);function n(i){return i&&i.__esModule?i:{default:i}}function r(i){(0,t.default)(1,arguments);var o=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&o==="[object Date]"?new Date(i.getTime()):typeof i=="number"||o==="[object Number]"?new Date(i):((typeof i=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}s.exports=e.default})(vt,vt.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,n.default)(1,arguments);var a=(0,t.default)(o);return a.setHours(0,0,0,0),a}s.exports=e.default})(br,br.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Es.exports),n=i(br.exports),r=i(Je.exports);function i(c){return c&&c.__esModule?c:{default:c}}var o=864e5;function a(c,l){(0,r.default)(2,arguments);var u=(0,n.default)(c),h=(0,n.default)(l),d=u.getTime()-(0,t.default)(u),p=h.getTime()-(0,t.default)(h);return Math.round((d-p)/o)}s.exports=e.default})(Tr,Tr.exports);var Sc=ii(Tr.exports);const Cc=new Date(2022,3,19),ra={easy:"board_easy",hard:"board"},ia=s=>{let e;switch(s){case"easy":e=yc;break;case"hard":e=wc;break}const t=Math.min(e.length,Math.max(0,Sc(new Date,Cc))),n=e[t].map(i=>i+12*4);let r;if(typeof localStorage<"u"){const i=localStorage.getItem(ra[s]);if(i)try{const o=JSON.parse(i);if(o.index!==t)throw"Wrong index";if(!Array.isArray(o.melody)||o.melody.length!==n.length||o.melody[0]!==n[0]||o.melody[1]!==n[1]||o.melody[2]!==n[2]||o.melody[3]!==n[3]||o.melody[4]!==n[4])throw"Wrong melody";(typeof o.difficulty!="string"||o.difficulty!==s)&&(o.difficulty=s),r=o}catch(o){console.warn(o)}}return r||(r={difficulty:s,index:t,melody:n,guesses:[],state:"playing"}),r},Xt=Ks(ia(gn(Ht)));Xt.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(ra[s.difficulty],JSON.stringify(s))});Ht.subscribe(s=>{s!==gn(Xt).difficulty&&Xt.set(ia(s))});const Sr=s=>s.guesses.filter(e=>e.submitted).length,rn=s=>{if(s??(s=gn(Xt)),s.state!=="playing")return null;const e=s.guesses[s.guesses.length-1];if(!e||e.submitted){if(s.guesses.length===6)throw"This shouldnt happen";const t={melody:[],submitted:!1,played:!1};return s.guesses.push(t),t}else return e},kc=()=>{const s=gn(Xt);s.guesses.filter(e=>e.submitted).find(e=>vc(s.melody,e.melody))?s.state="success":s.guesses.filter(e=>e.submitted).length===6?s.state="failed":s.state="playing",s.state!=="playing"&&sa.addNew(s)},Cn=()=>Xt.set(gn(Xt)),nt={subscribe:Xt.subscribe,addGuessNote:s=>{const e=rn();!e||e.melody.length>=5||(e.melody.push(s),Cn())},deleteGuess:()=>{const s=rn();!s||(s.melody.pop(),Cn())},sharp:()=>{const s=rn();!s||s.melody.length===0||(s.melody[s.melody.length-1]+=1,Cn())},flat:()=>{const s=rn();if(!s||s.melody.length===0)return;const e=s.melody.length-1;s.melody[e]-=1,s[e]<0&&(s[e]+=12),Cn()},submit:()=>{const s=rn();!s||s.melody.length<5||(s.submitted=!0,kc(),Cn())},melodyPlayed:()=>{const s=rn();!s||(s.played=!0,Cn())}},oa="settings",Cr=["english","romance","german","solfege"],Ac=s=>Cr.includes(s),xc=()=>{const s={notation:"english"};if(typeof localStorage>"u")return s;if(typeof navigator<"u")try{navigator.language.startsWith("fr")||navigator.language.startsWith("it")||navigator.language.startsWith("es")||navigator.language.startsWith("pt")||navigator.language.startsWith("ro")?s.notation="romance":navigator.language.startsWith("de")&&(s.notation="german")}catch(e){console.warn(e)}try{const e=localStorage.getItem(oa);if(!e)throw"No settings stored";const t=JSON.parse(e);return Ac(t.notation)||(t.notation=s.notation),t}catch(e){console.log(`Could not load settings: ${e}`)}return s},kr=Ks(xc());kr.subscribe(s=>{typeof localStorage<"u"&&localStorage.setItem(oa,JSON.stringify(s))});const Yn={subscribe:kr.subscribe,setNotation:s=>kr.update(e=>(e.notation=s,e))};function io(s){let e=s[0],t,n=oo(s);return{c(){n.c(),t=kt()},l(r){n.l(r),t=kt()},m(r,i){n.m(r,i),G(r,t,i)},p(r,i){i&1&&Oe(e,e=r[0])?(Gt(),se(n,1,1,pe),zt(),n=oo(r),n.c(),Z(n),n.m(t.parentNode,t)):n.p(r,i)},i(r){Z(n)},o(r){se(n)},d(r){r&&A(t),n.d(r)}}}function oo(s){let e,t,n,r;return{c(){e=R("div"),t=H(s[1]),this.h()},l(i){e=P(i,"DIV",{class:!0});var o=I(e);t=X(o,s[1]),o.forEach(A),this.h()},h(){q(e,"class",n=Ds(`note ${s[0]}`)+" svelte-1r2lvkt")},m(i,o){G(i,e,o),M(e,t)},p(i,o){o&2&&Rt(t,i[1]),o&1&&n!==(n=Ds(`note ${i[0]}`)+" svelte-1r2lvkt")&&q(e,"class",n)},i(i){r||On(()=>{r=Xo(e,s[2],{}),r.start()})},o:pe,d(i){i&&A(e)}}}function Mc(s){let e,t,n,r,i=s[0]&&io(s);return{c(){e=R("div"),t=R("div"),n=H(s[1]),r=ee(),i&&i.c(),this.h()},l(o){e=P(o,"DIV",{class:!0});var a=I(e);t=P(a,"DIV",{class:!0});var c=I(t);n=X(c,s[1]),c.forEach(A),r=te(a),i&&i.l(a),a.forEach(A),this.h()},h(){q(t,"class","note svelte-1r2lvkt"),q(e,"class","container svelte-1r2lvkt")},m(o,a){G(o,e,a),M(e,t),M(t,n),M(e,r),i&&i.m(e,null)},p(o,[a]){a&2&&Rt(n,o[1]),o[0]?i?(i.p(o,a),a&1&&Z(i,1)):(i=io(o),i.c(),Z(i,1),i.m(e,null)):i&&(i.d(1),i=null)},i(o){Z(i)},o:pe,d(o){o&&A(e),i&&i.d()}}}function Nc(s,e,t){let n,r;Qe(s,Yn,d=>t(8,r=d));let{semitone:i}=e,{status:o=void 0}=e,{gameInProgress:a=!1}=e,{animate:c=!1}=e,{index:l=0}=e;function u(d,{duration:p=1200}={}){if(!c)return{duration:0,css:()=>""};const m=200*l,g=p+m;let v=m/g;return{duration:g,css:w=>{let C,S;return w<v?(C=0,S=0):(C=Jo(v?(w-v)*(1/(1-v)):w),S=_c(v?(w-v)*(1/(1-v)):w)),`
          clip-path: ellipse(${S*300}% ${C*200}% at -10% 50%);
					`}}}let h;return s.$$set=d=>{"semitone"in d&&t(3,i=d.semitone),"status"in d&&t(4,o=d.status),"gameInProgress"in d&&t(5,a=d.gameInProgress),"animate"in d&&t(6,c=d.animate),"index"in d&&t(7,l=d.index)},s.$$.update=()=>{s.$$.dirty&264&&t(1,n=typeof i<"u"?Ct(i,{notation:r.notation}):""),s.$$.dirty&49&&(t(0,h=o),h==="adjacent"&&a&&t(0,h="incorrect"))},[h,n,u,i,o,a,c,l,r]}class Ms extends Pe{constructor(e){super(),Ve(this,e,Nc,Mc,Oe,{semitone:3,status:4,gameInProgress:5,animate:6,index:7})}}function ao(s,e,t){const n=s.slice();return n[6]=e[t],n[8]=t,n}function co(s){let e,t;return e=new Ms({props:{semitone:s[6].semitone,status:s[6].status,index:s[8],animate:s[0],gameInProgress:s[1].state==="playing"}}),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},p(n,r){const i={};r&4&&(i.semitone=n[6].semitone),r&4&&(i.status=n[6].status),r&1&&(i.animate=n[0]),r&2&&(i.gameInProgress=n[1].state==="playing"),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Oc(s){let e,t,n=s[2],r=[];for(let o=0;o<n.length;o+=1)r[o]=co(ao(s,n,o));const i=o=>se(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=kt()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=kt()},m(o,a){for(let c=0;c<r.length;c+=1)r[c].m(o,a);G(o,e,a),t=!0},p(o,[a]){if(a&7){n=o[2];let c;for(c=0;c<n.length;c+=1){const l=ao(o,n,c);r[c]?(r[c].p(l,a),Z(r[c],1)):(r[c]=co(l),r[c].c(),Z(r[c],1),r[c].m(e.parentNode,e))}for(Gt(),c=n.length;c<r.length;c+=1)i(c);zt()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)Z(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)se(r[a]);t=!1},d(o){Vn(r,o),o&&A(e)}}}function Dc(s,e,t){let n,r;Qe(s,nt,l=>t(1,r=l));let{correctMelody:i}=e,{guessedMelody:o}=e,{submitted:a}=e,{isLast:c=!1}=e;return s.$$set=l=>{"correctMelody"in l&&t(3,i=l.correctMelody),"guessedMelody"in l&&t(4,o=l.guessedMelody),"submitted"in l&&t(5,a=l.submitted),"isLast"in l&&t(0,c=l.isLast)},s.$$.update=()=>{s.$$.dirty&58&&t(2,n=Ko(i,o,{difficulty:r.difficulty,submitted:a}))},[c,r,n,i,o,a]}class Ec extends Pe{constructor(e){super(),Ve(this,e,Dc,Oc,Oe,{correctMelody:3,guessedMelody:4,submitted:5,isLast:0})}}function lo(s,e,t){const n=s.slice();n[1]=e[t],n[4]=t;const r=n[0].guesses[n[4]];return n[2]=r,n}function uo(s){let e,t;return e=new Ec({props:{correctMelody:s[0].melody,guessedMelody:s[2]?.melody,submitted:s[2]?.submitted??!1,isLast:s[4]===Sr(s[0])-1}}),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},p(n,r){const i={};r&1&&(i.correctMelody=n[0].melody),r&1&&(i.guessedMelody=n[2]?.melody),r&1&&(i.submitted=n[2]?.submitted??!1),r&1&&(i.isLast=n[4]===Sr(n[0])-1),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Ic(s){let e,t,n=Array(6),r=[];for(let o=0;o<n.length;o+=1)r[o]=uo(lo(s,n,o));const i=o=>se(r[o],1,1,()=>{r[o]=null});return{c(){e=R("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=P(o,"DIV",{class:!0});var a=I(e);for(let c=0;c<r.length;c+=1)r[c].l(a);a.forEach(A),this.h()},h(){q(e,"class","guesses svelte-ea79xu")},m(o,a){G(o,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);t=!0},p(o,[a]){if(a&1){n=Array(6);let c;for(c=0;c<n.length;c+=1){const l=lo(o,n,c);r[c]?(r[c].p(l,a),Z(r[c],1)):(r[c]=uo(l),r[c].c(),Z(r[c],1),r[c].m(e,null))}for(Gt(),c=n.length;c<r.length;c+=1)i(c);zt()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)Z(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)se(r[a]);t=!1},d(o){o&&A(e),Vn(r,o)}}}function Rc(s,e,t){let n;return Qe(s,nt,r=>t(0,n=r)),[n]}class Pc extends Pe{constructor(e){super(),Ve(this,e,Rc,Ic,Oe,{})}}function Vc(s){let e,t='<path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32" d="M135.19 390.14a28.79 28.79 0 0 0 21.68 9.86h246.26A29 29 0 0 0 432 371.13V140.87A29 29 0 0 0 403.13 112H156.87a28.84 28.84 0 0 0-21.67 9.84L46.33 256l88.86 134.11Z"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M336.67 192.33L206.66 322.34m130.01 0L206.66 192.33m130.01 0L206.66 322.34m130.01 0L206.66 192.33"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function Fc(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class qc extends Pe{constructor(e){super(),Ve(this,e,Fc,Vc,Oe,{})}}function Wc(s){let e,t='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M416 128L192 384l-96-96"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function Lc(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class $c extends Pe{constructor(e){super(),Ve(this,e,Lc,Wc,Oe,{})}}const aa="14.7.77",ho=(s,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:s}),fo=(s,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:s}),Ar=(s,e)=>({startTime:e,type:"setValue",value:s}),ca=(s,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:s}),la=(s,e,{startTime:t,target:n,timeConstant:r})=>n+(e-n)*Math.exp((t-s)/r),An=s=>s.type==="exponentialRampToValue",Is=s=>s.type==="linearRampToValue",jt=s=>An(s)||Is(s),oi=s=>s.type==="setValue",Et=s=>s.type==="setValueCurve",Rs=(s,e,t,n)=>{const r=s[e];return r===void 0?n:jt(r)||oi(r)?r.value:Et(r)?r.values[r.values.length-1]:la(t,Rs(s,e-1,r.startTime,n),r)},po=(s,e,t,n,r)=>t===void 0?[n.insertTime,r]:jt(t)?[t.endTime,t.value]:oi(t)?[t.startTime,t.value]:Et(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,Rs(s,e-1,t.startTime,r)],xr=s=>s.type==="cancelAndHold",Mr=s=>s.type==="cancelScheduledValues",Bt=s=>xr(s)||Mr(s)?s.cancelTime:An(s)||Is(s)?s.endTime:s.startTime,mo=(s,e,t,{endTime:n,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((s-e)/(n-e)):0,_o=(s,e,t,{endTime:n,value:r})=>t+(s-e)/(n-e)*(r-t),Bc=(s,e)=>{const t=Math.floor(e),n=Math.ceil(e);return t===n?s[t]:(1-(e-t))*s[t]+(1-(n-e))*s[n]},jc=(s,{duration:e,startTime:t,values:n})=>{const r=(s-t)/e*(n.length-1);return Bc(n,r)},Cs=s=>s.type==="setTarget";class Uc{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Bt(e);if(xr(e)||Mr(e)){const n=this._automationEvents.findIndex(i=>Mr(e)&&Et(i)?i.startTime+i.duration>=t:Bt(i)>=t),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),xr(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&jt(r)){if(Cs(i))throw new Error("The internal list is malformed.");const o=Et(i)?i.startTime+i.duration:Bt(i),a=Et(i)?i.values[i.values.length-1]:i.value,c=An(r)?mo(t,o,a,r):_o(t,o,a,r),l=An(r)?ho(c,t,this._currenTime):fo(c,t,this._currenTime);this._automationEvents.push(l)}i!==void 0&&Cs(i)&&this._automationEvents.push(Ar(this.getValue(t),t)),i!==void 0&&Et(i)&&i.startTime+i.duration>t&&(this._automationEvents[this._automationEvents.length-1]=ca(new Float32Array([6,7]),i.startTime,t-i.startTime))}}else{const n=this._automationEvents.findIndex(o=>Bt(o)>t),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&Et(r)&&Bt(r)+r.duration>t)return!1;const i=An(e)?ho(e.value,e.endTime,this._currenTime):Is(e)?fo(e.value,t,this._currenTime):e;if(n===-1)this._automationEvents.push(i);else{if(Et(e)&&t+e.duration>Bt(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(n=>Bt(n)>e);if(t>1){const n=this._automationEvents.slice(t-1),r=n[0];Cs(r)&&n.unshift(Ar(Rs(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>Bt(o)>e),n=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Cs(i)&&(n===void 0||!jt(n)||n.insertTime>e))return la(e,Rs(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&oi(i)&&(n===void 0||!jt(n)))return i.value;if(i!==void 0&&Et(i)&&(n===void 0||!jt(n)||i.startTime+i.duration>e))return e<i.startTime+i.duration?jc(e,i):i.values[i.values.length-1];if(i!==void 0&&jt(i)&&(n===void 0||!jt(n)))return i.value;if(n!==void 0&&An(n)){const[o,a]=po(this._automationEvents,r,i,n,this._defaultValue);return mo(e,o,a,n)}if(n!==void 0&&Is(n)){const[o,a]=po(this._automationEvents,r,i,n,this._defaultValue);return _o(e,o,a,n)}return this._defaultValue}}const Gc=s=>({cancelTime:s,type:"cancelAndHold"}),zc=s=>({cancelTime:s,type:"cancelScheduledValues"}),Yc=(s,e)=>({endTime:e,type:"exponentialRampToValue",value:s}),Hc=(s,e)=>({endTime:e,type:"linearRampToValue",value:s}),Xc=(s,e,t)=>({startTime:e,target:s,timeConstant:t,type:"setTarget"}),Zc=()=>new DOMException("","AbortError"),Qc=s=>(e,t,[n,r,i],o)=>{s(e[r],[t,n,i],a=>a[0]===t&&a[1]===n,o)},Jc=s=>(e,t,n)=>{const r=[];for(let i=0;i<n.numberOfInputs;i+=1)r.push(new Set);s.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},Kc=s=>(e,t)=>{s.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Dn=new WeakSet,ua=new WeakMap,ai=new WeakMap,ha=new WeakMap,ci=new WeakMap,er=new WeakMap,da=new WeakMap,Nr=new WeakMap,Or=new WeakMap,Dr=new WeakMap,fa={construct(){return fa}},el=s=>{try{const e=new Proxy(s,fa);new e}catch{return!1}return!0},go=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,vo=(s,e)=>{const t=[];let n=s.replace(/^[\s]+/,""),r=n.match(go);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(go)}return[t.join(";"),n]},yo=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},wo=s=>{if(!el(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},tl=(s,e,t,n,r,i,o,a,c,l,u,h,d)=>{let p=0;return(f,m,g={credentials:"omit"})=>{const v=u.get(f);if(v!==void 0&&v.has(m))return Promise.resolve();const w=l.get(f);if(w!==void 0){const _=w.get(m);if(_!==void 0)return _}const C=i(f),S=C.audioWorklet===void 0?r(m).then(([_,y])=>{const[k,T]=vo(_,y),O=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return t(O)}).then(()=>{const _=d._AWGS.pop();if(_===void 0)throw new SyntaxError;n(C.currentTime,C.sampleRate,()=>_(class{},void 0,(y,k)=>{if(y.trim()==="")throw e();const T=Or.get(C);if(T!==void 0){if(T.has(y))throw e();wo(k),yo(k.parameterDescriptors),T.set(y,k)}else wo(k),yo(k.parameterDescriptors),Or.set(C,new Map([[y,k]]))},C.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(s(h,h))]).then(([[_,y],k])=>{const T=p+1;p=T;const[O,x]=vo(_,y),E=`${O};((AudioWorkletProcessor,registerProcessor)=>{${x}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,j=new Blob([E],{type:"application/javascript; charset=utf-8"}),V=URL.createObjectURL(j);return C.audioWorklet.addModule(V,g).then(()=>{if(a(C))return C;const B=o(C);return B.audioWorklet.addModule(V,g).then(()=>B)}).then(B=>{if(c===null)throw new SyntaxError;try{new c(B,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(V))});return w===void 0?l.set(f,new Map([[m,S]])):w.set(m,S),S.then(()=>{const _=u.get(f);_===void 0?u.set(f,new Set([m])):_.add(m)}).finally(()=>{const _=l.get(f);_!==void 0&&_.delete(m)}),S}},yt=(s,e)=>{const t=s.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},tr=(s,e)=>{const t=Array.from(s).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[n]=t;return s.delete(n),n},pa=(s,e,t,n)=>{const r=yt(s,e),i=tr(r,o=>o[0]===t&&o[1]===n);return r.size===0&&s.delete(e),i},ls=s=>yt(da,s),En=s=>{if(Dn.has(s))throw new Error("The AudioNode is already stored.");Dn.add(s),ls(s).forEach(e=>e(!0))},ma=s=>"port"in s,us=s=>{if(!Dn.has(s))throw new Error("The AudioNode is not stored.");Dn.delete(s),ls(s).forEach(e=>e(!1))},Er=(s,e)=>{!ma(s)&&e.every(t=>t.size===0)&&us(s)},nl=(s,e,t,n,r,i,o,a,c,l,u,h,d)=>{const p=new WeakMap;return(f,m,g,v,w)=>{const{activeInputs:C,passiveInputs:S}=i(m),{outputs:_}=i(f),y=a(f),k=T=>{const O=c(m),x=c(f);if(T){const N=pa(S,f,g,v);s(C,f,N,!1),!w&&!h(f)&&t(x,O,g,v),d(m)&&En(m)}else{const N=n(C,f,g,v);e(S,v,N,!1),!w&&!h(f)&&r(x,O,g,v);const b=o(m);if(b===0)u(m)&&Er(m,C);else{const D=p.get(m);D!==void 0&&clearTimeout(D),p.set(m,setTimeout(()=>{u(m)&&Er(m,C)},b*1e3))}}};return l(_,[m,g,v],T=>T[0]===m&&T[1]===g&&T[2]===v,!0)?(y.add(k),u(f)?s(C,f,[g,v,k],!0):e(S,v,[f,g,k],!0),!0):!1}},sl=s=>(e,t,[n,r,i],o)=>{const a=e.get(n);a===void 0?e.set(n,new Set([[r,t,i]])):s(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},rl=s=>(e,t)=>{const n=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(n),n.disconnect()};t.addEventListener("ended",r)},il=s=>(e,t)=>{s(e).add(t)},ol={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},al=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...ol,...c},h=n(l,u),d=i(l)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},He=(s,e)=>s.context===e,cl=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!He(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Ps=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Mt=()=>new DOMException("","IndexSizeError"),li=s=>{s.getChannelData=(e=>t=>{try{return e.call(s,t)}catch(n){throw n.code===12?Mt():n}})(s.getChannelData)},ll={numberOfChannels:1},ul=(s,e,t,n,r,i,o,a)=>{let c=null;return class _a{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:p}={...ll,...u};c===null&&(c=new r(1,1,44100));const f=n!==null&&e(i,i)?new n({length:h,numberOfChannels:d,sampleRate:p}):c.createBuffer(d,h,p);if(f.numberOfChannels===0)throw t();return typeof f.copyFromChannel!="function"?(o(f),li(f)):e(Ps,()=>Ps(f))||a(f),s.add(f),f}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===_a.prototype||s.has(u)}}},tt=-34028234663852886e22,Xe=-tt,Pt=s=>Dn.has(s),hl={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},dl=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),d={...hl,...u},p=r(h,d),f=o(h),m=f?e():null;super(l,!1,p,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=t(this,f,p.playbackRate,Xe,tt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){En(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Pt(this)&&us(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},fl=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=He(h,u);if(!d){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await s(u,l.playbackRate,h.playbackRate):await n(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},pl=s=>"playbackRate"in s,ml=s=>"frequency"in s&&"gain"in s,_l=s=>"offset"in s,gl=s=>!("frequency"in s)&&"gain"in s,vl=s=>"detune"in s&&"frequency"in s,yl=s=>"pan"in s,Ze=s=>yt(ua,s),hs=s=>yt(ha,s),Ir=(s,e)=>{const{activeInputs:t}=Ze(s);t.forEach(r=>r.forEach(([i])=>{e.includes(s)||Ir(i,[...e,s])}));const n=pl(s)?[s.playbackRate]:ma(s)?Array.from(s.parameters.values()):ml(s)?[s.Q,s.detune,s.frequency,s.gain]:_l(s)?[s.offset]:gl(s)?[s.gain]:vl(s)?[s.detune,s.frequency]:yl(s)?[s.pan]:[];for(const r of n){const i=hs(r);i!==void 0&&i.activeInputs.forEach(([o])=>Ir(o,e))}Pt(s)&&us(s)},ga=s=>{Ir(s.destination,[])},wl=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),Tl=(s,e,t,n,r,i,o,a,c)=>class extends s{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(f){throw f.code===12&&f.message==="sampleRate is not in range"?t():f}if(h===null)throw n();if(!wl(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/p:d==="interactive"||d===void 0?256/p:d==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(d*p/128)))*128/p,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const f=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",f)};h.addEventListener("statechange",f)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),ga(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},bl=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),d=o(h),p=r(h,u,d),f=d?e(a):null;super(l,!1,p,f),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Sl=s=>{const e=new WeakMap,t=async(n,r)=>{const i=r.destination;return e.set(r,i),await s(n,r,i),i};return{render(n,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(n,r)}}},Cl=(s,e,t,n,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const _=new Float32Array(1),y=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=o(l);let T=!1,O=[0,0,-1,0,1,0],x=[0,0,0];const N=()=>{if(T)return;T=!0;const j=n(l,256,9,0);j.onaudioprocess=({inputBuffer:V})=>{const B=[i(V,_,0),i(V,_,1),i(V,_,2),i(V,_,3),i(V,_,4),i(V,_,5)];B.some((z,U)=>z!==O[U])&&(u.setOrientation(...B),O=B);const J=[i(V,_,6),i(V,_,7),i(V,_,8)];J.some((z,U)=>z!==x[U])&&(u.setPosition(...J),x=J)},y.connect(j)},b=j=>V=>{V!==O[j]&&(O[j]=V,u.setOrientation(...O))},D=j=>V=>{V!==x[j]&&(x[j]=V,u.setPosition(...x))},E=(j,V,B)=>{const J=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V});J.connect(y,0,j),J.start(),Object.defineProperty(J.offset,"defaultValue",{get(){return V}});const z=s({context:c},k,J.offset,Xe,tt);return a(z,"value",U=>()=>U.call(z),U=>W=>{try{U.call(z,W)}catch(K){if(K.code!==9)throw K}N(),k&&B(W)}),z.cancelAndHoldAtTime=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.cancelAndHoldAtTime),z.cancelScheduledValues=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.cancelScheduledValues),z.exponentialRampToValueAtTime=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.exponentialRampToValueAtTime),z.linearRampToValueAtTime=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.linearRampToValueAtTime),z.setTargetAtTime=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.setTargetAtTime),z.setValueAtTime=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.setValueAtTime),z.setValueCurveAtTime=(U=>k?()=>{throw r()}:(...W)=>{const K=U.apply(z,W);return N(),K})(z.setValueCurveAtTime),z};return{forwardX:E(0,0,b(0)),forwardY:E(1,0,b(1)),forwardZ:E(2,-1,b(2)),positionX:E(6,0,D(0)),positionY:E(7,0,D(1)),positionZ:E(8,0,D(2)),upX:E(3,0,b(3)),upY:E(4,1,b(4)),upZ:E(5,0,b(5))}},{forwardX:d,forwardY:p,forwardZ:f,positionX:m,positionY:g,positionZ:v,upX:w,upY:C,upZ:S}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return p},get forwardZ(){return f},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return w},get upY(){return C},get upZ(){return S}}},Vs=s=>"context"in s,ds=s=>Vs(s[0]),vn=(s,e,t,n)=>{for(const r of s)if(t(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return s.add(e),!0},To=(s,e,[t,n],r)=>{vn(s,[e,t,n],i=>i[0]===e&&i[1]===t,r)},bo=(s,[e,t,n],r)=>{const i=s.get(e);i===void 0?s.set(e,new Set([[t,n]])):vn(i,[t,n],o=>o[0]===t,r)},Fn=s=>"inputs"in s,Fs=(s,e,t,n)=>{if(Fn(e)){const r=e.inputs[n];return s.connect(r,t,0),[r,t,0]}return s.connect(e,t,n),[e,t,n]},va=(s,e,t)=>{for(const n of s)if(n[0]===e&&n[1]===t)return s.delete(n),n;return null},kl=(s,e,t)=>tr(s,n=>n[0]===e&&n[1]===t),ya=(s,e)=>{if(!ls(s).delete(e))throw new Error("Missing the expected event listener.")},wa=(s,e,t)=>{const n=yt(s,e),r=tr(n,i=>i[0]===t);return n.size===0&&s.delete(e),r},qs=(s,e,t,n)=>{Fn(e)?s.disconnect(e.inputs[n],t,0):s.disconnect(e,t,n)},Se=s=>yt(ai,s),Hn=s=>yt(ci,s),un=s=>Nr.has(s),Ns=s=>!Dn.has(s),So=(s,e)=>new Promise(t=>{if(e!==null)t(!0);else{const n=s.createScriptProcessor(256,1,1),r=s.createGain(),i=s.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=s.createBufferSource();a.buffer=i,a.loop=!0,a.connect(n).connect(s.destination),a.connect(r),a.disconnect(r),n.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(s.destination)},a.start()}}),gr=(s,e)=>{const t=new Map;for(const n of s)for(const r of n){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((n,r)=>e(r,n))},Ws=s=>"context"in s,Al=s=>{const e=new Map;s.connect=(t=>(n,r=0,i=0)=>{const o=Ws(n)?t(n,r,i):t(n,r),a=e.get(n);return a===void 0?e.set(n,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(s.connect.bind(s)),s.disconnect=(t=>(n,r,i)=>{if(t.apply(s),n===void 0)e.clear();else if(typeof n=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==n);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(n))if(r===void 0)e.delete(n);else{const o=e.get(n);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(n):e.set(n,a)}}for(const[o,a]of e)a.forEach(c=>{Ws(o)?s.connect(o,c.output,c.input):s.connect(o,c.output)})})(s.disconnect)},xl=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=hs(e),{outputs:o}=Ze(s),a=ls(s),c=l=>{const u=Se(s),h=Hn(e);if(l){const d=wa(i,s,t);To(r,s,d,!1),!n&&!un(s)&&u.connect(h,t)}else{const d=kl(r,s,t);bo(i,d,!1),!n&&!un(s)&&u.disconnect(h,t)}};return vn(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),Pt(s)?To(r,s,[t,c],!0):bo(i,[s,t,c],!0),!0):!1},Ml=(s,e,t,n)=>{const{activeInputs:r,passiveInputs:i}=Ze(e),o=va(r[n],s,t);return o===null?[pa(i,s,t,n)[2],!1]:[o[2],!0]},Nl=(s,e,t)=>{const{activeInputs:n,passiveInputs:r}=hs(e),i=va(n,s,t);return i===null?[wa(r,s,t)[1],!1]:[i[2],!0]},ui=(s,e,t,n,r)=>{const[i,o]=Ml(s,t,n,r);if(i!==null&&(ya(s,i),o&&!e&&!un(s)&&qs(Se(s),Se(t),n,r)),Pt(t)){const{activeInputs:a}=Ze(t);Er(t,a)}},hi=(s,e,t,n)=>{const[r,i]=Nl(s,t,n);r!==null&&(ya(s,r),i&&!e&&!un(s)&&Se(s).disconnect(Hn(t),n))},Ol=(s,e)=>{const t=Ze(s),n=[];for(const r of t.outputs)ds(r)?ui(s,e,...r):hi(s,e,...r),n.push(r[0]);return t.outputs.clear(),n},Dl=(s,e,t)=>{const n=Ze(s),r=[];for(const i of n.outputs)i[1]===t&&(ds(i)?ui(s,e,...i):hi(s,e,...i),r.push(i[0]),n.outputs.delete(i));return r},El=(s,e,t,n,r)=>{const i=Ze(s);return Array.from(i.outputs).filter(o=>o[0]===t&&(n===void 0||o[1]===n)&&(r===void 0||o[2]===r)).map(o=>(ds(o)?ui(s,e,...o):hi(s,e,...o),i.outputs.delete(o),o[0]))},Il=(s,e,t,n,r,i,o,a,c,l,u,h,d,p,f,m)=>class extends l{constructor(v,w,C,S){super(C),this._context=v,this._nativeAudioNode=C;const _=u(v);h(_)&&t(So,()=>So(_,m))!==!0&&Al(C),ai.set(this,C),da.set(this,new Set),v.state!=="closed"&&w&&En(this),s(this,S,C)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,w=0,C=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const S=u(this._context),_=f(S);if(d(v)||p(v))throw i();if(Vs(v)){const T=Se(v);try{const x=Fs(this._nativeAudioNode,T,w,C),N=Ns(this);(_||N)&&this._nativeAudioNode.disconnect(...x),this.context.state!=="closed"&&!N&&Ns(v)&&En(v)}catch(x){throw x.code===12?i():x}if(e(this,v,w,C,_)){const x=c([this],v);gr(x,n(_))}return v}const y=Hn(v);if(y.name==="playbackRate"&&y.maxValue===1024)throw o();try{this._nativeAudioNode.connect(y,w),(_||Ns(this))&&this._nativeAudioNode.disconnect(y,w)}catch(T){throw T.code===12?i():T}if(xl(this,v,w,_)){const T=c([this],v);gr(T,n(_))}}disconnect(v,w,C){let S;const _=u(this._context),y=f(_);if(v===void 0)S=Ol(this,y);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw r();S=Dl(this,y,v)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||Vs(v)&&C!==void 0&&(C<0||C>=v.numberOfInputs))throw r();if(S=El(this,y,v,w,C),S.length===0)throw i()}for(const k of S){const T=c([this],k);gr(T,a)}}},Rl=(s,e,t,n,r,i,o,a,c,l,u,h,d)=>(p,f,m,g=null,v=null)=>{const w=new Uc(m.defaultValue),C=f?n(w):null,S={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(_){m.value=_,S.setValueAtTime(_,p.context.currentTime)},cancelAndHoldAtTime(_){if(typeof m.cancelAndHoldAtTime=="function")C===null&&w.flush(p.context.currentTime),w.add(r(_)),m.cancelAndHoldAtTime(_);else{const y=Array.from(w).pop();C===null&&w.flush(p.context.currentTime),w.add(r(_));const k=Array.from(w).pop();m.cancelScheduledValues(_),y!==k&&k!==void 0&&(k.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(k.value,k.endTime):k.type==="linearRampToValue"?m.linearRampToValueAtTime(k.value,k.endTime):k.type==="setValue"?m.setValueAtTime(k.value,k.startTime):k.type==="setValueCurve"&&m.setValueCurveAtTime(k.values,k.startTime,k.duration))}return S},cancelScheduledValues(_){return C===null&&w.flush(p.context.currentTime),w.add(i(_)),m.cancelScheduledValues(_),S},exponentialRampToValueAtTime(_,y){if(_===0)throw new RangeError;if(!Number.isFinite(y)||y<0)throw new RangeError;return C===null&&w.flush(p.context.currentTime),w.add(o(_,y)),m.exponentialRampToValueAtTime(_,y),S},linearRampToValueAtTime(_,y){return C===null&&w.flush(p.context.currentTime),w.add(a(_,y)),m.linearRampToValueAtTime(_,y),S},setTargetAtTime(_,y,k){return C===null&&w.flush(p.context.currentTime),w.add(c(_,y,k)),m.setTargetAtTime(_,y,k),S},setValueAtTime(_,y){return C===null&&w.flush(p.context.currentTime),w.add(l(_,y)),m.setValueAtTime(_,y),S},setValueCurveAtTime(_,y,k){const T=_ instanceof Float32Array?_:new Float32Array(_);if(h!==null&&h.name==="webkitAudioContext"){const O=y+k,x=p.context.sampleRate,N=Math.ceil(y*x),b=Math.floor(O*x),D=b-N,E=new Float32Array(D);for(let V=0;V<D;V+=1){const B=(T.length-1)/k*((N+V)/x-y),J=Math.floor(B),z=Math.ceil(B);E[V]=J===z?T[J]:(1-(B-J))*T[J]+(1-(z-B))*T[z]}C===null&&w.flush(p.context.currentTime),w.add(u(E,y,k)),m.setValueCurveAtTime(E,y,k);const j=b/x;j<O&&d(S,E[E.length-1],j),d(S,T[T.length-1],O)}else C===null&&w.flush(p.context.currentTime),w.add(u(T,y,k)),m.setValueCurveAtTime(T,y,k);return S}};return t.set(S,m),e.set(S,p),s(S,C),S},Pl=s=>({replay(e){for(const t of s)if(t.type==="exponentialRampToValue"){const{endTime:n,value:r}=t;e.exponentialRampToValueAtTime(r,n)}else if(t.type==="linearRampToValue"){const{endTime:n,value:r}=t;e.linearRampToValueAtTime(r,n)}else if(t.type==="setTarget"){const{startTime:n,target:r,timeConstant:i}=t;e.setTargetAtTime(r,n,i)}else if(t.type==="setValue"){const{startTime:n,value:r}=t;e.setValueAtTime(r,n)}else if(t.type==="setValueCurve"){const{duration:n,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,n)}else throw new Error("Can't apply an unknown automation.")}});class Ta{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Vl={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Fl=(s,e,t,n,r,i,o,a,c,l,u,h,d,p)=>class extends e{constructor(m,g,v){var w;const C=a(m),S=c(C),_=u({...Vl,...v});d(_);const y=Or.get(C),k=y?.get(g),T=S||C.state!=="closed"?C:(w=o(C))!==null&&w!==void 0?w:C,O=r(T,S?null:m.baseLatency,l,g,k,_),x=S?n(g,_,k):null;super(m,!0,O,x);const N=[];O.parameters.forEach((D,E)=>{const j=t(this,S,D);N.push([E,j])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new Ta(N),S&&s(C,this);const{activeInputs:b}=i(this);h(O,b)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?p(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Ls(s,e,t,n,r){if(typeof s.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),s.copyFromChannel(e[t],n,r);else{const i=s.getChannelData(n);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const ba=(s,e,t,n,r)=>{typeof s.copyToChannel=="function"?e[t].byteLength!==0&&s.copyToChannel(e[t],n,r):e[t].byteLength!==0&&s.getChannelData(n).set(e[t],r)},$s=(s,e)=>{const t=[];for(let n=0;n<s;n+=1){const r=[],i=typeof e=="number"?e:e[n];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},ql=(s,e)=>{const t=yt(Dr,s),n=Se(e);return yt(t,n)},Wl=async(s,e,t,n,r,i,o)=>{const a=e===null?Math.ceil(s.context.length/128)*128:e.length,c=n.channelCount*n.numberOfInputs,l=r.reduce((g,v)=>g+v,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Ze(s),d=await ql(t,s),p=$s(n.numberOfInputs,n.channelCount),f=$s(n.numberOfOutputs,r),m=Array.from(s.parameters.keys()).reduce((g,v)=>({...g,[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(n.numberOfInputs>0&&e!==null)for(let v=0;v<n.numberOfInputs;v+=1)for(let w=0;w<n.channelCount;w+=1)Ls(e,p[v],w,w,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},w)=>{Ls(e,m,v,c+w,g)});for(let v=0;v<n.numberOfInputs;v+=1)for(let w=0;w<r[v];w+=1)f[v][w].byteLength===0&&(f[v][w]=new Float32Array(128));try{const v=p.map((C,S)=>h.activeInputs[S].size===0?[]:C),w=o(g/t.sampleRate,t.sampleRate,()=>d.process(v,f,m));if(u!==null)for(let C=0,S=0;C<n.numberOfOutputs;C+=1){for(let _=0;_<r[C];_+=1)ba(u,f[C],_,S+_,g);S+=r[C]}if(!w)break}catch(v){s.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},Ll=(s,e,t,n,r,i,o,a,c,l,u,h,d,p,f,m)=>(g,v,w)=>{const C=new WeakMap;let S=null;const _=async(y,k)=>{let T=u(y),O=null;const x=He(T,k),N=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(h===null){const b=N.reduce((V,B)=>V+B,0),D=r(k,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),E=[];for(let V=0;V<y.numberOfOutputs;V+=1)E.push(n(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[V]}));const j=o(k,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});j.connect=e.bind(null,E),j.disconnect=c.bind(null,E),O=[D,E,j]}else x||(T=new h(k,g));if(C.set(k,O===null?T:O[2]),O!==null){if(S===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const B=y.channelCount*y.numberOfInputs,J=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,z=B+J;S=Wl(y,z===0?null:await(async()=>{const W=new d(z,Math.ceil(y.context.length/128)*128,k.sampleRate),K=[],xe=[];for(let ce=0;ce<v.numberOfInputs;ce+=1)K.push(o(W,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),xe.push(r(W,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const Me=await Promise.all(Array.from(y.parameters.values()).map(async ce=>{const ve=i(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ce.value});return await p(W,ce,ve.offset),ve})),ne=n(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,B+J)});for(let ce=0;ce<v.numberOfInputs;ce+=1){K[ce].connect(xe[ce]);for(let ve=0;ve<v.channelCount;ve+=1)xe[ce].connect(ne,ve,ce*v.channelCount+ve)}for(const[ce,ve]of Me.entries())ve.connect(ne,0,B+ce),ve.start(0);return ne.connect(W.destination),await Promise.all(K.map(ce=>f(y,W,ce))),m(W)})(),k,v,N,w,l)}const b=await S,D=t(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[E,j,V]=O;b!==null&&(D.buffer=b,D.start(0)),D.connect(E);for(let B=0,J=0;B<y.numberOfOutputs;B+=1){const z=j[B];for(let U=0;U<N[B];U+=1)E.connect(z,J+U,U);J+=N[B]}return V}if(x)for(const[b,D]of y.parameters.entries())await s(k,D,T.parameters.get(b));else for(const[b,D]of y.parameters.entries())await p(k,D,T.parameters.get(b));return await f(y,k,T),T};return{render(y,k){a(k,y);const T=C.get(k);return T!==void 0?Promise.resolve(T):_(y,k)}}},$l=(s,e,t,n,r,i,o,a,c,l,u,h,d,p,f,m,g,v,w,C)=>class extends f{constructor(_,y){super(_,y),this._nativeContext=_,this._audioWorklet=s===void 0?void 0:{addModule:(k,T)=>s(this,k,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(_,y,k){return new t({length:y,numberOfChannels:_,sampleRate:k})}createBufferSource(){return new n(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(_=1){return new u(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(_,y){return new p(this,{feedback:y,feedforward:_})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(_,y,k={disableNormalization:!1}){return new v(this,{...k,imag:y,real:_})}createStereoPanner(){return new w(this)}createWaveShaper(){return new C(this)}decodeAudioData(_,y,k){return l(this._nativeContext,_).then(T=>(typeof y=="function"&&y(T),T),T=>{throw typeof k=="function"&&k(T),T})}},Bl={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},jl=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),d={...Bl,...u},p=r(h,d),f=o(h),m=f?t():null;super(l,!1,p,m),this._Q=e(this,f,p.Q,Xe,tt),this._detune=e(this,f,p.detune,1200*Math.log2(Xe),-1200*Math.log2(Xe)),this._frequency=e(this,f,p.frequency,l.sampleRate/2,0),this._gain=e(this,f,p.gain,40*Math.log10(Xe),tt),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(d){throw d.code===11?n():d}if(l.length!==u.length||u.length!==h.length)throw n()}},Ul=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=He(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)):(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Gl=(s,e)=>(t,n)=>{const r=e.get(t);if(r!==void 0)return r;const i=s.get(t);if(i!==void 0)return i;try{const o=n();return o instanceof Promise?(s.set(t,o),o.catch(()=>!1).then(a=>(s.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},zl={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Yl=(s,e,t,n,r)=>class extends s{constructor(o,a){const c=n(o),l={...zl,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},Hl=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!He(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Xl={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Zl=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u=i({...Xl,...c}),h=t(l,u),d=r(l)?e():null;super(a,!1,h,d)}},Ql=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!He(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=s(o,l)}return n.set(o,a),await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Jl=s=>(e,t,n)=>s(t,e,n),Kl=s=>(e,t,n=0,r=0)=>{const i=e[n];if(i===void 0)throw s();return Ws(t)?i.connect(t,0,r):i.connect(t,0)},eu=s=>(e,t)=>{const n=s(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}},tu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},nu=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...tu,...l},d=n(u,h),p=i(u),f=p?t():null;super(c,!1,d,f),this._constantSourceNodeRenderer=f,this._nativeConstantSourceNode=d,this._offset=e(this,p,d.offset,Xe,tt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){En(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Pt(this)&&us(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},su=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const d=He(h,u);if(!d){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await s(u,l.offset,h.offset):await n(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},ru=s=>e=>(s[0]=e,s[0]),iu={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ou=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u={...iu,...c},h=t(l,u),p=r(l)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,44100),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},au=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!He(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=s(o,l)}return n.set(o,a),Fn(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},cu=(s,e)=>(t,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,n,r)}catch(i){throw i.name==="SyntaxError"?s():i}},lu=()=>new DOMException("","DataCloneError"),Co=s=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(n=>{const r=()=>{t.onmessage=null,e.close(),t.close(),n()};t.onmessage=()=>r();try{e.postMessage(s,[s])}finally{r()}})},uu=(s,e,t,n,r,i,o,a,c,l,u)=>(h,d)=>{const p=o(h)?h:i(h);if(r.has(d)){const f=t();return Promise.reject(f)}try{r.add(d)}catch{}return e(c,()=>c(p))?p.decodeAudioData(d).then(f=>(Co(d).catch(()=>{}),e(a,()=>a(f))||u(f),s.add(f),f)):new Promise((f,m)=>{const g=async()=>{try{await Co(d)}catch{}},v=w=>{m(w),g()};try{p.decodeAudioData(d,w=>{typeof w.copyFromChannel!="function"&&(l(w),li(w)),s.add(w),g().then(()=>f(w))},w=>{v(w===null?n():w)})}catch(w){v(w)}})},hu=(s,e,t,n,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(u===l){if(e.delete(c),!d&&o(c)){const p=n(c),{outputs:f}=t(c);for(const m of f)if(ds(m)){const g=n(m[0]);s(p,g,m[1],m[2])}else{const g=r(m[0]);p.connect(g,m[1])}}}else e.set(c,u-l)},du={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},fu=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...du,...l},d=n(u,h),p=i(u),f=p?t(h.maxDelayTime):null;super(c,!1,d,f),this._delayTime=e(this,p,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},pu=(s,e,t,n,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=He(u,l);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,d)}return o.set(l,u),h?await s(l,c.delayTime,u.delayTime):await n(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},mu=s=>(e,t,n,r)=>s(e[r],i=>i[0]===t&&i[1]===n),_u=s=>(e,t)=>{s(e).delete(t)},gu=s=>"delayTime"in s,vu=(s,e,t)=>function n(r,i){const o=Vs(i)?i:t(s,i);if(gu(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>n([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},ks=(s,e,t)=>{const n=e[t];if(n===void 0)throw s();return n},yu=s=>(e,t=void 0,n=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?ks(s,e,t).disconnect():Ws(t)?n===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?ks(s,e,n).disconnect(t,0):ks(s,e,n).disconnect(t,0,r):n===void 0?e.forEach(i=>i.disconnect(t)):ks(s,e,n).disconnect(t,0),wu={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Tu=(s,e,t,n,r,i,o,a)=>class extends s{constructor(l,u){const h=i(l),d={...wu,...u},p=n(h,d),f=o(h),m=f?t():null;super(l,!1,p,m),this._attack=e(this,f,p.attack),this._knee=e(this,f,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,f,p.ratio),this._release=e(this,f,p.release),this._threshold=e(this,f,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},bu=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=He(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)):(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Su=()=>new DOMException("","EncodingError"),Cu=s=>e=>new Promise((t,n)=>{if(s===null){n(new SyntaxError);return}const r=s.document.head;if(r===null)n(new SyntaxError);else{const i=s.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=s.onerror,l=()=>{s.onerror=c,URL.revokeObjectURL(a)};s.onerror=(u,h,d,p,f)=>{if(h===a||h===s.location.href&&d===1&&p===1)return l(),n(f),!1;if(c!==null)return c(u,h,d,p,f)},i.onerror=()=>{l(),n(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),ku=s=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,n,r){if(n!==null){let i=this._listeners.get(n);i===void 0&&(i=s(this,n),typeof n=="function"&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,n,r){const i=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},Au=s=>(e,t,n)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},xu=s=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw s()},Mu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Nu=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...Mu,...c},h=n(l,u),d=i(l),p=d?t():null;super(a,!1,h,p),this._gain=e(this,d,h.gain,Xe,tt)}get gain(){return this._gain}},Ou=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=He(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await s(c,a.gain,l.gain):await n(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Du=(s,e)=>t=>e(s,t),Eu=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Iu=s=>e=>{var t;return(t=s.get(e))!==null&&t!==void 0?t:0},Ru=s=>e=>{const t=s(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Pu=s=>e=>s.get(e),$e=()=>new DOMException("","InvalidStateError"),Vu=s=>e=>{const t=s.get(e);if(t===void 0)throw $e();return t},Fu=(s,e)=>t=>{let n=s.get(t);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),s.set(t,n),n},qu=s=>e=>{const t=s.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},nr=()=>new DOMException("","InvalidAccessError"),Wu=s=>{s.getFrequencyResponse=(e=>(t,n,r)=>{if(t.length!==n.length||n.length!==r.length)throw nr();return e.call(s,t,n,r)})(s.getFrequencyResponse)},Lu={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$u=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=n(a),u=r(l),h={...Lu,...c},d=e(l,u?null:a.baseLatency,h),p=u?t(h.feedback,h.feedforward):null;super(a,!1,d,p),Wu(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Sa=(s,e,t,n,r,i,o,a,c,l,u)=>{const h=l.length;let d=a;for(let p=0;p<h;p+=1){let f=t[0]*l[p];for(let m=1;m<r;m+=1){const g=d-m&c-1;f+=t[m]*i[g],f-=s[m]*o[g]}for(let m=r;m<n;m+=1)f+=t[m]*i[d-m&c-1];for(let m=r;m<e;m+=1)f-=s[m]*o[d-m&c-1];i[d]=l[p],o[d]=f,d=d+1&c-1,u[p]=f}return d},Bu=(s,e,t,n)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=n instanceof Float64Array?n:new Float64Array(n),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let f=0;f<o;f+=1)i[f]/=r[0];for(let f=1;f<a;f+=1)r[f]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),d=e.createBuffer(s.numberOfChannels,s.length,s.sampleRate),p=s.numberOfChannels;for(let f=0;f<p;f+=1){const m=s.getChannelData(f),g=d.getChannelData(f);u.fill(0),h.fill(0),Sa(r,o,i,a,c,u,h,0,l,m,g)}return d},ju=(s,e,t,n,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let d=null,p=e(u);const f=He(p,h);if(h.createIIRFilter===void 0?d=s(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(p=h.createIIRFilter(o,i)),a.set(h,d===null?p:d),d!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await n(u,g,g.destination);const v=await r(g);return Bu(v,h,i,o)})()}const m=await c;return d.buffer=m,d.start(0),d}return await n(u,h,p),p};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},Uu=(s,e,t,n,r,i)=>o=>(a,c)=>{const l=s.get(a);if(l===void 0){if(!o&&i(a)){const u=n(a),{outputs:h}=t(a);for(const d of h)if(ds(d)){const p=n(d[0]);e(u,p,d[1],d[2])}else{const p=r(d[0]);u.disconnect(p,d[1])}}s.set(a,c)}else s.set(a,l+c)},Gu=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},zu=(s,e)=>t=>s.has(t)||e(t),Yu=(s,e)=>t=>s.has(t)||e(t),Hu=(s,e)=>t=>{const n=s.get(t);return e(n)||e(t)},Xu=s=>e=>s!==null&&e instanceof s,Zu=s=>e=>s!==null&&typeof s.AudioNode=="function"&&e instanceof s.AudioNode,Qu=s=>e=>s!==null&&typeof s.AudioParam=="function"&&e instanceof s.AudioParam,Ju=(s,e)=>t=>s(t)||e(t),Ku=s=>e=>s!==null&&e instanceof s,eh=s=>s!==null&&s.isSecureContext,th=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},nh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},sh=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i);if(n(a))throw new TypeError;const c={...nh,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},rh=(s,e,t,n)=>class extends s{constructor(i,o){const a=t(i),c=e(a,o);if(n(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ih=(s,e,t)=>class extends s{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},oh=(s,e,t,n,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,er.set(this,a),n(a)&&r.set(a,new Set),this._destination=new s(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Xn=s=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=s.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},ah=(s,e)=>(t,n,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),s(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&n(),a;o.call(t,a,c),s(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&n()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const d of i)d[0]===a&&(c===void 0||d[1]===c)&&(l===void 0||d[2]===l)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},ke=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t]&&(s[t]=n)},We=(s,e)=>{ke(s,e,"channelCount"),ke(s,e,"channelCountMode"),ke(s,e,"channelInterpretation")},ko=s=>typeof s.getFloatTimeDomainData=="function",ch=s=>{s.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);s.getByteTimeDomainData(t);const n=Math.max(t.length,s.fftSize);for(let r=0;r<n;r+=1)e[r]=(t[r]-128)*.0078125;return e}},lh=(s,e)=>(t,n)=>{const r=t.createAnalyser();if(We(r,n),!(n.maxDecibels>n.minDecibels))throw e();return ke(r,n,"fftSize"),ke(r,n,"maxDecibels"),ke(r,n,"minDecibels"),ke(r,n,"smoothingTimeConstant"),s(ko,()=>ko(r))||ch(r),r},uh=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,De=(s,e,t)=>{const n=e[t];n!==void 0&&n!==s[t].value&&(s[t].value=n)},hh=s=>{s.start=(e=>{let t=!1;return(n=0,r=0,i)=>{if(t)throw $e();e.call(s,n,r,i),t=!0}})(s.start)},di=s=>{s.start=(e=>(t=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(s,t,n,r)})(s.start)},fi=s=>{s.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(s,t)})(s.stop)},dh=(s,e,t,n,r,i,o,a,c,l,u)=>(h,d)=>{const p=h.createBufferSource();return We(p,d),De(p,d,"playbackRate"),ke(p,d,"buffer"),ke(p,d,"loop"),ke(p,d,"loopEnd"),ke(p,d,"loopStart"),e(t,()=>t(h))||hh(p),e(n,()=>n(h))||c(p),e(r,()=>r(h))||l(p,h),e(i,()=>i(h))||di(p),e(o,()=>o(h))||u(p,h),e(a,()=>a(h))||fi(p),s(h,p),p},fh=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,ph=(s,e)=>(t,n,r)=>{const i=t.destination;if(i.channelCount!==n)try{i.channelCount=n}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:n});const o=s(t,{channelCount:n,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},mh=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,_h=s=>{const{port1:e}=new MessageChannel;try{e.postMessage(s)}finally{e.close()}},gh=(s,e,t,n,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),d=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>p,set:f=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof f=="function"?f:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(f=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const v=d.get(m[1]);v!==void 0?m[1]=v:(m[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),g(w)):g(new ErrorEvent(m[0],{...w}))},d.set(g,m[1]))}}return f.call(h,"error",m[1],m[2]),f.call(h,...m)})(h.addEventListener),h.removeEventListener=(f=>(...m)=>{if(m[0]==="processorerror"){const g=d.get(m[1]);g!==void 0&&(d.delete(m[1]),m[1]=g)}return f.call(h,"error",m[1],m[2]),f.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const f=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(f).connect(i.destination),r(h,()=>f.disconnect(),()=>f.connect(i.destination))}return h}catch(h){throw h.code===11?n():h}if(l===void 0)throw n();return _h(u),e(i,o,l,u)},Ca=(s,e)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*e))))),vh=s=>new Promise((e,t)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:i})=>{n.close(),r.close(),e(i)},n.onmessageerror=({data:i})=>{n.close(),r.close(),t(i)},r.postMessage(s)}),yh=async(s,e)=>{const t=await vh(e);return new s(t)},wh=(s,e,t,n)=>{let r=Dr.get(s);r===void 0&&(r=new WeakMap,Dr.set(s,r));const i=yh(t,n);return r.set(e,i),i},Th=(s,e,t,n,r,i,o,a,c,l,u,h,d)=>(p,f,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(L=>L<1))throw c();if(v.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();const w=g.channelCount*g.numberOfInputs,C=v.reduce((L,Q)=>L+Q,0),S=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(w+S>6||C>6)throw c();const _=new MessageChannel,y=[],k=[];for(let L=0;L<g.numberOfInputs;L+=1)y.push(o(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),k.push(r(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const T=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:L,maxValue:Q,minValue:Ne,name:le}of m.parameterDescriptors){const oe=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[le]!==void 0?g.parameterData[le]:L===void 0?0:L});Object.defineProperties(oe.offset,{defaultValue:{get:()=>L===void 0?0:L},maxValue:{get:()=>Q===void 0?Xe:Q},minValue:{get:()=>Ne===void 0?tt:Ne}}),T.push(oe)}const O=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+S)}),x=Ca(f,p.sampleRate),N=a(p,x,w+S,Math.max(1,C)),b=r(p,{channelCount:Math.max(1,C),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,C)}),D=[];for(let L=0;L<g.numberOfOutputs;L+=1)D.push(n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[L]}));for(let L=0;L<g.numberOfInputs;L+=1){y[L].connect(k[L]);for(let Q=0;Q<g.channelCount;Q+=1)k[L].connect(O,Q,L*g.channelCount+Q)}const E=new Ta(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:L},Q)=>{const Ne=T[Q];return Ne.connect(O,0,w+Q),Ne.start(0),[L,Ne.offset]}));O.connect(N);let j=g.channelInterpretation,V=null;const B=g.numberOfOutputs===0?[N]:D,J={get bufferSize(){return x},get channelCount(){return g.channelCount},set channelCount(L){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(L){throw t()},get channelInterpretation(){return j},set channelInterpretation(L){for(const Q of y)Q.channelInterpretation=L;j=L},get context(){return N.context},get inputs(){return y},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return V},set onprocessorerror(L){typeof V=="function"&&J.removeEventListener("processorerror",V),V=typeof L=="function"?L:null,typeof V=="function"&&J.addEventListener("processorerror",V)},get parameters(){return E},get port(){return _.port2},addEventListener(...L){return N.addEventListener(L[0],L[1],L[2])},connect:s.bind(null,B),disconnect:l.bind(null,B),dispatchEvent(...L){return N.dispatchEvent(L[0])},removeEventListener(...L){return N.removeEventListener(L[0],L[1],L[2])}},z=new Map;_.port1.addEventListener=(L=>(...Q)=>{if(Q[0]==="message"){const Ne=typeof Q[1]=="function"?Q[1]:typeof Q[1]=="object"&&Q[1]!==null&&typeof Q[1].handleEvent=="function"?Q[1].handleEvent:null;if(Ne!==null){const le=z.get(Q[1]);le!==void 0?Q[1]=le:(Q[1]=oe=>{u(p.currentTime,p.sampleRate,()=>Ne(oe))},z.set(Ne,Q[1]))}}return L.call(_.port1,Q[0],Q[1],Q[2])})(_.port1.addEventListener),_.port1.removeEventListener=(L=>(...Q)=>{if(Q[0]==="message"){const Ne=z.get(Q[1]);Ne!==void 0&&(z.delete(Q[1]),Q[1]=Ne)}return L.call(_.port1,Q[0],Q[1],Q[2])})(_.port1.removeEventListener);let U=null;Object.defineProperty(_.port1,"onmessage",{get:()=>U,set:L=>{typeof U=="function"&&_.port1.removeEventListener("message",U),U=typeof L=="function"?L:null,typeof U=="function"&&(_.port1.addEventListener("message",U),_.port1.start())}}),m.prototype.port=_.port1;let W=null;wh(p,J,m,g).then(L=>W=L);const xe=$s(g.numberOfInputs,g.channelCount),Me=$s(g.numberOfOutputs,v),ne=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((L,{name:Q})=>({...L,[Q]:new Float32Array(128)}),{});let ce=!0;const ve=()=>{g.numberOfOutputs>0&&N.disconnect(b);for(let L=0,Q=0;L<g.numberOfOutputs;L+=1){const Ne=D[L];for(let le=0;le<v[L];le+=1)b.disconnect(Ne,Q+le,le);Q+=v[L]}},Y=new Map;N.onaudioprocess=({inputBuffer:L,outputBuffer:Q})=>{if(W!==null){const Ne=h(J);for(let le=0;le<x;le+=128){for(let oe=0;oe<g.numberOfInputs;oe+=1)for(let he=0;he<g.channelCount;he+=1)Ls(L,xe[oe],he,he,le);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:oe},he)=>{Ls(L,ne,oe,w+he,le)});for(let oe=0;oe<g.numberOfInputs;oe+=1)for(let he=0;he<v[oe];he+=1)Me[oe][he].byteLength===0&&(Me[oe][he]=new Float32Array(128));try{const oe=xe.map((de,lt)=>{if(Ne[lt].size>0)return Y.set(lt,x/128),de;const sn=Y.get(lt);return sn===void 0?[]:(de.every(jn=>jn.every($t=>$t===0))&&(sn===1?Y.delete(lt):Y.set(lt,sn-1)),de)});ce=u(p.currentTime+le/p.sampleRate,p.sampleRate,()=>W.process(oe,Me,ne));for(let de=0,lt=0;de<g.numberOfOutputs;de+=1){for(let ut=0;ut<v[de];ut+=1)ba(Q,Me[de],ut,lt+ut,le);lt+=v[de]}}catch(oe){ce=!1,J.dispatchEvent(new ErrorEvent("processorerror",{colno:oe.colno,filename:oe.filename,lineno:oe.lineno,message:oe.message}))}if(!ce){for(let oe=0;oe<g.numberOfInputs;oe+=1){y[oe].disconnect(k[oe]);for(let he=0;he<g.channelCount;he+=1)k[le].disconnect(O,he,oe*g.channelCount+he)}if(m.parameterDescriptors!==void 0){const oe=m.parameterDescriptors.length;for(let he=0;he<oe;he+=1){const de=T[he];de.disconnect(O,0,w+he),de.stop()}}O.disconnect(N),N.onaudioprocess=null,Be?ve():Ge();break}}}};let Be=!1;const je=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),it=()=>N.connect(je).connect(p.destination),Ge=()=>{N.disconnect(je),je.disconnect()},mt=()=>{if(ce){Ge(),g.numberOfOutputs>0&&N.connect(b);for(let L=0,Q=0;L<g.numberOfOutputs;L+=1){const Ne=D[L];for(let le=0;le<v[L];le+=1)b.connect(Ne,Q+le,le);Q+=v[L]}}Be=!0},Lt=()=>{ce&&(it(),ve()),Be=!1};return it(),d(J,mt,Lt)},ka=(s,e)=>{const t=s.createBiquadFilter();return We(t,e),De(t,e,"Q"),De(t,e,"detune"),De(t,e,"frequency"),De(t,e,"gain"),ke(t,e,"type"),t},bh=(s,e)=>(t,n)=>{const r=t.createChannelMerger(n.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&e(t,r),We(r,n),r},Sh=s=>{const e=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw $e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw $e()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw $e()}})},fs=(s,e)=>{const t=s.createChannelSplitter(e.numberOfOutputs);return We(t,e),Sh(t),t},Ch=(s,e,t,n,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return We(a,o),De(a,o,"offset"),e(n,()=>n(i))||di(a),e(r,()=>r(i))||fi(a),s(i,a),a},qn=(s,e)=>(s.connect=e.connect.bind(e),s.disconnect=e.disconnect.bind(e),s),kh=(s,e,t,n)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(f){l.channelCount=f},get channelCountMode(){return l.channelCountMode},set channelCountMode(f){l.channelCountMode=f},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(f){l.channelInterpretation=f},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(f){c.onended=f},addEventListener(...f){return c.addEventListener(f[0],f[1],f[2])},dispatchEvent(...f){return c.dispatchEvent(f[0])},removeEventListener(...f){return c.removeEventListener(f[0],f[1],f[2])},start(f=0){c.start.call(c,f)},stop(f=0){c.stop.call(c,f)}},d=()=>c.connect(l),p=()=>c.disconnect(l);return s(r,c),n(qn(h,l),d,p)},Ah=(s,e)=>(t,n)=>{const r=t.createConvolver();if(We(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),ke(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw s();return i.call(r,o)}),n.channelCountMode==="max"))throw s();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw s();return i.call(r,o)}),r},Aa=(s,e)=>{const t=s.createDelay(e.maxDelayTime);return We(t,e),De(t,e,"delayTime"),t},xh=s=>(e,t)=>{const n=e.createDynamicsCompressor();if(We(n,t),t.channelCount>2||t.channelCountMode==="max")throw s();return De(n,t,"attack"),De(n,t,"knee"),De(n,t,"ratio"),De(n,t,"release"),De(n,t,"threshold"),n},rt=(s,e)=>{const t=s.createGain();return We(t,e),De(t,e,"gain"),t},Mh=s=>(e,t,n)=>{if(e.createIIRFilter===void 0)return s(e,t,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return We(r,n),r};function Nh(s,e){const t=e[0]*e[0]+e[1]*e[1];return[(s[0]*e[0]+s[1]*e[1])/t,(s[1]*e[0]-s[0]*e[1])/t]}function Oh(s,e){return[s[0]*e[0]-s[1]*e[1],s[0]*e[1]+s[1]*e[0]]}function Ao(s,e){let t=[0,0];for(let n=s.length-1;n>=0;n-=1)t=Oh(t,e),t[0]+=s[n];return t}const Dh=(s,e,t,n)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Ca(i,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),f=d.length,m=p.length,g=Math.min(f,m);if(f===0||f>20)throw n();if(d[0]===0)throw e();if(m===0||m>20)throw n();if(p[0]===0)throw e();if(d[0]!==1){for(let T=0;T<m;T+=1)p[T]/=d[0];for(let T=1;T<f;T+=1)d[T]/=d[0]}const v=t(r,h,o,o);v.channelCount=o,v.channelCountMode=a,v.channelInterpretation=c;const w=32,C=[],S=[],_=[];for(let T=0;T<o;T+=1){C.push(0);const O=new Float32Array(w),x=new Float32Array(w);O.fill(0),x.fill(0),S.push(O),_.push(x)}v.onaudioprocess=T=>{const O=T.inputBuffer,x=T.outputBuffer,N=O.numberOfChannels;for(let b=0;b<N;b+=1){const D=O.getChannelData(b),E=x.getChannelData(b);C[b]=Sa(d,f,p,m,g,S[b],_[b],C[b],w,D,E)}};const y=r.sampleRate/2;return qn({get bufferSize(){return h},get channelCount(){return v.channelCount},set channelCount(T){v.channelCount=T},get channelCountMode(){return v.channelCountMode},set channelCountMode(T){v.channelCountMode=T},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(T){v.channelInterpretation=T},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...T){return v.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return v.dispatchEvent(T[0])},getFrequencyResponse(T,O,x){if(T.length!==O.length||O.length!==x.length)throw s();const N=T.length;for(let b=0;b<N;b+=1){const D=-Math.PI*(T[b]/y),E=[Math.cos(D),Math.sin(D)],j=Ao(p,E),V=Ao(d,E),B=Nh(j,V);O[b]=Math.sqrt(B[0]*B[0]+B[1]*B[1]),x[b]=Math.atan2(B[1],B[0])}},removeEventListener(...T){return v.removeEventListener(T[0],T[1],T[2])}},v)},Eh=(s,e)=>s.createMediaElementSource(e.mediaElement),Ih=(s,e)=>{const t=s.createMediaStreamDestination();return We(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},Rh=(s,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const n=t.slice(0,1),r=s.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},Ph=(s,e)=>(t,{mediaStreamTrack:n})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(n);const r=new MediaStream([n]),i=t.createMediaStreamSource(r);if(n.kind!=="audio")throw s();if(e(t))throw new TypeError;return i},Vh=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,Fh=(s,e,t,n,r,i)=>(o,a)=>{const c=o.createOscillator();return We(c,a),De(c,a,"detune"),De(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):ke(c,a,"type"),e(t,()=>t(o))||di(c),e(n,()=>n(o))||i(c,o),e(r,()=>r(o))||fi(c),s(o,c),c},qh=s=>(e,t)=>{const n=e.createPanner();return n.orientationX===void 0?s(e,t):(We(n,t),De(n,t,"orientationX"),De(n,t,"orientationY"),De(n,t,"orientationZ"),De(n,t,"positionX"),De(n,t,"positionY"),De(n,t,"positionZ"),ke(n,t,"coneInnerAngle"),ke(n,t,"coneOuterAngle"),ke(n,t,"coneOuterGain"),ke(n,t,"distanceModel"),ke(n,t,"maxDistance"),ke(n,t,"panningModel"),ke(n,t,"refDistance"),ke(n,t,"rolloffFactor"),n)},Wh=(s,e,t,n,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:f,maxDistance:m,orientationX:g,orientationY:v,orientationZ:w,panningModel:C,positionX:S,positionY:_,positionZ:y,refDistance:k,rolloffFactor:T,...O})=>{const x=u.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw o();We(x,O);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},b=t(u,{...N,channelInterpretation:"speakers",numberOfInputs:6}),D=n(u,{...O,gain:1}),E=n(u,{...N,gain:1}),j=n(u,{...N,gain:0}),V=n(u,{...N,gain:0}),B=n(u,{...N,gain:0}),J=n(u,{...N,gain:0}),z=n(u,{...N,gain:0}),U=r(u,256,6,1),W=i(u,{...N,curve:new Float32Array([1,1]),oversample:"none"});let K=[g,v,w],xe=[S,_,y];const Me=new Float32Array(1);U.onaudioprocess=({inputBuffer:Y})=>{const Be=[c(Y,Me,0),c(Y,Me,1),c(Y,Me,2)];Be.some((it,Ge)=>it!==K[Ge])&&(x.setOrientation(...Be),K=Be);const je=[c(Y,Me,3),c(Y,Me,4),c(Y,Me,5)];je.some((it,Ge)=>it!==xe[Ge])&&(x.setPosition(...je),xe=je)},Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0});const ne={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(Y){if(Y>2)throw o();D.channelCount=Y,x.channelCount=Y},get channelCountMode(){return x.channelCountMode},set channelCountMode(Y){if(Y==="max")throw o();D.channelCountMode=Y,x.channelCountMode=Y},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(Y){D.channelInterpretation=Y,x.channelInterpretation=Y},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(Y){x.coneInnerAngle=Y},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(Y){x.coneOuterAngle=Y},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(Y){if(Y<0||Y>1)throw e();x.coneOuterGain=Y},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(Y){x.distanceModel=Y},get inputs(){return[D]},get maxDistance(){return x.maxDistance},set maxDistance(Y){if(Y<0)throw new RangeError;x.maxDistance=Y},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return E.gain},get orientationY(){return j.gain},get orientationZ(){return V.gain},get panningModel(){return x.panningModel},set panningModel(Y){x.panningModel=Y},get positionX(){return B.gain},get positionY(){return J.gain},get positionZ(){return z.gain},get refDistance(){return x.refDistance},set refDistance(Y){if(Y<0)throw new RangeError;x.refDistance=Y},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(Y){if(Y<0)throw new RangeError;x.rolloffFactor=Y},addEventListener(...Y){return D.addEventListener(Y[0],Y[1],Y[2])},dispatchEvent(...Y){return D.dispatchEvent(Y[0])},removeEventListener(...Y){return D.removeEventListener(Y[0],Y[1],Y[2])}};h!==ne.coneInnerAngle&&(ne.coneInnerAngle=h),d!==ne.coneOuterAngle&&(ne.coneOuterAngle=d),p!==ne.coneOuterGain&&(ne.coneOuterGain=p),f!==ne.distanceModel&&(ne.distanceModel=f),m!==ne.maxDistance&&(ne.maxDistance=m),g!==ne.orientationX.value&&(ne.orientationX.value=g),v!==ne.orientationY.value&&(ne.orientationY.value=v),w!==ne.orientationZ.value&&(ne.orientationZ.value=w),C!==ne.panningModel&&(ne.panningModel=C),S!==ne.positionX.value&&(ne.positionX.value=S),_!==ne.positionY.value&&(ne.positionY.value=_),y!==ne.positionZ.value&&(ne.positionZ.value=y),k!==ne.refDistance&&(ne.refDistance=k),T!==ne.rolloffFactor&&(ne.rolloffFactor=T),(K[0]!==1||K[1]!==0||K[2]!==0)&&x.setOrientation(...K),(xe[0]!==0||xe[1]!==0||xe[2]!==0)&&x.setPosition(...xe);const ce=()=>{D.connect(x),s(D,W,0,0),W.connect(E).connect(b,0,0),W.connect(j).connect(b,0,1),W.connect(V).connect(b,0,2),W.connect(B).connect(b,0,3),W.connect(J).connect(b,0,4),W.connect(z).connect(b,0,5),b.connect(U).connect(u.destination)},ve=()=>{D.disconnect(x),a(D,W,0,0),W.disconnect(E),E.disconnect(b),W.disconnect(j),j.disconnect(b),W.disconnect(V),V.disconnect(b),W.disconnect(B),B.disconnect(b),W.disconnect(J),J.disconnect(b),W.disconnect(z),z.disconnect(b),b.disconnect(U),U.disconnect(u.destination)};return l(qn(ne,x),ce,ve)},Lh=s=>(e,{disableNormalization:t,imag:n,real:r})=>{const i=n instanceof Float32Array?n:new Float32Array(n),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(n).length<2)throw s();return a},ps=(s,e,t,n)=>s.createScriptProcessor(e,t,n),$h=(s,e)=>(t,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return s(t,n);const i=t.createStereoPanner();return We(i,n),De(i,n,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},Bh=(s,e,t,n,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(f,m,g,v)=>{const w=new Float32Array(16385),C=new Float32Array(16385);for(let O=0;O<16385;O+=1){const x=O/16384*c;w[O]=Math.cos(x),C[O]=Math.sin(x)}const S=t(f,{...l,gain:0}),_=n(f,{...u,curve:w}),y=n(f,{...u,curve:a}),k=t(f,{...l,gain:0}),T=n(f,{...u,curve:C});return{connectGraph(){m.connect(S),m.connect(y.inputs===void 0?y:y.inputs[0]),m.connect(k),y.connect(g),g.connect(_.inputs===void 0?_:_.inputs[0]),g.connect(T.inputs===void 0?T:T.inputs[0]),_.connect(S.gain),T.connect(k.gain),S.connect(v,0,0),k.connect(v,0,1)},disconnectGraph(){m.disconnect(S),m.disconnect(y.inputs===void 0?y:y.inputs[0]),m.disconnect(k),y.disconnect(g),g.disconnect(_.inputs===void 0?_:_.inputs[0]),g.disconnect(T.inputs===void 0?T:T.inputs[0]),_.disconnect(S.gain),T.disconnect(k.gain),S.disconnect(v,0,0),k.disconnect(v,0,1)}}},d=(f,m,g,v)=>{const w=new Float32Array(16385),C=new Float32Array(16385),S=new Float32Array(16385),_=new Float32Array(16385),y=Math.floor(16385/2);for(let B=0;B<16385;B+=1)if(B>y){const J=(B-y)/(16384-y)*c;w[B]=Math.cos(J),C[B]=Math.sin(J),S[B]=0,_[B]=1}else{const J=B/(16384-y)*c;w[B]=1,C[B]=0,S[B]=Math.cos(J),_[B]=Math.sin(J)}const k=e(f,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=t(f,{...l,gain:0}),O=n(f,{...u,curve:w}),x=t(f,{...l,gain:0}),N=n(f,{...u,curve:C}),b=n(f,{...u,curve:a}),D=t(f,{...l,gain:0}),E=n(f,{...u,curve:S}),j=t(f,{...l,gain:0}),V=n(f,{...u,curve:_});return{connectGraph(){m.connect(k),m.connect(b.inputs===void 0?b:b.inputs[0]),k.connect(T,0),k.connect(x,0),k.connect(D,1),k.connect(j,1),b.connect(g),g.connect(O.inputs===void 0?O:O.inputs[0]),g.connect(N.inputs===void 0?N:N.inputs[0]),g.connect(E.inputs===void 0?E:E.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),O.connect(T.gain),N.connect(x.gain),E.connect(D.gain),V.connect(j.gain),T.connect(v,0,0),D.connect(v,0,0),x.connect(v,0,1),j.connect(v,0,1)},disconnectGraph(){m.disconnect(k),m.disconnect(b.inputs===void 0?b:b.inputs[0]),k.disconnect(T,0),k.disconnect(x,0),k.disconnect(D,1),k.disconnect(j,1),b.disconnect(g),g.disconnect(O.inputs===void 0?O:O.inputs[0]),g.disconnect(N.inputs===void 0?N:N.inputs[0]),g.disconnect(E.inputs===void 0?E:E.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),O.disconnect(T.gain),N.disconnect(x.gain),E.disconnect(D.gain),V.disconnect(j.gain),T.disconnect(v,0,0),D.disconnect(v,0,0),x.disconnect(v,0,1),j.disconnect(v,0,1)}}},p=(f,m,g,v,w)=>{if(m===1)return h(f,g,v,w);if(m===2)return d(f,g,v,w);throw r()};return(f,{channelCount:m,channelCountMode:g,pan:v,...w})=>{if(g==="max")throw r();const C=s(f,{...w,channelCount:1,channelCountMode:g,numberOfInputs:2}),S=t(f,{...w,channelCount:m,channelCountMode:g,gain:1}),_=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:y,disconnectGraph:k}=p(f,m,S,_,C);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(b){S.channelCount!==b&&(O&&k(),{connectGraph:y,disconnectGraph:k}=p(f,b,S,_,C),O&&y()),S.channelCount=b},get channelCountMode(){return S.channelCountMode},set channelCountMode(b){if(b==="clamped-max"||b==="max")throw r();S.channelCountMode=b},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(b){S.channelInterpretation=b},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get pan(){return _.gain},addEventListener(...b){return S.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return S.dispatchEvent(b[0])},removeEventListener(...b){return S.removeEventListener(b[0],b[1],b[2])}};let O=!1;const x=()=>{y(),O=!0},N=()=>{k(),O=!1};return i(qn(T,C),x,N)}},jh=(s,e,t,n,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);We(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();ke(l,{curve:u},"curve"),ke(l,c,"oversample");let h=null,d=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),d&&(n(g)&&h===null?h=s(a,l):!n(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{d=!0,n(l.curve)&&(h=s(a,l))},()=>{d=!1,h!==null&&(h(),h=null)})},Uh=(s,e,t,n,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();We(l,c),We(u,c);const h=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),p=t(i,{...c,gain:1}),f=t(i,{...c,gain:-1});let m=null,g=!1,v=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(_){h.channelCount=_,d.channelCount=_,l.channelCount=_,p.channelCount=_,u.channelCount=_,f.channelCount=_},get channelCountMode(){return l.channelCountMode},set channelCountMode(_){h.channelCountMode=_,d.channelCountMode=_,l.channelCountMode=_,p.channelCountMode=_,u.channelCountMode=_,f.channelCountMode=_},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,d.channelInterpretation=_,l.channelInterpretation=_,p.channelInterpretation=_,u.channelInterpretation=_,f.channelInterpretation=_},get context(){return l.context},get curve(){return v},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)l.curve=_,u.curve=_;else{const y=_.length,k=new Float32Array(y+2-y%2),T=new Float32Array(y+2-y%2);k[0]=_[0],T[0]=-_[y-1];const O=Math.ceil((y+1)/2),x=(y+1)/2-1;for(let N=1;N<O;N+=1){const b=N/O*x,D=Math.floor(b),E=Math.ceil(b);k[N]=D===E?_[D]:(1-(b-D))*_[D]+(1-(E-b))*_[E],T[N]=D===E?-_[y-1-D]:-((1-(b-D))*_[y-1-D])-(1-(E-b))*_[y-1-E]}k[O]=y%2===1?_[O-1]:(_[O-2]+_[O-1])/2,l.curve=k,u.curve=T}v=_,g&&(n(v)&&m===null?m=s(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(_){l.oversample=_,u.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const C=()=>{h.connect(l).connect(p),h.connect(d).connect(u).connect(f).connect(p),g=!0,n(v)&&(m=s(i,h))},S=()=>{h.disconnect(l),l.disconnect(p),h.disconnect(d),d.disconnect(u),u.disconnect(f),f.disconnect(p),g=!1,m!==null&&(m(),m=null)};return r(qn(w,p),C,S)},et=()=>new DOMException("","NotSupportedError"),Gh={numberOfChannels:1},zh=(s,e,t,n,r)=>class extends s{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...Gh,...l},p=n(h,u,d);e(Xn,()=>Xn(p))||p.addEventListener("statechange",(()=>{let f=0;const m=g=>{this._state==="running"&&(f>0?(p.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):f+=1)};return m})()),super(p,h),this._length=u,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,ga(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Yh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Hh=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...Yh,...l},d=t(u,h),p=i(u),f=p?n():null,m=c.sampleRate/2;super(c,!1,d,f),this._detune=e(this,p,d.detune,153600,-153600),this._frequency=e(this,p,d.frequency,m,-m),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=f,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){En(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Pt(this)&&us(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Xh=(s,e,t,n,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let d=t(u);const p=He(d,h);if(!p){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,f),a!==null&&d.start(a),c!==null&&d.stop(c)}return i.set(h,d),p?(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)):(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):l(u,h)}}},Zh={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Qh=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...Zh,...l},d=t(u,h),p=i(u),f=p?n():null;super(c,!1,d,f),this._nativePannerNode=d,this._orientationX=e(this,p,d.orientationX,Xe,tt),this._orientationY=e(this,p,d.orientationY,Xe,tt),this._orientationZ=e(this,p,d.orientationZ,Xe,tt),this._positionX=e(this,p,d.positionX,Xe,tt),this._positionY=e(this,p,d.positionY,Xe,tt),this._positionZ=e(this,p,d.positionZ,Xe,tt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Jh=(s,e,t,n,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const d=async(p,f)=>{let m=null,g=i(p);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},w={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},C=He(g,f);if("bufferSize"in g)m=n(f,{...v,gain:1});else if(!C){const S={...w,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(f,S)}if(u.set(f,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new o(6,p.context.length,f.sampleRate),b=e(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});b.connect(N.destination),h=(async()=>{const D=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(E,j)=>{const V=t(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:j===0?1:0});return await a(N,E,V.offset),V}));for(let E=0;E<6;E+=1)D[E].connect(b,0,E),D[E].start(0);return l(N)})()}const S=await h,_=n(f,{...v,gain:1});await c(p,f,_);const y=[];for(let N=0;N<S.numberOfChannels;N+=1)y.push(S.getChannelData(N));let k=[y[0][0],y[1][0],y[2][0]],T=[y[3][0],y[4][0],y[5][0]],O=n(f,{...v,gain:1}),x=r(f,{...w,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:T[0],positionY:T[1],positionZ:T[2]});_.connect(O).connect(x.inputs[0]),x.connect(m);for(let N=128;N<S.length;N+=128){const b=[y[0][N],y[1][N],y[2][N]],D=[y[3][N],y[4][N],y[5][N]];if(b.some((E,j)=>E!==k[j])||D.some((E,j)=>E!==T[j])){k=b,T=D;const E=N/f.sampleRate;O.gain.setValueAtTime(0,E),O=n(f,{...v,gain:0}),x=r(f,{...w,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),O.gain.setValueAtTime(1,E),_.connect(O).connect(x.inputs[0]),x.connect(m)}}return m}return C?(await s(f,p.orientationX,g.orientationX),await s(f,p.orientationY,g.orientationY),await s(f,p.orientationZ,g.orientationZ),await s(f,p.positionX,g.positionX),await s(f,p.positionY,g.positionY),await s(f,p.positionZ,g.positionZ)):(await a(f,p.orientationX,g.orientationX),await a(f,p.orientationY,g.orientationY),await a(f,p.orientationZ,g.orientationZ),await a(f,p.positionX,g.positionX),await a(f,p.positionY,g.positionY),await a(f,p.positionZ,g.positionZ)),Fn(g)?await c(p,f,g.inputs[0]):await c(p,f,g),g};return{render(p,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):d(p,f)}}},Kh={disableNormalization:!1},ed=(s,e,t,n)=>class xa{constructor(i,o){const a=e(i),c=n({...Kh,...o}),l=s(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===xa.prototype||t.has(i)}},td=(s,e)=>(t,n,r)=>(s(n).replay(r),e(n,t,r)),nd=(s,e,t)=>async(n,r,i)=>{const o=s(n);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const d=await e(l).render(l,r),p=n.context.destination;!t(l)&&(n!==p||!t(n))&&d.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},sd=(s,e,t)=>async(n,r,i)=>{const o=e(n);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await s(a).render(a,r);t(a)||u.connect(i,c)}))},rd=(s,e,t,n)=>r=>s(Xn,()=>Xn(r))?Promise.resolve(s(n,n)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),id=s=>(e,t)=>{s.set(e,t)},od=s=>(e,t)=>s.set(e,t),ad=(s,e,t,n,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(n(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),li(u)):e(i,()=>i(u))||a(u),s.add(u),u)),cd={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ld=(s,e,t,n,r,i)=>class extends s{constructor(a,c){const l=r(a),u={...cd,...c},h=t(l,u),d=i(l),p=d?n():null;super(a,!1,h,p),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},ud=(s,e,t,n,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=He(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await s(c,a.pan,l.pan):await n(c,a.pan,l.pan),Fn(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},hd=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},dd=(s,e)=>async()=>{if(s===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await n.audioWorklet.addModule(r);const a=new s(n,"a",{numberOfOutputs:0}),c=n.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await n.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},fd=(s,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),n=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{n.disconnect(),r(t.currentTime!==0)},t.startRendering()})},pd=()=>new DOMException("","UnknownError"),md={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},_d=(s,e,t,n,r,i,o)=>class extends s{constructor(c,l){const u=r(c),h={...md,...l},d=t(u,h),f=i(u)?n():null;super(c,!0,d,f),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},gd=(s,e,t)=>()=>{const n=new WeakMap,r=async(i,o)=>{let a=e(i);if(!He(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=s(o,l)}return n.set(o,a),Fn(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=n.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},vd=()=>typeof window>"u"?null:window,yd=(s,e)=>t=>{t.copyFromChannel=(n,r,i=0)=>{const o=s(i),a=s(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=n.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)n[h]=l[h+o]},t.copyToChannel=(n,r,i=0)=>{const o=s(i),a=s(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=n.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=n[h]}},wd=s=>e=>{e.copyFromChannel=(t=>(n,r,i=0)=>{const o=s(i),a=s(r);if(o<e.length)return t.call(e,n,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(n,r,i=0)=>{const o=s(i),a=s(r);if(o<e.length)return t.call(e,n,a,o)})(e.copyToChannel)},Td=s=>(e,t)=>{const n=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),s(e,"buffer",r=>()=>{const i=r.call(e);return i===n?null:i},r=>i=>r.call(e,i===null?n:i))},bd=(s,e)=>(t,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const r=t.createBufferSource();e(n,()=>{const a=n.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(n,0,c)},()=>r.disconnect(n))},Ma=(s,e,t)=>s.copyFromChannel===void 0?s.getChannelData(t)[0]:(s.copyFromChannel(e,t),e[0]),Na=s=>{if(s===null)return!1;const e=s.length;return e%2!==0?s[Math.floor(e/2)]!==0:s[e/2-1]+s[e/2]!==0},ms=(s,e,t,n)=>{let r=s;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(s,e,{get:t(i),set:n(o)})},Sd=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),Cd=s=>({...s,channelCount:s.numberOfOutputs}),kd=s=>{const{imag:e,real:t}=s;return e===void 0?t===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(t,()=>0),real:t}:t===void 0?{...s,imag:e,real:Array.from(e,()=>0)}:{...s,imag:e,real:t}},Oa=(s,e,t)=>{try{s.setValueAtTime(e,t)}catch(n){if(n.code!==9)throw n;Oa(s,e,t+1e-7)}},Ad=s=>{const e=s.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},xd=s=>{const e=s.createBufferSource(),t=s.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Md=s=>{const e=s.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},pi=s=>{const e=s.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Da=s=>{const e=s.createBuffer(1,1,44100),t=s.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},mi=s=>{const e=s.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Nd=s=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(s)}finally{e.close(),t.close()}},Od=s=>{s.start=(e=>(t=0,n=0,r)=>{const i=s.buffer,o=i===null?n:Math.min(i.duration,n);i!==null&&o>i.duration-.5/s.context.sampleRate?e.call(s,t,0,0):e.call(s,t,o,r)})(s.start)},Ea=(s,e)=>{const t=e.createGain();s.connect(t);const n=(r=>()=>{r.call(s,t),s.removeEventListener("ended",n)})(s.disconnect);s.addEventListener("ended",n),qn(s,t),s.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(s,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(s,o),i=!0}})(s.stop)},Wn=(s,e)=>t=>{const n={value:s};return Object.defineProperties(t,{currentTarget:n,target:n}),typeof e=="function"?e.call(s,t):e.handleEvent.call(s,t)},Dd=Qc(vn),Ed=sl(vn),Id=mu(tr),Ia=new WeakMap,Rd=Iu(Ia),wt=Gl(new Map,new WeakMap),At=vd(),Ra=lh(wt,Mt),_i=Eu(Ze),Ue=nd(Ze,_i,un),Pd=cl(Ra,Se,Ue),ge=Vu(er),Ft=Vh(At),ue=Ku(Ft),Pa=new WeakMap,Va=ku(Wn),_s=fh(At),gi=Xu(_s),vi=Zu(At),Fa=Qu(At),Zn=mh(At),Fe=Il(Jc(ua),nl(Dd,Ed,Fs,Id,qs,Ze,Rd,ls,Se,vn,Pt,un,Ns),wt,Uu(Nr,qs,Ze,Se,Hn,Pt),Mt,nr,et,hu(Fs,Nr,Ze,Se,Hn,ge,Pt,ue),vu(Pa,Ze,yt),Va,ge,gi,vi,Fa,ue,Zn),Vd=al(Fe,Pd,Mt,Ra,ge,ue),yi=new WeakSet,xo=uh(At),qa=ru(new Uint32Array(1)),wi=yd(qa,Mt),Ti=wd(qa),Fd=ul(yi,wt,et,xo,Ft,hd(xo),wi,Ti),sr=rl(rt),Wa=sd(_i,hs,un),Nt=Jl(Wa),Ln=dh(sr,wt,Ad,xd,Md,pi,Da,mi,Od,Td(ms),Ea),Ot=td(Ru(hs),Wa),qd=fl(Nt,Ln,Se,Ot,Ue),Tt=Rl(Kc(ha),Pa,ci,Pl,Gc,zc,Yc,Hc,Xc,Ar,ca,_s,Oa),Wd=dl(Fe,qd,Tt,$e,Ln,ge,ue,Wn),Ld=bl(Fe,Sl,Mt,$e,ph(rt,ms),ge,ue,Ue),$d=Ul(Nt,ka,Se,Ot,Ue),yn=od(Ia),Bd=jl(Fe,Tt,$d,nr,ka,ge,ue,yn),tn=ah(vn,vi),jd=bd($e,tn),nn=bh(_s,jd),Ud=Hl(nn,Se,Ue),Gd=Yl(Fe,Ud,nn,ge,ue),zd=Ql(fs,Se,Ue),Yd=Zl(Fe,zd,fs,ge,ue,Cd),Hd=kh(sr,Ln,rt,tn),$n=Ch(sr,wt,Hd,pi,mi),Xd=su(Nt,$n,Se,Ot,Ue),Zd=nu(Fe,Tt,Xd,$n,ge,ue,Wn),La=Ah(et,ms),Qd=au(La,Se,Ue),Jd=ou(Fe,Qd,La,ge,ue,yn),Kd=pu(Nt,Aa,Se,Ot,Ue),e1=fu(Fe,Tt,Kd,Aa,ge,ue,yn),$a=xh(et),t1=bu(Nt,$a,Se,Ot,Ue),n1=Tu(Fe,Tt,t1,$a,et,ge,ue,yn),s1=Ou(Nt,rt,Se,Ot,Ue),r1=Nu(Fe,Tt,s1,rt,ge,ue),i1=Dh(nr,$e,ps,et),rr=rd(wt,rt,ps,fd(rt,Ft)),o1=ju(Ln,Se,Ft,Ue,rr),a1=Mh(i1),c1=$u(Fe,a1,o1,ge,ue,yn),l1=Cl(Tt,nn,$n,ps,et,Ma,ue,ms),Ba=new WeakMap,u1=oh(Ld,l1,Va,ue,Ba,Wn),ja=Fh(sr,wt,pi,Da,mi,Ea),h1=Xh(Nt,ja,Se,Ot,Ue),d1=Hh(Fe,Tt,ja,h1,ge,ue,Wn),Ua=eu(Ln),f1=Uh(Ua,$e,rt,Na,tn),ir=jh(Ua,$e,f1,Na,tn,_s,ms),p1=Wh(Fs,$e,nn,rt,ps,ir,et,qs,Ma,tn),Ga=qh(p1),m1=Jh(Nt,nn,$n,rt,Ga,Se,Ft,Ot,Ue,rr),_1=Qh(Fe,Tt,Ga,m1,ge,ue,yn),g1=Lh(Mt),v1=ed(g1,ge,new WeakSet,kd),y1=Bh(nn,fs,rt,ir,et,tn),za=$h(y1,et),w1=ud(Nt,za,Se,Ot,Ue),T1=ld(Fe,Tt,za,w1,ge,ue),b1=gd(ir,Se,Ue),S1=_d(Fe,$e,ir,b1,ge,ue,yn),Ya=eh(At),bi=Au(At),Ha=new WeakMap,C1=Fu(Ha,Ft),k1=Ya?tl(wt,et,Cu(At),bi,xu(Zc),ge,C1,ue,Zn,new WeakMap,new WeakMap,dd(Zn,Ft),At):void 0,A1=Ju(gi,ue),x1=uu(yi,wt,lu,Su,new WeakSet,ge,A1,Ps,Xn,wi,Ti),Xa=$l(k1,Vd,Fd,Wd,Bd,Gd,Yd,Zd,Jd,x1,e1,n1,r1,c1,u1,d1,_1,v1,T1,S1),M1=th(Fe,Eh,ge,ue),N1=sh(Fe,Ih,ge,ue),O1=rh(Fe,Rh,ge,ue),D1=Ph($e,ue),E1=ih(Fe,D1,ge),I1=Tl(Xa,$e,et,pd,M1,N1,O1,E1,_s),Si=qu(Ba),R1=il(Si),Za=Kl(Mt),P1=_u(Si),Qa=yu(Mt),Ja=new WeakMap,V1=Du(Ja,yt),F1=Th(Za,Mt,$e,nn,fs,$n,rt,ps,et,Qa,bi,V1,tn),q1=gh($e,F1,rt,et,tn),W1=Ll(Nt,Za,Ln,nn,fs,$n,rt,P1,Qa,bi,Se,Zn,Ft,Ot,Ue,rr),L1=Pu(Ha),$1=id(Ja),Mo=Ya?Fl(R1,Fe,Tt,W1,q1,Ze,L1,ge,ue,Zn,Sd,$1,Nd,Wn):void 0,B1=cu(et,Ft),j1=ad(yi,wt,_i,Si,rr,Ps,wi,Ti),U1=zh(Xa,wt,$e,B1,j1),G1=Gu(er,gi),z1=zu(ai,vi),Y1=Yu(ci,Fa),H1=Hu(er,ue);function re(s,e){if(!s)throw new Error(e)}function Zt(s,e,t=1/0){if(!(e<=s&&s<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${s}`)}function Ka(s){!s.isOffline&&s.state!=="running"&&tc('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ec=console;function X1(...s){ec.log(...s)}function tc(...s){ec.warn(...s)}function pt(s){return typeof s>"u"}function ae(s){return!pt(s)}function Z1(s){return typeof s=="function"}function hn(s){return typeof s=="number"}function cn(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function Q1(s){return typeof s=="boolean"}function gt(s){return Array.isArray(s)}function xt(s){return typeof s=="string"}function As(s){return xt(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function J1(s){return new I1(s)}function K1(s,e,t){return new U1(s,e,t)}const ln=typeof self=="object"?self:null,ef=ln&&(ln.hasOwnProperty("AudioContext")||ln.hasOwnProperty("webkitAudioContext"));function tf(s,e,t){return re(ae(Mo),"This node only works in a secure context (https or localhost)"),new Mo(s,e,t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bt(s,e,t,n){var r=arguments.length,i=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function qe(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((n=n.apply(s,e||[])).next())})}class nf{constructor(e,t,n){this._callback=e,this._type=t,this._updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function dn(s){return Y1(s)}function Yt(s){return z1(s)}function Os(s){return H1(s)}function kn(s){return G1(s)}function nc(s){return s instanceof AudioBuffer}function sf(s,e){return s==="value"||dn(e)||Yt(e)||nc(e)}function Mn(s,...e){if(!e.length)return s;const t=e.shift();if(cn(s)&&cn(t))for(const n in t)sf(n,t[n])?s[n]=t[n]:cn(t[n])?(s[n]||Object.assign(s,{[n]:{}}),Mn(s[n],t[n])):Object.assign(s,{[n]:t[n]});return Mn(s,...e)}function rf(s,e){return s.length===e.length&&s.every((t,n)=>e[n]===t)}function $(s,e,t=[],n){const r={},i=Array.from(e);if(cn(i[0])&&n&&!Reflect.has(i[0],n)&&(Object.keys(i[0]).some(a=>Reflect.has(s,a))||(Mn(r,{[n]:i[0]}),t.splice(t.indexOf(n),1),i.shift())),i.length===1&&cn(i[0]))Mn(r,i[0]);else for(let o=0;o<t.length;o++)ae(i[o])&&(r[t[o]]=i[o]);return Mn(s,r)}function of(s){return s.constructor.getDefaults()}function Nn(s,e){return pt(s)?e:s}function No(s,e){return e.forEach(t=>{Reflect.has(s,t)&&delete s[t]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class qt{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ln&&this.toString()===ln.TONE_DEBUG_CLASS)&&X1(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}qt.version=aa;const Ci=1e-6;function Bs(s,e){return s>e+Ci}function Rr(s,e){return Bs(s,e)||_t(s,e)}function sc(s,e){return s+Ci<e}function _t(s,e){return Math.abs(s-e)<Ci}function af(s,e,t){return Math.max(Math.min(s,t),e)}class Dt extends qt{constructor(){super(),this.name="Timeline",this._timeline=[];const e=$(Dt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(re(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];re(Rr(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const n=this._search(e,t);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(_t(this._timeline[t].time,e)){for(let n=t;n>=0&&_t(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Rr(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<i;){let o=Math.floor(n+(i-n)/2);const a=this._timeline[o],c=this._timeline[o+1];if(_t(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(_t(u[t],e))o=l;else break}return o}else{if(sc(a[t],e)&&Bs(c[t],e))return o;Bs(a[t],e)?i=o:n=o+1}}return-1}_iterate(e,t=0,n=this._timeline.length-1){this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return n!==-1&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,r,i)):r===-1&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(n!==-1&&_t(this._timeline[n].time,e)){let r=n;for(let i=n;i>=0&&_t(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const rc=[];function or(s){rc.push(s)}function cf(s){rc.forEach(e=>e(s))}const ic=[];function ar(s){ic.push(s)}function lf(s){ic.forEach(e=>e(s))}class gs extends qt{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{pt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const n=(...r)=>{t(...r),this.off(e,n)};return this.on(e,n),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(pt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(pt(t))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,i=n.length;r<i;r++)n[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(gs.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class oc extends gs{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class vs extends oc{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Dt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=$(vs.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=J1({latencyHint:e.latencyHint}),this._ticker=new nf(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(cf(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return re(kn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return re(kn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return re(kn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){re(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){re(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){re(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){re(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return tf(this.rawContext,e,t)}addAudioWorkletModule(e,t){return qe(this,void 0,void 0,function*(){re(ae(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return qe(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,xt(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return kn(this._context)?this._context.resume():Promise.resolve()}close(){return qe(this,void 0,void 0,function*(){kn(this._context)&&(yield this._context.close()),this._initialized&&lf(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:i+t})};return r(),n}}class uf extends oc{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return qe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ee(s,e){gt(e)?e.forEach(t=>Ee(s,t)):Object.defineProperty(s,e,{enumerable:!0,writable:!1})}function ac(s,e){gt(e)?e.forEach(t=>ac(s,t)):Object.defineProperty(s,e,{writable:!0})}const fe=()=>{};class _e extends qt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=fe;const e=$(_e.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,e.url&&nc(e.url)||e.url instanceof _e?this.set(e.url):xt(e.url)&&this.load(e.url).catch(e.onerror)}static getDefaults(){return{onerror:fe,onload:fe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ot().sampleRate}set(e){return e instanceof _e?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return qe(this,void 0,void 0,function*(){const t=_e.load(e).then(n=>{this.set(n),this.onload(this)});_e.downloads.push(t);try{yield t}finally{const n=_e.downloads.indexOf(t);_e.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=gt(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,i=ot(),o=i.createBuffer(n,r,i.sampleRate),a=!t&&n===1?[e]:e;for(let c=0;c<n;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(hn(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/n),this.fromArray(t)}return this}toArray(e){if(hn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let n=0;n<this.numberOfChannels;n++)t[n]=this.getChannelData(n);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);re(n<r,"The start time must be less than the end time");const i=r-n,o=ot().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(n,r),a);return new _e(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new _e().fromArray(e)}static fromUrl(e){return qe(this,void 0,void 0,function*(){return yield new _e().load(e)})}static load(e){return qe(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const a=t[1].split("|");let c=a[0];for(const l of a)if(_e.supportsType(l)){c=l;break}e=e.replace(t[0],c)}const n=_e.baseUrl===""||_e.baseUrl.endsWith("/")?_e.baseUrl:_e.baseUrl+"/",r=yield fetch(n+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const i=yield r.arrayBuffer();return yield ot().decodeAudioData(i)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return qe(this,void 0,void 0,function*(){for(yield Promise.resolve();_e.downloads.length;)yield _e.downloads[0]})}}_e.baseUrl="";_e.downloads=[];class ki extends vs{constructor(){super({clockSource:"offline",context:Os(arguments[0])?arguments[0]:K1(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Os(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Os(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return qe(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return qe(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new _e(t)})}close(){return Promise.resolve()}}const cc=new uf;let Gn=cc;function ot(){return Gn===cc&&ef&&hf(new vs),Gn}function hf(s){kn(s)?Gn=new vs(s):Os(s)?Gn=new ki(s):Gn=s}if(ln&&!ln.TONE_SILENCE_LOGGING){const e=` * Tone.js v${aa} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function df(s){return Math.pow(10,s/20)}function ff(s){return 20*(Math.log(s)/Math.LN10)}function lc(s){return Math.pow(2,s/12)}let cr=440;function pf(){return cr}function mf(s){cr=s}function Pr(s){return Math.round(uc(s))}function uc(s){return 69+12*Math.log2(s/cr)}function _f(s){return cr*Math.pow(2,(s-69)/12)}class Ai extends qt{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r=t==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Ai&&this.fromType(this._val),pt(this._val))return this._noArg();if(xt(this._val)&&pt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(cn(this._val)){let e=0;for(const t in this._val)if(ae(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(ae(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return xt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class dt extends Ai{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new dt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/n)*n-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let n=t[0],r=new dt(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new dt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(n=i,r=o)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Pr(this.toFrequency())}_now(){return this.context.now()}}function gf(s,e){return new dt(ot(),s,e)}class ft extends dt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return pf()}static set A4(e){mf(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:ft.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=vf[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:ft.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new ft(this.context,this.valueOf()*lc(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Pr(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/ft.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),yf[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return _f(e)}static ftom(e){return Pr(e)}}const vf={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},yf=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class zn extends dt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class st extends qt{constructor(){super();const e=$(st.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:ot()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new dt(this.context,e).toSeconds()}toFrequency(e){return new ft(this.context,e).toFrequency()}toTicks(e){return new zn(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{pt(e[n])&&delete t[n]}),t}get(){const e=of(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];ae(n)&&ae(n.value)&&ae(n.setValueAtTime)?e[t]=n.value:n instanceof st?e[t]=n._getPartialProperties(e[t]):gt(n)||hn(n)||xt(n)||Q1(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ae(this[t])&&(this[t]&&ae(this[t].value)&&ae(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof st?this[t].set(e[t]):this[t]=e[t])}),this}}class xi extends Dt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,n){return Zt(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){const n=this._search(t);for(let r=n;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const n=this._search(t);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Ce extends st{constructor(){super($(Ce.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=$(Ce.getDefaults(),arguments,["param","units","convert"]);for(re(ae(e.param)&&(dn(e.param)||e.param instanceof Ce),"param must be an AudioParam");!dn(e.param);)e.param=e.param._param;this._swappable=ae(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Dt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ae(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(st.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ae(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ae(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ae(this.maxValue)&&ae(this.minValue)&&Zt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?df(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?ff(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return re(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(n===null)i=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}n.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,n.time,n.value,t):i=this._exponentialInterpolate(r.time,o,n.time,n.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return re(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=_t(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return re(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+n*.9),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);re(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),re(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(e,t,n,r=1){n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=n/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return re(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));re(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),i=this._events.getAfter(t);return r&&_t(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e,t=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){re(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,i){return n+(t-n)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,n,r,i){return t+(r-t)*((i-e)/(n-e))}_exponentialInterpolate(e,t,n,r,i){return t*Math.pow(r/t,(i-e)/(n-e))}}class ie extends st{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return ae(this.input)?dn(this.input)||this.input instanceof Ce?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ae(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ae(e)&&(e instanceof ie||Yt(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();re(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,n=0){return Bn(this,e,t,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return tc("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,n=0){return wf(this,e,t,n),this}chain(...e){return Vr(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ae(this.input)&&(this.input instanceof ie?this.input.dispose():Yt(this.input)&&this.input.disconnect()),ae(this.output)&&(this.output instanceof ie?this.output.dispose():Yt(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Vr(...s){const e=s.shift();s.reduce((t,n)=>(t instanceof ie?t.connect(n):Yt(t)&&Bn(t,n),n),e)}function Bn(s,e,t=0,n=0){for(re(ae(s),"Cannot connect from undefined node"),re(ae(e),"Cannot connect to undefined node"),(e instanceof ie||Yt(e))&&re(e.numberOfInputs>0,"Cannot connect to node with no inputs"),re(s.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ie||e instanceof Ce;)ae(e.input)&&(e=e.input);for(;s instanceof ie;)ae(s.output)&&(s=s.output);dn(e)?s.connect(e,t):s.connect(e,t,n)}function wf(s,e,t=0,n=0){if(ae(e))for(;e instanceof ie;)e=e.input;for(;!Yt(s);)ae(s.output)&&(s=s.output);dn(e)?s.disconnect(e,t):Yt(e)?s.disconnect(e,t,n):s.disconnect()}class Ke extends ie{constructor(){super($(Ke.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=$(Ke.getDefaults(),arguments,["gain","units"]);this.gain=new Ce({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ee(this,"gain")}static getDefaults(){return Object.assign(ie.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class In extends ie{constructor(e){super(e),this.onended=fe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ke({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const n=this.toSeconds(t);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ie.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:fe})}_startGain(e,t=1){re(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){re(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==fe&&(this.onended(this),this.onended=fe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),re(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class js extends In{constructor(){super($(js.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=$(js.getDefaults(),arguments,["offset"]);Bn(this._source,this._gainNode),this.offset=new Ce({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(In.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Le extends ie{constructor(){super($(Le.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=$(Le.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new js({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ie.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,n=0){return Mi(this,e,t,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Mi(s,e,t,n){(e instanceof Ce||dn(e)||e instanceof Le&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Le&&(e.overridden=!0)),Bn(s,e,t,n)}class Us extends Ce{constructor(){super($(Us.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Dt(1/0),this._multiplier=1;const e=$(Us.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ce.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/n,1));for(let a=0;a<=o;a++){const c=n*a+t,l=this._exponentialApproach(i.time,i.value,r,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,n,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(pt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&n.type==="linearRampToValueAtTime"&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Gs extends Le{constructor(){super($(Gs.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=$(Gs.getDefaults(),arguments,["value"]);this.input=this._param=new Us({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Le.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class zs extends st{constructor(){super($(zs.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new xi,this._tickOffset=new Dt;const e=$(zs.getDefaults(),arguments,["frequency"]);this.frequency=new Gs({context:this.context,units:e.units,value:e.frequency}),Ee(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},st.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),ae(t)&&this.setTicksAtTime(t,n)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const n=this._state.get(t);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let i=n,o=0;return this._state.forEachBetween(n.time,t+this.sampleTime,a=>{let c=i.time;const l=this._tickOffset.get(a.time);l&&l.time>=i.time&&(o=l.ticks,c=l.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);let r=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(n),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const n=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(n.time,r.time),o=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,n),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=_t(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{n(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Qn extends st{constructor(){super($(Qn.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=fe,this._lastUpdate=0,this._state=new xi("stopped"),this._boundLoop=this._loop.bind(this);const e=$(Qn.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new zs({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ee(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(st.getDefaults(),{callback:fe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Ka(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,t,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}gs.mixin(Qn);class Ni extends qt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=$(Ni.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:fe,onload:fe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return re(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,n=fe,r=fe){return xt(t)?this._buffers.set(e.toString(),new _e(this.baseUrl+t,n,r)):this._buffers.set(e.toString(),new _e(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class It extends zn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Tf extends st{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Dt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}or(s=>{s.draw=new Tf({context:s})});ar(s=>{s.draw.dispose()});class bf extends qt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){re(ae(e.time),"Events must have a time property"),re(ae(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Sf(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let n,r=null;if(t>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let n=t[0];for(let r=1;r<t.length;r++)t[r].low>n.low&&(n=t[r]);return n.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(n=>t.push(n)),t.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Sf{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class fn extends ie{constructor(){super($(fn.getDefaults(),arguments,["volume"])),this.name="Volume";const e=$(fn.getDefaults(),arguments,["volume"]);this.input=this.output=new Ke({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ee(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ys extends ie{constructor(){super($(Ys.getDefaults(),arguments)),this.name="Destination",this.input=new fn({context:this.context}),this.output=new Ke({context:this.context}),this.volume=this.input.volume;const e=$(Ys.getDefaults(),arguments);Vr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Vr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}or(s=>{s.destination=new Ys({context:s})});ar(s=>{s.destination.dispose()});class Cf extends qt{constructor(e){super(),this.name="TimelineValue",this._timeline=new Dt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Qt{constructor(e,t){this.id=Qt._eventId++;const n=Object.assign(Qt.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:fe,once:!1,time:0}}invoke(e){this.callback&&(this.callback(e),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Qt._eventId=0;class Oi extends Qt{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Oi.getDefaults(),t);this.duration=new It(e.context,n.duration).valueOf(),this._interval=new It(e.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Qt.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new It(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new It(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new It(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Jn extends st{constructor(){super($(Jn.getDefaults(),arguments)),this.name="Transport",this._loop=new Cf(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Dt,this._repeatedEvents=new bf,this._syncedSignals=[],this._swingAmount=0;const e=$(Jn.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Qn({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ee(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(st.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const n=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new It(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(t,n=>n.invoke(e))}schedule(e,t){const n=new Qt(this,{callback:e,time:new zn(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n,r=1/0){const i=new Oi(this,{callback:e,duration:new dt(this.context,r).toTicks(),interval:new dt(this.context,t).toTicks(),time:new zn(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new Qt(this,{callback:e,once:!0,time:new zn(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(t,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new It(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return ae(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){gt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new dt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new dt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new It(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new It(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),n=this.getTicksAtTime(t),r=e-n%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){if(!t){const r=this.now();if(e.getValueAtTime(r)!==0){const i=this.bpm.getValueAtTime(r),o=1/(60/i/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const n=new Ke(t);return this.bpm.connect(n),n.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:n,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ac(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}gs.mixin(Jn);or(s=>{s.transport=new Jn({context:s})});ar(s=>{s.transport.dispose()});class ct extends ie{constructor(e){super(e),this.input=void 0,this._state=new xi("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=fe,this._syncedStop=fe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new fn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ee(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,onstop:fe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=pt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")re(Bs(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Nn(t,0)),i.duration=n?this.toSeconds(n):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,n)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Ka(this.context),this._start(r,t,n);return this}stop(e){let t=pt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ae(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const n=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(n)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const n=this._state.get(t);if(n&&n.state==="started"&&n.time!==t){const r=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=fe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Kn extends In{constructor(){super($(Kn.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=$(Kn.getDefaults(),arguments,["url","onload"]);Bn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ce({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new _e(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(In.getDefaults(),{url:new _e,loop:!1,loopEnd:0,loopStart:0,onload:fe,onerror:fe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n,r=1){re(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=Nn(t,this.loopStart):t=Nn(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Rr(o,a)&&(o=(o-c)%l+c),_t(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,sc(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ae(n)){let a=this.toSeconds(n);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function wn(s,e){return qe(this,void 0,void 0,function*(){const t=e/s.context.sampleRate,n=new ki(1,t,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/t,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class Hs extends In{constructor(){super($(Hs.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=$(Hs.getDefaults(),arguments,["frequency","type"]);Bn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ce({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ce({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ee(this,["frequency","detune"])}static getDefaults(){return Object.assign(In.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Re extends ct{constructor(){super($(Re.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=$(Re.getDefaults(),arguments,["frequency","type"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),Ee(this,"frequency"),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),Ee(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Hs({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Re._periodicWaveCache.find(t=>t.phase===this._phase&&rf(t.partials,this._partials));{const e=Re._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(ae(n)){const{partials:r,wave:i}=n;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Re._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Re._periodicWaveCache.length>100&&Re._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Zt(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,n){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*n)+t[o]*Math.sin(o*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)n=Math.max(this._inverseFFT(e,t,o/i*r),n);return af(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Re._periodicWaveCache=[];class lr extends ie{constructor(){super(Object.assign($(lr.getDefaults(),arguments,["context"])))}connect(e,t=0,n=0){return Mi(this,e,t,n),this}}class es extends lr{constructor(){super(Object.assign($(es.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=$(es.getDefaults(),arguments,["mapping","length"]);gt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Z1(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Le.getDefaults(),{length:1024})}setMap(e,t=1024){const n=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;n[r]=e(o,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(n=>n.includes(e));re(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kf extends lr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new es({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class pn extends Le{constructor(){super(Object.assign($(pn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=$(pn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ke({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ts extends ct{constructor(){super($(ts.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new kf({context:this.context}),this._modulationNode=new Ke({context:this.context});const e=$(ts.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Re({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Re({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new pn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ee(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Re.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ns extends ct{constructor(){super($(ns.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ke({context:this.context,gain:0});const e=$(ns.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Re({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Re({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new pn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new pn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ee(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Re.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Rn extends ct{constructor(){super($(Rn.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ke({context:this.context,gain:0}),this._thresh=new es({context:this.context,mapping:t=>t<=0?-1:1});const e=$(Rn.getDefaults(),arguments,["frequency","width"]);this.width=new Le({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Re({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ee(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ss extends ct{constructor(){super($(ss.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=$(ss.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ee(this,["frequency","detune"])}static getDefaults(){return Object.assign(Re.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+n*i)}}get count(){return this._oscillators.length}set count(e){if(Zt(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Re({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):fe});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,n)=>t.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class rs extends ct{constructor(){super($(rs.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new pn({context:this.context,value:2});const e=$(rs.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Rn({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Re({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ee(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ct.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Oo={am:ts,fat:ss,fm:ns,oscillator:Re,pulse:Rn,pwm:rs};class is extends ct{constructor(){super($(is.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=$(is.getDefaults(),arguments,["frequency","type"]);this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune}),Ee(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Re.getDefaults(),ns.getDefaults(),ts.getDefaults(),ss.getDefaults(),Rn.getDefaults(),rs.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Oo[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Oo[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&hn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&hn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&xt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return qe(this,void 0,void 0,function*(){return wn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function hc(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Zt(i,s,e),t.set(this,i)}})}}function Wt(s,e=1/0){const t=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Zt(this.toSeconds(i),s,e),t.set(this,i)}})}}class os extends ct{constructor(){super($(os.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=$(os.getDefaults(),arguments,["url","onload"]);this._buffer=new _e({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ct.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:fe,onerror:fe,playbackRate:1,reverse:!1})}load(e){return qe(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=fe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){this._loop?t=Nn(t,this._loopStart):t=Nn(t,0);const r=this.toSeconds(t),i=n;n=Nn(n,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(n);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Kn({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&pt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){this._stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Zt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Zt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}bt([Wt(0)],os.prototype,"fadeIn",void 0);bt([Wt(0)],os.prototype,"fadeOut",void 0);class Vt extends ie{constructor(){super($(Vt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=$(Vt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ie.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(xt(e))return e;{let n;for(n in xs)if(xs[n][t]===e)return n;return e}}_setCurve(e,t,n){if(xt(n)&&Reflect.has(xs,n)){const r=xs[n];cn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(gt(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){re(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(re(gt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return Mi(this,e,t,n),this}asArray(e=1024){return qe(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,n=new ki(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:n}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}bt([Wt(0)],Vt.prototype,"attack",void 0);bt([Wt(0)],Vt.prototype,"decay",void 0);bt([hc(0,1)],Vt.prototype,"sustain",void 0);bt([Wt(0)],Vt.prototype,"release",void 0);const xs=(()=>{let e,t;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){t=e/(128-1);const d=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+t*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const c=[];for(e=0;e<128;e++)t=e/(128-1),c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/(128-1);const d=Math.pow(t,3)*4+.2,p=Math.cos(d*Math.PI*2*t);l[e]=Math.abs(p*(1-t))}function u(d){const p=new Array(d.length);for(let f=0;f<d.length;f++)p[f]=1-d[f];return p}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:n,Out:h(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class mn extends ie{constructor(){super($(mn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=$(mn.getDefaults(),arguments);this._volume=this.output=new fn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ee(this,"volume")}static getDefaults(){return Object.assign(ie.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,n.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,n,r){const i=this.toSeconds(n),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class _n extends mn{constructor(){super($(_n.getDefaults(),arguments));const e=$(_n.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(mn.getDefaults(),{detune:0,onsilence:fe,portamento:0})}triggerAttack(e,t,n=1){this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof ft?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,n)}else this.frequency.setValueAtTime(r,n);return this}}bt([Wt(0)],_n.prototype,"portamento",void 0);class Di extends Vt{constructor(){super($(Di.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ke({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class as extends _n{constructor(){super($(as.getDefaults(),arguments)),this.name="Synth";const e=$(as.getDefaults(),arguments);this.oscillator=new is(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Di(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ee(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(_n.getDefaults(),{envelope:Object.assign(No(Vt.getDefaults(),Object.keys(ie.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(No(is.getDefaults(),[...Object.keys(ct.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class cs extends as{constructor(){super($(cs.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=$(cs.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ee(this,["oscillator","envelope"])}static getDefaults(){return Mn(_n.getDefaults(),as.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof ft?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}bt([hc(0)],cs.prototype,"octaves",void 0);bt([Wt(0)],cs.prototype,"pitchDecay",void 0);const dc=new Set;function Ei(s){dc.add(s)}function fc(s,e){const t=`registerProcessor("${s}", ${e})`;dc.add(t)}const Af=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Ei(Af);const xf=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Ei(xf);const Mf=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Ei(Mf);const Nf="feedback-comb-filter",Of=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;fc(Nf,Of);class Pn extends mn{constructor(){super($(Pn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=$(Pn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(re(As(n)||hn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),As(n)){const i=new ft(this.context,n).toMidi();t[i]=e.urls[n]}else hn(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Ni({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(mn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:fe,onerror:fe,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,n=1){return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=uc(new ft(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=lc(c+a),d=new Kn({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,n),gt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),f=p.indexOf(d);f!==-1&&p.splice(f,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new ft(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n,r=1){const i=this.toSeconds(n);return this.triggerAttack(e,i,r),gt(t)?(re(gt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(re(As(e)||isFinite(e),`note must be a pitch or midi: ${e}`),As(e)){const r=new ft(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}bt([Wt(0)],Pn.prototype,"attack",void 0);bt([Wt(0)],Pn.prototype,"release",void 0);class Xs extends ie{constructor(){super(Object.assign($(Xs.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=$(Xs.getDefaults(),arguments,["pan"]);this.pan=new Ce({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ee(this,"pan")}static getDefaults(){return Object.assign(ie.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Df="bit-crusher",Ef=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;fc(Df,Ef);class Ie extends ie{constructor(){super($(Ie.getDefaults(),arguments,["solo"])),this.name="Solo";const e=$(Ie.getDefaults(),arguments,["solo"]);this.input=this.output=new Ke({context:this.context}),Ie._allSolos.has(this.context)||Ie._allSolos.set(this.context,new Set),Ie._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ie.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Ie._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ie._soloed.has(this.context)||Ie._soloed.set(this.context,new Set),Ie._soloed.get(this.context).add(this)}_removeSolo(){Ie._soloed.has(this.context)&&Ie._soloed.get(this.context).delete(this)}_isSoloed(){return Ie._soloed.has(this.context)&&Ie._soloed.get(this.context).has(this)}_noSolos(){return!Ie._soloed.has(this.context)||Ie._soloed.has(this.context)&&Ie._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ie._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ie._allSolos=new Map;Ie._soloed=new Map;class Zs extends ie{constructor(){super($(Zs.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=$(Zs.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Xs({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new fn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ee(this,["pan","volume"])}static getDefaults(){return Object.assign(ie.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class on extends ie{constructor(){super($(on.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=$(on.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ie({solo:e.solo,context:this.context}),this._panVol=this.output=new Zs({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ee(this,["pan","volume"])}static getDefaults(){return Object.assign(ie.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return on.buses.has(e)||on.buses.set(e,new Ke({context:this.context})),on.buses.get(e)}send(e,t=0){const n=this._getBus(e),r=new Ke({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}on.buses=new Map;class If extends ie{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ce({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ce({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ce({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ce({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ce({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ce({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ce({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ce({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ce({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ie.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}or(s=>{s.listener=new If({context:s})});ar(s=>{s.listener.dispose()});function vr(){return ot().now()}const Rf=ot().transport;ot().destination;ot().destination;ot().listener;ot().draw;ot();function Pf(s){let e,t='<path fill="currentColor" d="M133 440a35.37 35.37 0 0 1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0 1 35.77.45l247.85 148.36a36 36 0 0 1 0 61l-247.89 148.4A35.5 35.5 0 0 1 133 440Z"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function Vf(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class Ff extends Pe{constructor(e){super(),Ve(this,e,Vf,Pf,Oe,{})}}function Do(s){let e,t;return{c(){e=R("small"),t=H("Play the reference C' first, to make sure your audio is working"),this.h()},l(n){e=P(n,"SMALL",{class:!0});var r=I(e);t=X(r,"Play the reference C' first, to make sure your audio is working"),r.forEach(A),this.h()},h(){q(e,"class","svelte-1826d53")},m(n,r){G(n,e,r),M(e,t)},d(n){n&&A(e)}}}function qf(s){let e,t,n,r,i,o,a,c,l,u,h;a=new Ff({});let d=s[0]&&Do();return{c(){e=R("section"),t=R("div"),n=R("button"),r=H("C'"),i=ee(),o=R("button"),ye(a.$$.fragment),c=ee(),d&&d.c(),this.h()},l(p){e=P(p,"SECTION",{class:!0});var f=I(e);t=P(f,"DIV",{class:!0});var m=I(t);n=P(m,"BUTTON",{class:!0});var g=I(n);r=X(g,"C'"),g.forEach(A),i=te(m),o=P(m,"BUTTON",{class:!0});var v=I(o);we(a.$$.fragment,v),v.forEach(A),m.forEach(A),c=te(f),d&&d.l(f),f.forEach(A),this.h()},h(){q(n,"class","reference round svelte-1826d53"),q(o,"class","play round svelte-1826d53"),o.disabled=s[1],q(t,"class","play-buttons svelte-1826d53"),q(e,"class","svelte-1826d53")},m(p,f){G(p,e,f),M(e,t),M(t,n),M(n,r),M(t,i),M(t,o),Te(a,o,null),M(e,c),d&&d.m(e,null),l=!0,u||(h=[at(n,"click",s[2]),at(o,"click",s[3])],u=!0)},p(p,[f]){(!l||f&2)&&(o.disabled=p[1]),p[0]?d||(d=Do(),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){l||(Z(a.$$.fragment,p),l=!0)},o(p){se(a.$$.fragment,p),l=!1},d(p){p&&A(e),be(a),d&&d.d(),u=!1,Js(h)}}}const Wf=72;function Lf(s,e,t){let n,r;Qe(s,nt,u=>t(5,r=u));let i,o=!1;Zo(()=>(i=new Pn({urls:{A4:"A4.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3"},baseUrl:"https://tonejs.github.io/audio/salamander/",onload:()=>{console.log("loaded"),Rf.bpm.setValueAtTime(Wf,vr())}}).toDestination(),()=>i.dispose()));const a=()=>{if(!i.loaded){window.alert("Audio not loaded yet");return}t(0,l=!1);const u=vr();i.triggerAttackRelease("C4","2n",u)},c=()=>{if(l||o)return;if(!i.loaded){window.alert("Audio not loaded yet");return}nt.melodyPlayed();const u=vr(),h=gf("8n").toSeconds();r.melody.forEach((d,p)=>{i.triggerAttackRelease(Ct(d,{octave:!0}),"4n",u+h*p)})};let l=!o&&r.state==="playing";return s.$$.update=()=>{if(s.$$.dirty&32){const u=r.guesses[r.guesses.length-1];t(4,o=u&&u.played&&!u.submitted)}s.$$.dirty&49&&t(1,n=r.state==="playing"&&(l||o))},[l,n,a,c,o,r]}class $f extends Pe{constructor(e){super(),Ve(this,e,Lf,qf,Oe,{})}}function Eo(s,e,t){const n=s.slice();return n[11]=e[t],n}function Io(s){let e,t=s[11].name+"",n,r,i,o;function a(){return s[9](s[11])}return{c(){e=R("button"),n=H(t),this.h()},l(c){e=P(c,"BUTTON",{class:!0});var l=I(e);n=X(l,t),l.forEach(A),this.h()},h(){q(e,"class",r=Ds(s[11].englishName.toLowerCase().replace("#","sharp"))+" svelte-1dr3qpd"),ht(e,"sharp",s[11].englishName.includes("#"))},m(c,l){G(c,e,l),M(e,n),i||(o=at(e,"click",a),i=!0)},p(c,l){s=c,l&2&&t!==(t=s[11].name+"")&&Rt(n,t),l&2&&r!==(r=Ds(s[11].englishName.toLowerCase().replace("#","sharp"))+" svelte-1dr3qpd")&&q(e,"class",r),l&2&&ht(e,"sharp",s[11].englishName.includes("#"))},d(c){c&&A(e),i=!1,o()}}}function Bf(s){let e,t,n,r,i,o,a,c,l,u,h,d,p,f,m,g,v;r=new qc({}),a=new $f({}),u=new $c({});let w=s[1],C=[];for(let S=0;S<w.length;S+=1)C[S]=Io(Eo(s,w,S));return{c(){e=R("div"),t=R("div"),n=R("button"),ye(r.$$.fragment),o=ee(),ye(a.$$.fragment),c=ee(),l=R("button"),ye(u.$$.fragment),p=ee(),f=R("nav");for(let S=0;S<C.length;S+=1)C[S].c();this.h()},l(S){e=P(S,"DIV",{class:!0});var _=I(e);t=P(_,"DIV",{class:!0});var y=I(t);n=P(y,"BUTTON",{class:!0});var k=I(n);we(r.$$.fragment,k),k.forEach(A),o=te(y),we(a.$$.fragment,y),c=te(y),l=P(y,"BUTTON",{class:!0});var T=I(l);we(u.$$.fragment,T),T.forEach(A),y.forEach(A),p=te(_),f=P(_,"NAV",{class:!0});var O=I(f);for(let x=0;x<C.length;x+=1)C[x].l(O);O.forEach(A),_.forEach(A),this.h()},h(){q(n,"class","delete round svelte-1dr3qpd"),ht(n,"hidden",!s[3]),q(l,"class","submit round svelte-1dr3qpd"),l.disabled=h=!s[2],ht(l,"hidden",!s[2]),q(t,"class","actions svelte-1dr3qpd"),q(f,"class","keyboard svelte-1dr3qpd"),q(e,"class","container svelte-1dr3qpd"),ht(e,"finished",s[0].state!=="playing")},m(S,_){G(S,e,_),M(e,t),M(t,n),Te(r,n,null),M(t,o),Te(a,t,null),M(t,c),M(t,l),Te(u,l,null),M(e,p),M(e,f);for(let y=0;y<C.length;y+=1)C[y].m(f,null);m=!0,g||(v=[at(n,"click",s[7]),at(l,"click",s[8])],g=!0)},p(S,[_]){if(_&8&&ht(n,"hidden",!S[3]),(!m||_&4&&h!==(h=!S[2]))&&(l.disabled=h),_&4&&ht(l,"hidden",!S[2]),_&18){w=S[1];let y;for(y=0;y<w.length;y+=1){const k=Eo(S,w,y);C[y]?C[y].p(k,_):(C[y]=Io(k),C[y].c(),C[y].m(f,null))}for(;y<C.length;y+=1)C[y].d(1);C.length=w.length}_&1&&ht(e,"finished",S[0].state!=="playing")},i(S){m||(Z(r.$$.fragment,S),On(()=>{i||(i=Ut(n,an,{duration:100},!0)),i.run(1)}),Z(a.$$.fragment,S),Z(u.$$.fragment,S),On(()=>{d||(d=Ut(l,an,{duration:100},!0)),d.run(1)}),m=!0)},o(S){se(r.$$.fragment,S),i||(i=Ut(n,an,{duration:100},!1)),i.run(0),se(a.$$.fragment,S),se(u.$$.fragment,S),d||(d=Ut(l,an,{duration:100},!1)),d.run(0),m=!1},d(S){S&&A(e),be(r),S&&i&&i.end(),be(a),be(u),S&&d&&d.end(),Vn(C,S),g=!1,Js(v)}}}function jf(s,e,t){let n,r,i;Qe(s,nt,f=>t(0,n=f)),Qe(s,Ht,f=>t(5,r=f)),Qe(s,Yn,f=>t(6,i=f));const o=Qo();let a;const c=Array.from(Array(12).keys());Zo(()=>{const f={c:0,d:2,e:4,f:5,g:7,a:9,b:11,h:11},m=g=>{if(g.key==="Backspace")o("delete");else if(g.key==="Enter")o("submit");else if(f[g.key]!==void 0)o("add",f[g.key]+12*4);else if(g.key=="ArrowUp")r!=="easy"&&o("sharp");else if(g.key=="ArrowDown")r!=="easy"&&o("sharp");else return;g.preventDefault()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)});let l=!1,u=!1;const h=()=>o("delete"),d=()=>o("submit"),p=f=>o("add",f.semitone);return s.$$.update=()=>{if(s.$$.dirty&96&&t(1,a=c.filter(f=>r==="hard"||![1,3,6,8,10].includes(f)).map(f=>({semitone:12*4+f,name:Ct(f,{notation:i.notation}),englishName:Ct(f)}))),s.$$.dirty&1){const f=rn(n);t(2,l=f&&!f.submitted&&f.melody.length===5),t(3,u=f&&!f.submitted&&f.melody.length>0)}},[n,a,l,u,o,r,i,h,d,p]}class Uf extends Pe{constructor(e){super(),Ve(this,e,jf,Bf,Oe,{})}}function Gf(s){let e,t='<path d="M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422s-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256s17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z" fill="currentColor"/><path d="M235 339h42v42h-42z" fill="currentColor"/><path d="M276.8 318h-41.6c0-67 62.4-62.2 62.4-103.8 0-22.9-18.7-41.7-41.6-41.7S214.4 192 214.4 214h-41.6c0-46 37.2-83 83.2-83s83.2 37.1 83.2 83.1c0 52-62.4 57.9-62.4 103.9z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function zf(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class Yf extends Pe{constructor(e){super(),Ve(this,e,zf,Gf,Oe,{})}}function Hf(s){let e,t='<path d="M176 96h64v320h-64z" fill="currentColor"/><path d="M80 320h64v96H80z" fill="currentColor"/><path d="M272 256h64v160h-64z" fill="currentColor"/><path d="M368 192h64v224h-64z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function Xf(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class Zf extends Pe{constructor(e){super(),Ve(this,e,Xf,Hf,Oe,{})}}function Qf(s){let e,t='<path d="M413.967 276.8c1.06-6.235 1.06-13.518 1.06-20.8s-1.06-13.518-1.06-20.8l44.667-34.318c4.26-3.118 5.319-8.317 2.13-13.518L418.215 115.6c-2.129-4.164-8.507-6.235-12.767-4.164l-53.186 20.801c-10.638-8.318-23.394-15.601-36.16-20.801l-7.448-55.117c-1.06-4.154-5.319-8.318-10.638-8.318h-85.098c-5.318 0-9.577 4.164-10.637 8.318l-8.508 55.117c-12.767 5.2-24.464 12.482-36.171 20.801l-53.186-20.801c-5.319-2.071-10.638 0-12.767 4.164L49.1 187.365c-2.119 4.153-1.061 10.399 2.129 13.518L96.97 235.2c0 7.282-1.06 13.518-1.06 20.8s1.06 13.518 1.06 20.8l-44.668 34.318c-4.26 3.118-5.318 8.317-2.13 13.518L92.721 396.4c2.13 4.164 8.508 6.235 12.767 4.164l53.187-20.801c10.637 8.318 23.394 15.601 36.16 20.801l8.508 55.117c1.069 5.2 5.318 8.318 10.637 8.318h85.098c5.319 0 9.578-4.164 10.638-8.318l8.518-55.117c12.757-5.2 24.464-12.482 36.16-20.801l53.187 20.801c5.318 2.071 10.637 0 12.767-4.164l42.549-71.765c2.129-4.153 1.06-10.399-2.13-13.518l-46.8-34.317zm-158.499 52c-41.489 0-74.46-32.235-74.46-72.8s32.971-72.8 74.46-72.8 74.461 32.235 74.461 72.8-32.972 72.8-74.461 72.8z" fill="currentColor"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function Jf(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class Kf extends Pe{constructor(e){super(),Ve(this,e,Jf,Qf,Oe,{})}}function ep(s){let e,t,n,r,i,o,a,c,l,u,h,d,p,f,m,g,v,w,C,S,_,y,k,T,O,x,N,b,D,E,j,V,B,J,z,U,W,K,xe,Me,ne,ce,ve,Y,Be,je,it,Ge,mt,Lt,L,Q,Ne,le,oe,he,de,lt,ut,sn,jn,$t,ur,hr,Tn,dr,fr,bn,pr,mr,ys;return g=new Ms({props:{semitone:2,status:"correct"}}),k=new Ms({props:{semitone:6,status:"incorrect"}}),E=new Ms({props:{semitone:11,status:"adjacent"}}),{c(){e=R("p"),t=H("Guess the melody in 6 tries."),n=ee(),r=R("p"),i=H("Before each guess, you can play the melody "),o=R("strong"),a=H("once"),c=H(`. Listen to
  the reference C' tone first to make sure your audio is working.`),l=ee(),u=R("p"),h=H(`After a guess, it is revealed which notes are correct. When the game is over,
  you'll also see which notes you missed by just one key.`),d=ee(),p=R("div"),f=R("div"),m=R("div"),ye(g.$$.fragment),v=ee(),w=R("div"),C=H("The note is correct"),S=ee(),_=R("div"),y=R("div"),ye(k.$$.fragment),T=ee(),O=R("div"),x=H("The note is incorrect"),N=ee(),b=R("div"),D=R("div"),ye(E.$$.fragment),j=ee(),V=R("div"),B=R("strong"),J=H("Only revealed at the end of a game!"),z=H(`
      Shows that you guessed the key right next to it.`),U=ee(),W=R("p"),K=H("A new Melodle is available each day."),xe=ee(),Me=R("h2"),ne=H("Mobile users"),ce=ee(),ve=R("p"),Y=H(`Make sure your phone is not on silent mode, otherwise you won't be able to
  hear anything.`),Be=ee(),je=R("h2"),it=H("Desktop users"),Ge=ee(),mt=R("p"),Lt=H(`You can use the keyboard with the corresponding keys. To get a sharp note, you
  can use the up / down arrow keys.`),L=ee(),Q=R("h2"),Ne=H("Notation"),le=H(`

I try to detect the notation style based on your language preferences. You can
change it anytime in the settings. There's also a solf\xE8ge syllables notation.

`),oe=R("hr"),he=ee(),de=R("p"),lt=H("Built by "),ut=R("a"),sn=H("Matias Meno"),jn=H(`. This is a variant
  of the wildly successful game
  `),$t=R("a"),ur=H("Wordle"),hr=H(` originally developed
  by Josh Wardle. Built with `),Tn=R("a"),dr=H("SvelteKit"),fr=H(`. I
  use analytics by `),bn=R("a"),pr=H("GoatCounter"),mr=H(` and there
  is no Cookie consent box, because I don't track you.`),this.h()},l(F){e=P(F,"P",{});var me=I(e);t=X(me,"Guess the melody in 6 tries."),me.forEach(A),n=te(F),r=P(F,"P",{});var ws=I(r);i=X(ws,"Before each guess, you can play the melody "),o=P(ws,"STRONG",{});var Pi=I(o);a=X(Pi,"once"),Pi.forEach(A),c=X(ws,`. Listen to
  the reference C' tone first to make sure your audio is working.`),ws.forEach(A),l=te(F),u=P(F,"P",{});var Vi=I(u);h=X(Vi,`After a guess, it is revealed which notes are correct. When the game is over,
  you'll also see which notes you missed by just one key.`),Vi.forEach(A),d=te(F),p=P(F,"DIV",{class:!0});var Sn=I(p);f=P(Sn,"DIV",{class:!0});var Ts=I(f);m=P(Ts,"DIV",{class:!0});var Fi=I(m);we(g.$$.fragment,Fi),Fi.forEach(A),v=te(Ts),w=P(Ts,"DIV",{class:!0});var qi=I(w);C=X(qi,"The note is correct"),qi.forEach(A),Ts.forEach(A),S=te(Sn),_=P(Sn,"DIV",{class:!0});var bs=I(_);y=P(bs,"DIV",{class:!0});var Wi=I(y);we(k.$$.fragment,Wi),Wi.forEach(A),T=te(bs),O=P(bs,"DIV",{class:!0});var Li=I(O);x=X(Li,"The note is incorrect"),Li.forEach(A),bs.forEach(A),N=te(Sn),b=P(Sn,"DIV",{class:!0});var Ss=I(b);D=P(Ss,"DIV",{class:!0});var $i=I(D);we(E.$$.fragment,$i),$i.forEach(A),j=te(Ss),V=P(Ss,"DIV",{class:!0});var _r=I(V);B=P(_r,"STRONG",{});var Bi=I(B);J=X(Bi,"Only revealed at the end of a game!"),Bi.forEach(A),z=X(_r,`
      Shows that you guessed the key right next to it.`),_r.forEach(A),Ss.forEach(A),Sn.forEach(A),U=te(F),W=P(F,"P",{});var ji=I(W);K=X(ji,"A new Melodle is available each day."),ji.forEach(A),xe=te(F),Me=P(F,"H2",{});var Ui=I(Me);ne=X(Ui,"Mobile users"),Ui.forEach(A),ce=te(F),ve=P(F,"P",{});var Gi=I(ve);Y=X(Gi,`Make sure your phone is not on silent mode, otherwise you won't be able to
  hear anything.`),Gi.forEach(A),Be=te(F),je=P(F,"H2",{});var zi=I(je);it=X(zi,"Desktop users"),zi.forEach(A),Ge=te(F),mt=P(F,"P",{});var Yi=I(mt);Lt=X(Yi,`You can use the keyboard with the corresponding keys. To get a sharp note, you
  can use the up / down arrow keys.`),Yi.forEach(A),L=te(F),Q=P(F,"H2",{});var Hi=I(Q);Ne=X(Hi,"Notation"),Hi.forEach(A),le=X(F,`

I try to detect the notation style based on your language preferences. You can
change it anytime in the settings. There's also a solf\xE8ge syllables notation.

`),oe=P(F,"HR",{}),he=te(F),de=P(F,"P",{});var St=I(de);lt=X(St,"Built by "),ut=P(St,"A",{href:!0});var Xi=I(ut);sn=X(Xi,"Matias Meno"),Xi.forEach(A),jn=X(St,`. This is a variant
  of the wildly successful game
  `),$t=P(St,"A",{href:!0});var Zi=I($t);ur=X(Zi,"Wordle"),Zi.forEach(A),hr=X(St,` originally developed
  by Josh Wardle. Built with `),Tn=P(St,"A",{href:!0});var Qi=I(Tn);dr=X(Qi,"SvelteKit"),Qi.forEach(A),fr=X(St,`. I
  use analytics by `),bn=P(St,"A",{href:!0});var Ji=I(bn);pr=X(Ji,"GoatCounter"),Ji.forEach(A),mr=X(St,` and there
  is no Cookie consent box, because I don't track you.`),St.forEach(A),this.h()},h(){q(m,"class","example-tile svelte-ie7q09"),q(w,"class","description"),q(f,"class","example svelte-ie7q09"),q(y,"class","example-tile svelte-ie7q09"),q(O,"class","description"),q(_,"class","example svelte-ie7q09"),q(D,"class","example-tile svelte-ie7q09"),q(V,"class","description"),q(b,"class","example svelte-ie7q09"),q(p,"class","examples"),q(ut,"href","https://www.yesmeno.com"),q($t,"href","https://www.nytimes.com/games/wordle"),q(Tn,"href","https://kit.svelte.dev"),q(bn,"href","https://www.goatcounter.com")},m(F,me){G(F,e,me),M(e,t),G(F,n,me),G(F,r,me),M(r,i),M(r,o),M(o,a),M(r,c),G(F,l,me),G(F,u,me),M(u,h),G(F,d,me),G(F,p,me),M(p,f),M(f,m),Te(g,m,null),M(f,v),M(f,w),M(w,C),M(p,S),M(p,_),M(_,y),Te(k,y,null),M(_,T),M(_,O),M(O,x),M(p,N),M(p,b),M(b,D),Te(E,D,null),M(b,j),M(b,V),M(V,B),M(B,J),M(V,z),G(F,U,me),G(F,W,me),M(W,K),G(F,xe,me),G(F,Me,me),M(Me,ne),G(F,ce,me),G(F,ve,me),M(ve,Y),G(F,Be,me),G(F,je,me),M(je,it),G(F,Ge,me),G(F,mt,me),M(mt,Lt),G(F,L,me),G(F,Q,me),M(Q,Ne),G(F,le,me),G(F,oe,me),G(F,he,me),G(F,de,me),M(de,lt),M(de,ut),M(ut,sn),M(de,jn),M(de,$t),M($t,ur),M(de,hr),M(de,Tn),M(Tn,dr),M(de,fr),M(de,bn),M(bn,pr),M(de,mr),ys=!0},p:pe,i(F){ys||(Z(g.$$.fragment,F),Z(k.$$.fragment,F),Z(E.$$.fragment,F),ys=!0)},o(F){se(g.$$.fragment,F),se(k.$$.fragment,F),se(E.$$.fragment,F),ys=!1},d(F){F&&A(e),F&&A(n),F&&A(r),F&&A(l),F&&A(u),F&&A(d),F&&A(p),be(g),be(k),be(E),F&&A(U),F&&A(W),F&&A(xe),F&&A(Me),F&&A(ce),F&&A(ve),F&&A(Be),F&&A(je),F&&A(Ge),F&&A(mt),F&&A(L),F&&A(Q),F&&A(le),F&&A(oe),F&&A(he),F&&A(de)}}}class tp extends Pe{constructor(e){super(),Ve(this,e,null,ep,Oe,{})}}function np(s){let e,t='<path fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32" d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192Z"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 320L192 192m0 128l128-128"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function sp(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class rp extends Pe{constructor(e){super(),Ve(this,e,sp,np,Oe,{})}}const ip=s=>({}),Ro=s=>({});function op(s){let e,t,n,r,i,o,a,c,l,u,h,d,p,f,m,g;const v=s[2].title,w=Ki(v,s,s[1],Ro);l=new rp({});const C=s[2].default,S=Ki(C,s,s[1],null);return{c(){e=R("section"),t=R("div"),n=ee(),r=R("div"),i=R("header"),o=R("h1"),w&&w.c(),a=ee(),c=R("button"),ye(l.$$.fragment),u=ee(),h=R("div"),S&&S.c(),this.h()},l(_){e=P(_,"SECTION",{class:!0});var y=I(e);t=P(y,"DIV",{class:!0}),I(t).forEach(A),n=te(y),r=P(y,"DIV",{class:!0});var k=I(r);i=P(k,"HEADER",{class:!0});var T=I(i);o=P(T,"H1",{class:!0});var O=I(o);w&&w.l(O),O.forEach(A),a=te(T),c=P(T,"BUTTON",{class:!0});var x=I(c);we(l.$$.fragment,x),x.forEach(A),T.forEach(A),u=te(k),h=P(k,"DIV",{class:!0});var N=I(h);S&&S.l(N),N.forEach(A),k.forEach(A),y.forEach(A),this.h()},h(){q(t,"class","backdrop svelte-21kz3e"),q(o,"class","svelte-21kz3e"),q(c,"class","close svelte-21kz3e"),q(i,"class","svelte-21kz3e"),q(h,"class","body svelte-21kz3e"),q(r,"class","content svelte-21kz3e"),q(e,"class","svelte-21kz3e")},m(_,y){G(_,e,y),M(e,t),M(e,n),M(e,r),M(r,i),M(i,o),w&&w.m(o,null),M(i,a),M(i,c),Te(l,c,null),M(r,u),M(r,h),S&&S.m(h,null),f=!0,m||(g=[at(t,"click",s[3]),at(c,"click",s[4])],m=!0)},p(_,[y]){w&&w.p&&(!f||y&2)&&eo(w,v,_,_[1],f?no(v,_[1],y,ip):to(_[1]),Ro),S&&S.p&&(!f||y&2)&&eo(S,C,_,_[1],f?no(C,_[1],y,null):to(_[1]),null)},i(_){f||(Z(w,_),Z(l.$$.fragment,_),Z(S,_),On(()=>{d||(d=Ut(r,so,{start:.9},!0)),d.run(1)}),On(()=>{p||(p=Ut(e,an,{duration:100},!0)),p.run(1)}),f=!0)},o(_){se(w,_),se(l.$$.fragment,_),se(S,_),d||(d=Ut(r,so,{start:.9},!1)),d.run(0),p||(p=Ut(e,an,{duration:100},!1)),p.run(0),f=!1},d(_){_&&A(e),w&&w.d(_),be(l),S&&S.d(_),_&&d&&d.end(),_&&p&&p.end(),m=!1,Js(g)}}}function ap(s,e,t){let{$$slots:n={},$$scope:r}=e;const i=Qo(),o=()=>i("close"),a=()=>i("close");return s.$$set=c=>{"$$scope"in c&&t(1,r=c.$$scope)},[i,r,n,o,a]}class Ii extends Pe{constructor(e){super(),Ve(this,e,ap,op,Oe,{})}}function cp(s){let e,t='<path fill="currentColor" d="M384 336a63.78 63.78 0 0 0-46.12 19.7l-148-83.27a63.85 63.85 0 0 0 0-32.86l148-83.27a63.8 63.8 0 1 0-15.73-27.87l-148 83.27a64 64 0 1 0 0 88.6l148 83.27A64 64 0 1 0 384 336Z"/>',n=[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},s[0]],r={};for(let i=0;i<n.length;i+=1)r=Ae(r,n[i]);return{c(){e=Jt("svg"),this.h()},l(i){e=Kt(i,"svg",{preserveAspectRatio:!0,viewBox:!0,width:!0,height:!0});var o=I(e);o.forEach(A),this.h()},h(){ze(e,r)},m(i,o){G(i,e,o),e.innerHTML=t},p(i,[o]){ze(e,r=en(n,[{preserveAspectRatio:"xMidYMid meet"},{viewBox:"0 0 512 512"},{width:"1.2em"},{height:"1.2em"},o&1&&i[0]]))},i:pe,o:pe,d(i){i&&A(e)}}}function lp(s,e,t){return s.$$set=n=>{t(0,e=Ae(Ae({},e),Ye(n)))},e=Ye(e),[e]}class up extends Pe{constructor(e){super(),Ve(this,e,lp,cp,Oe,{})}}var Fr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){var n=new Date,r=n.getFullYear(),i=n.getMonth(),o=n.getDate(),a=new Date(0);return a.setFullYear(r,i,o+1),a.setHours(0,0,0,0),a}s.exports=e.default})(Fr,Fr.exports);var hp=ii(Fr.exports),qr={exports:{}},Wr={exports:{}},Qs={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){(0,n.default)(2,arguments);var c=(0,t.default)(o),l=(0,t.default)(a),u=c.getTime()-l.getTime();return u<0?-1:u>0?1:u}s.exports=e.default})(Qs,Qs.exports);var Lr={exports:{}},$r={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){(0,n.default)(2,arguments);var c=(0,t.default)(o),l=(0,t.default)(a),u=c.getFullYear()-l.getFullYear(),h=c.getMonth()-l.getMonth();return u*12+h}s.exports=e.default})($r,$r.exports);var Br={exports:{}},jr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,n.default)(1,arguments);var a=(0,t.default)(o);return a.setHours(23,59,59,999),a}s.exports=e.default})(jr,jr.exports);var Ur={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,n.default)(1,arguments);var a=(0,t.default)(o),c=a.getMonth();return a.setFullYear(a.getFullYear(),c+1,0),a.setHours(23,59,59,999),a}s.exports=e.default})(Ur,Ur.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=o(vt.exports),n=o(jr.exports),r=o(Ur.exports),i=o(Je.exports);function o(c){return c&&c.__esModule?c:{default:c}}function a(c){(0,i.default)(1,arguments);var l=(0,t.default)(c);return(0,n.default)(l).getTime()===(0,r.default)(l).getTime()}s.exports=e.default})(Br,Br.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=a(vt.exports),n=a($r.exports),r=a(Qs.exports),i=a(Je.exports),o=a(Br.exports);function a(l){return l&&l.__esModule?l:{default:l}}function c(l,u){(0,i.default)(2,arguments);var h=(0,t.default)(l),d=(0,t.default)(u),p=(0,r.default)(h,d),f=Math.abs((0,n.default)(h,d)),m;if(f<1)m=0;else{h.getMonth()===1&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-p*f);var g=(0,r.default)(h,d)===-p;(0,o.default)((0,t.default)(l))&&f===1&&(0,r.default)(l,d)===1&&(g=!1),m=p*(f-Number(g))}return m===0?0:m}s.exports=e.default})(Lr,Lr.exports);var Gr={exports:{}},zr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(vt.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){return(0,n.default)(2,arguments),(0,t.default)(o).getTime()-(0,t.default)(a).getTime()}s.exports=e.default})(zr,zr.exports);var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.getRoundingMethod=fp;var Po={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(s){return s<0?Math.ceil(s):Math.floor(s)}},dp="trunc";function fp(s){return s?Po[s]:Po[dp]}(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(zr.exports),n=i(Je.exports),r=Ri;function i(a){return a&&a.__esModule?a:{default:a}}function o(a,c,l){(0,n.default)(2,arguments);var u=(0,t.default)(a,c)/1e3;return(0,r.getRoundingMethod)(l?.roundingMethod)(u)}s.exports=e.default})(Gr,Gr.exports);var Yr={exports:{}},Hr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=function(i,o,a){var c,l=t[i];return typeof l=="string"?c=l:o===1?c=l.one:c=l.other.replace("{{count}}",o.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+c:c+" ago":c},r=n;e.default=r,s.exports=e.default})(Hr,Hr.exports);var Xr={exports:{}},Zr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.width?String(r.width):n.defaultWidth,o=n.formats[i]||n.formats[n.defaultWidth];return o}}s.exports=e.default})(Zr,Zr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Zr.exports);function n(l){return l&&l.__esModule?l:{default:l}}var r={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},i={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},a={date:(0,t.default)({formats:r,defaultWidth:"full"}),time:(0,t.default)({formats:i,defaultWidth:"full"}),dateTime:(0,t.default)({formats:o,defaultWidth:"full"})},c=a;e.default=c,s.exports=e.default})(Xr,Xr.exports);var Qr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=function(i,o,a,c){return t[i]},r=n;e.default=r,s.exports=e.default})(Qr,Qr.exports);var Jr={exports:{}},Kr={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(r,i){var o=i||{},a=o.context?String(o.context):"standalone",c;if(a==="formatting"&&n.formattingValues){var l=n.defaultFormattingWidth||n.defaultWidth,u=o.width?String(o.width):l;c=n.formattingValues[u]||n.formattingValues[l]}else{var h=n.defaultWidth,d=o.width?String(o.width):n.defaultWidth;c=n.values[d]||n.values[h]}var p=n.argumentCallback?n.argumentCallback(r):r;return c[p]}}s.exports=e.default})(Kr,Kr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Kr.exports);function n(p){return p&&p.__esModule?p:{default:p}}var r={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},i={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},a={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},c={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},u=function(p,f){var m=Number(p),g=m%100;if(g>20||g<10)switch(g%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"},h={ordinalNumber:u,era:(0,t.default)({values:r,defaultWidth:"wide"}),quarter:(0,t.default)({values:i,defaultWidth:"wide",argumentCallback:function(p){return p-1}}),month:(0,t.default)({values:o,defaultWidth:"wide"}),day:(0,t.default)({values:a,defaultWidth:"wide"}),dayPeriod:(0,t.default)({values:c,defaultWidth:"wide",formattingValues:l,defaultFormattingWidth:"wide"})},d=h;e.default=d,s.exports=e.default})(Jr,Jr.exports);var ei={exports:{}},ti={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(i){return function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.width,l=c&&i.matchPatterns[c]||i.matchPatterns[i.defaultMatchWidth],u=o.match(l);if(!u)return null;var h=u[0],d=c&&i.parsePatterns[c]||i.parsePatterns[i.defaultParseWidth],p=Array.isArray(d)?r(d,function(g){return g.test(h)}):n(d,function(g){return g.test(h)}),f;f=i.valueCallback?i.valueCallback(p):p,f=a.valueCallback?a.valueCallback(f):f;var m=o.slice(h.length);return{value:f,rest:m}}}function n(i,o){for(var a in i)if(i.hasOwnProperty(a)&&o(i[a]))return a}function r(i,o){for(var a=0;a<i.length;a++)if(o(i[a]))return a}s.exports=e.default})(ti,ti.exports);var ni={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(n.matchPattern);if(!o)return null;var a=o[0],c=r.match(n.parsePattern);if(!c)return null;var l=n.valueCallback?n.valueCallback(c[0]):c[0];l=i.valueCallback?i.valueCallback(l):l;var u=r.slice(a.length);return{value:l,rest:u}}}s.exports=e.default})(ni,ni.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(ti.exports),n=r(ni.exports);function r(C){return C&&C.__esModule?C:{default:C}}var i=/^(\d+)(th|st|nd|rd)?/i,o=/\d+/i,a={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c={any:[/^b/i,/^(a|c)/i]},l={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},u={any:[/1/i,/2/i,/3/i,/4/i]},h={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},d={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},f={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},g={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v={ordinalNumber:(0,n.default)({matchPattern:i,parsePattern:o,valueCallback:function(C){return parseInt(C,10)}}),era:(0,t.default)({matchPatterns:a,defaultMatchWidth:"wide",parsePatterns:c,defaultParseWidth:"any"}),quarter:(0,t.default)({matchPatterns:l,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any",valueCallback:function(C){return C+1}}),month:(0,t.default)({matchPatterns:h,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any"}),day:(0,t.default)({matchPatterns:p,defaultMatchWidth:"wide",parsePatterns:f,defaultParseWidth:"any"}),dayPeriod:(0,t.default)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:g,defaultParseWidth:"any"})},w=v;e.default=w,s.exports=e.default})(ei,ei.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Hr.exports),n=a(Xr.exports),r=a(Qr.exports),i=a(Jr.exports),o=a(ei.exports);function a(u){return u&&u.__esModule?u:{default:u}}var c={code:"en-US",formatDistance:t.default,formatLong:n.default,formatRelative:r.default,localize:i.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},l=c;e.default=l,s.exports=e.default})(Yr,Yr.exports);var si={exports:{}},ri={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,r){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");r=r||{};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}s.exports=e.default})(ri,ri.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=n(ri.exports);function n(i){return i&&i.__esModule?i:{default:i}}function r(i){return(0,t.default)({},i)}s.exports=e.default})(si,si.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=u(Qs.exports),n=u(Lr.exports),r=u(Gr.exports),i=u(Yr.exports),o=u(vt.exports),a=u(si.exports),c=u(Es.exports),l=u(Je.exports);function u(g){return g&&g.__esModule?g:{default:g}}var h=1440,d=2520,p=43200,f=86400;function m(g,v){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,l.default)(2,arguments);var C=w.locale||i.default;if(!C.formatDistance)throw new RangeError("locale must contain formatDistance property");var S=(0,t.default)(g,v);if(isNaN(S))throw new RangeError("Invalid time value");var _=(0,a.default)(w);_.addSuffix=Boolean(w.addSuffix),_.comparison=S;var y,k;S>0?(y=(0,o.default)(v),k=(0,o.default)(g)):(y=(0,o.default)(g),k=(0,o.default)(v));var T=(0,r.default)(k,y),O=((0,c.default)(k)-(0,c.default)(y))/1e3,x=Math.round((T-O)/60),N;if(x<2)return w.includeSeconds?T<5?C.formatDistance("lessThanXSeconds",5,_):T<10?C.formatDistance("lessThanXSeconds",10,_):T<20?C.formatDistance("lessThanXSeconds",20,_):T<40?C.formatDistance("halfAMinute",null,_):T<60?C.formatDistance("lessThanXMinutes",1,_):C.formatDistance("xMinutes",1,_):x===0?C.formatDistance("lessThanXMinutes",1,_):C.formatDistance("xMinutes",x,_);if(x<45)return C.formatDistance("xMinutes",x,_);if(x<90)return C.formatDistance("aboutXHours",1,_);if(x<h){var b=Math.round(x/60);return C.formatDistance("aboutXHours",b,_)}else{if(x<d)return C.formatDistance("xDays",1,_);if(x<p){var D=Math.round(x/h);return C.formatDistance("xDays",D,_)}else if(x<f)return N=Math.round(x/p),C.formatDistance("aboutXMonths",N,_)}if(N=(0,n.default)(k,y),N<12){var E=Math.round(x/p);return C.formatDistance("xMonths",E,_)}else{var j=N%12,V=Math.floor(N/12);return j<3?C.formatDistance("aboutXYears",V,_):j<9?C.formatDistance("overXYears",V,_):C.formatDistance("almostXYears",V+1,_)}}s.exports=e.default})(Wr,Wr.exports);(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=r(Wr.exports),n=r(Je.exports);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){return(0,n.default)(1,arguments),(0,t.default)(o,Date.now(),a)}s.exports=e.default})(qr,qr.exports);var pp=ii(qr.exports);function Vo(s){let e,t;return{c(){e=R("span"),t=H("Copied!")},l(n){e=P(n,"SPAN",{});var r=I(e);t=X(r,"Copied!"),r.forEach(A)},m(n,r){G(n,e,r),M(e,t)},d(n){n&&A(e)}}}function mp(s){let e,t,n,r,i,o,a,c,l,u,h,d,p,f,m=s[0]&&Vo();return h=new up({}),{c(){e=R("div"),t=R("span"),n=H("You get a new melody tomorrow, in "),r=R("strong"),i=H(s[2]),o=H("."),a=ee(),m&&m.c(),c=ee(),l=R("button"),u=H("Share "),ye(h.$$.fragment),this.h()},l(g){e=P(g,"DIV",{class:!0});var v=I(e);t=P(v,"SPAN",{});var w=I(t);n=X(w,"You get a new melody tomorrow, in "),r=P(w,"STRONG",{});var C=I(r);i=X(C,s[2]),C.forEach(A),o=X(w,"."),w.forEach(A),a=te(v),m&&m.l(v),c=te(v),l=P(v,"BUTTON",{class:!0});var S=I(l);u=X(S,"Share "),we(h.$$.fragment,S),S.forEach(A),v.forEach(A),this.h()},h(){q(l,"class","svelte-k43eck"),q(e,"class","share svelte-k43eck")},m(g,v){G(g,e,v),M(e,t),M(t,n),M(t,r),M(r,i),M(t,o),M(e,a),m&&m.m(e,null),M(e,c),M(e,l),M(l,u),Te(h,l,null),d=!0,p||(f=at(l,"click",s[1]),p=!0)},p(g,[v]){g[0]?m||(m=Vo(),m.c(),m.m(e,c)):m&&(m.d(1),m=null)},i(g){d||(Z(h.$$.fragment,g),d=!0)},o(g){se(h.$$.fragment,g),d=!1},d(g){g&&A(e),m&&m.d(),be(h),p=!1,f()}}}function _p(s,e,t){let n;Qe(s,nt,a=>t(3,n=a));let r=!1;const i=()=>{let a="";n.guesses.forEach(l=>{a+=Ko(n.melody,l.melody,{difficulty:n.difficulty,submitted:!0}).map(u=>{switch(u.status){case"correct":return"\u{1F7E9}";case"incorrect":return"\u2B1C";case"wrong-position":return"\u{1F7E8}";case"adjacent":return"\u{1F7EA}";default:return"??"}}).join(""),n.guesses.length===1&&(a+="\u{1F389}"),a+=`
`});const c=`#Melodle ${n.difficulty} ${n.index+1} \u{1F3B6}
${a}https://melodle.yesmeno.com`;typeof navigator.share<"u"&&navigator.canShare({text:c})?navigator.share({text:c}):(navigator.clipboard.writeText(c),t(0,r=!0))};let o=pp(hp());return[r,i,o]}class gp extends Pe{constructor(e){super(),Ve(this,e,_p,mp,Oe,{})}}function Fo(s){let e,t,n,r;return n=new gp({}),{c(){e=R("hr"),t=ee(),ye(n.$$.fragment)},l(i){e=P(i,"HR",{}),t=te(i),we(n.$$.fragment,i)},m(i,o){G(i,e,o),G(i,t,o),Te(n,i,o),r=!0},i(i){r||(Z(n.$$.fragment,i),r=!0)},o(i){se(n.$$.fragment,i),r=!1},d(i){i&&A(e),i&&A(t),be(n,i)}}}function vp(s){let e,t,n,r=s[0].playedGames+"",i,o,a,c,l,u,h,d=Math.round(s[0].winPercentage*100)+"",p,f,m,g,v,w,C,S=s[0].currentStreak+"",_,y,k,T,O,x,N,b=s[0].maxStreak+"",D,E,j,V,B,J,z,U=s[1].state!=="playing"&&Fo();return{c(){e=R("div"),t=R("div"),n=R("div"),i=H(r),o=ee(),a=R("div"),c=H("Played"),l=ee(),u=R("div"),h=R("div"),p=H(d),f=ee(),m=R("div"),g=H("Win %"),v=ee(),w=R("div"),C=R("div"),_=H(S),y=ee(),k=R("div"),T=H("Current Streak"),O=ee(),x=R("div"),N=R("div"),D=H(b),E=ee(),j=R("div"),V=H("Max Streak"),B=ee(),U&&U.c(),J=kt(),this.h()},l(W){e=P(W,"DIV",{class:!0});var K=I(e);t=P(K,"DIV",{class:!0});var xe=I(t);n=P(xe,"DIV",{class:!0});var Me=I(n);i=X(Me,r),Me.forEach(A),o=te(xe),a=P(xe,"DIV",{class:!0});var ne=I(a);c=X(ne,"Played"),ne.forEach(A),xe.forEach(A),l=te(K),u=P(K,"DIV",{class:!0});var ce=I(u);h=P(ce,"DIV",{class:!0});var ve=I(h);p=X(ve,d),ve.forEach(A),f=te(ce),m=P(ce,"DIV",{class:!0});var Y=I(m);g=X(Y,"Win %"),Y.forEach(A),ce.forEach(A),v=te(K),w=P(K,"DIV",{class:!0});var Be=I(w);C=P(Be,"DIV",{class:!0});var je=I(C);_=X(je,S),je.forEach(A),y=te(Be),k=P(Be,"DIV",{class:!0});var it=I(k);T=X(it,"Current Streak"),it.forEach(A),Be.forEach(A),O=te(K),x=P(K,"DIV",{class:!0});var Ge=I(x);N=P(Ge,"DIV",{class:!0});var mt=I(N);D=X(mt,b),mt.forEach(A),E=te(Ge),j=P(Ge,"DIV",{class:!0});var Lt=I(j);V=X(Lt,"Max Streak"),Lt.forEach(A),Ge.forEach(A),K.forEach(A),B=te(W),U&&U.l(W),J=kt(),this.h()},h(){q(n,"class","number svelte-1c74lvr"),q(a,"class","name"),q(t,"class","stat svelte-1c74lvr"),q(h,"class","number svelte-1c74lvr"),q(m,"class","name"),q(u,"class","stat svelte-1c74lvr"),q(C,"class","number svelte-1c74lvr"),q(k,"class","name"),q(w,"class","stat svelte-1c74lvr"),q(N,"class","number svelte-1c74lvr"),q(j,"class","name"),q(x,"class","stat svelte-1c74lvr"),q(e,"class","stats svelte-1c74lvr")},m(W,K){G(W,e,K),M(e,t),M(t,n),M(n,i),M(t,o),M(t,a),M(a,c),M(e,l),M(e,u),M(u,h),M(h,p),M(u,f),M(u,m),M(m,g),M(e,v),M(e,w),M(w,C),M(C,_),M(w,y),M(w,k),M(k,T),M(e,O),M(e,x),M(x,N),M(N,D),M(x,E),M(x,j),M(j,V),G(W,B,K),U&&U.m(W,K),G(W,J,K),z=!0},p(W,[K]){(!z||K&1)&&r!==(r=W[0].playedGames+"")&&Rt(i,r),(!z||K&1)&&d!==(d=Math.round(W[0].winPercentage*100)+"")&&Rt(p,d),(!z||K&1)&&S!==(S=W[0].currentStreak+"")&&Rt(_,S),(!z||K&1)&&b!==(b=W[0].maxStreak+"")&&Rt(D,b),W[1].state!=="playing"?U?K&2&&Z(U,1):(U=Fo(),U.c(),Z(U,1),U.m(J.parentNode,J)):U&&(Gt(),se(U,1,1,()=>{U=null}),zt())},i(W){z||(Z(U),z=!0)},o(W){se(U),z=!1},d(W){W&&A(e),W&&A(B),U&&U.d(W),W&&A(J)}}}function yp(s,e,t){let n,r;return Qe(s,sa,i=>t(0,n=i)),Qe(s,nt,i=>t(1,r=i)),[n,r]}class wp extends Pe{constructor(e){super(),Ve(this,e,yp,vp,Oe,{})}}function qo(s,e,t){const n=s.slice();return n[2]=e[t],n}function Wo(s){let e,t=s[2]+"",n,r,i,o,a=Ct(0,{notation:s[2]})+"",c,l,u,h=Ct(1,{notation:s[2]})+"",d,p,f,m,g,v,w=Ct(11,{notation:s[2]})+"",C,S,_,y;function k(){return s[1](s[2])}return{c(){e=R("button"),n=H(t),r=ee(),i=R("div"),o=R("span"),c=H(a),l=ee(),u=R("span"),d=H(h),p=ee(),f=R("span"),m=H("\u2192"),g=ee(),v=R("span"),C=H(w),S=ee(),this.h()},l(T){e=P(T,"BUTTON",{class:!0});var O=I(e);n=X(O,t),O.forEach(A),r=te(T),i=P(T,"DIV",{class:!0});var x=I(i);o=P(x,"SPAN",{class:!0});var N=I(o);c=X(N,a),N.forEach(A),l=te(x),u=P(x,"SPAN",{class:!0});var b=I(u);d=X(b,h),b.forEach(A),p=te(x),f=P(x,"SPAN",{class:!0});var D=I(f);m=X(D,"\u2192"),D.forEach(A),g=te(x),v=P(x,"SPAN",{class:!0});var E=I(v);C=X(E,w),E.forEach(A),S=te(x),x.forEach(A),this.h()},h(){q(e,"class","pill svelte-1emr9u5"),ht(e,"selected",s[0].notation===s[2]),q(o,"class","svelte-1emr9u5"),q(u,"class","svelte-1emr9u5"),q(f,"class","svelte-1emr9u5"),q(v,"class","svelte-1emr9u5"),q(i,"class","name")},m(T,O){G(T,e,O),M(e,n),G(T,r,O),G(T,i,O),M(i,o),M(o,c),M(i,l),M(i,u),M(u,d),M(i,p),M(i,f),M(f,m),M(i,g),M(i,v),M(v,C),M(i,S),_||(y=at(e,"click",Un(k)),_=!0)},p(T,O){s=T,O&1&&ht(e,"selected",s[0].notation===s[2])},d(T){T&&A(e),T&&A(r),T&&A(i),_=!1,y()}}}function Tp(s){let e,t,n=Cr,r=[];for(let i=0;i<n.length;i+=1)r[i]=Wo(qo(s,n,i));return{c(){e=H(`Choose how you want your notes to be named:

`),t=R("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=X(i,`Choose how you want your notes to be named:

`),t=P(i,"DIV",{class:!0});var o=I(t);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(A),this.h()},h(){q(t,"class","notations svelte-1emr9u5")},m(i,o){G(i,e,o),G(i,t,o);for(let a=0;a<r.length;a+=1)r[a].m(t,null)},p(i,[o]){if(o&1){n=Cr;let a;for(a=0;a<n.length;a+=1){const c=qo(i,n,a);r[a]?r[a].p(c,o):(r[a]=Wo(c),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:pe,o:pe,d(i){i&&A(e),i&&A(t),Vn(r,i)}}}function bp(s,e,t){let n;return Qe(s,Yn,i=>t(0,n=i)),[n,i=>Yn.setNotation(i)]}class Sp extends Pe{constructor(e){super(),Ve(this,e,bp,Tp,Oe,{})}}function Lo(s,e,t){const n=s.slice();return n[14]=e[t],n}function $o(s){let e,t=s[14]+"",n,r,i;function o(){return s[9](s[14])}return{c(){e=R("a"),n=H(t),this.h()},l(a){e=P(a,"A",{class:!0,href:!0});var c=I(e);n=X(c,t),c.forEach(A),this.h()},h(){q(e,"class","pill"),q(e,"href","/"),ht(e,"selected",s[3]===s[14])},m(a,c){G(a,e,c),M(e,n),r||(i=at(e,"click",Un(o)),r=!0)},p(a,c){s=a,c&8&&ht(e,"selected",s[3]===s[14])},d(a){a&&A(e),r=!1,i()}}}function Bo(s){let e,t;return e=new Ii({props:{$$slots:{title:[kp],default:[Cp]},$$scope:{ctx:s}}}),e.$on("close",s[4]),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},p(n,r){const i={};r&131072&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Cp(s){let e,t;return e=new tp({}),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function kp(s){let e,t;return{c(){e=R("div"),t=H("Rules"),this.h()},l(n){e=P(n,"DIV",{slot:!0});var r=I(e);t=X(r,"Rules"),r.forEach(A),this.h()},h(){q(e,"slot","title")},m(n,r){G(n,e,r),M(e,t)},p:pe,d(n){n&&A(e)}}}function jo(s){let e,t;return e=new Ii({props:{$$slots:{title:[xp],default:[Ap]},$$scope:{ctx:s}}}),e.$on("close",s[12]),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},p(n,r){const i={};r&131080&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Ap(s){let e,t;return e=new wp({}),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function xp(s){let e,t,n;return{c(){e=H("Statistics "),t=R("span"),n=H(s[3]),this.h()},l(r){e=X(r,"Statistics "),t=P(r,"SPAN",{class:!0});var i=I(t);n=X(i,s[3]),i.forEach(A),this.h()},h(){q(t,"class","pill")},m(r,i){G(r,e,i),G(r,t,i),M(t,n)},p(r,i){i&8&&Rt(n,r[3])},d(r){r&&A(e),r&&A(t)}}}function Uo(s){let e,t;return e=new Ii({props:{$$slots:{title:[Np],default:[Mp]},$$scope:{ctx:s}}}),e.$on("close",s[13]),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},p(n,r){const i={};r&131072&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Mp(s){let e,t;return e=new Sp({}),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Np(s){let e,t;return{c(){e=R("div"),t=H("Settings"),this.h()},l(n){e=P(n,"DIV",{slot:!0});var r=I(e);t=X(r,"Settings"),r.forEach(A),this.h()},h(){q(e,"slot","title")},m(n,r){G(n,e,r),M(e,t)},p:pe,d(n){n&&A(e)}}}function Op(s){let e,t,n,r,i,o,a,c,l,u,h,d,p,f,m,g,v,w,C,S,_,y;n=new Yf({});let k=yr,T=[];for(let b=0;b<k.length;b+=1)T[b]=$o(Lo(s,k,b));d=new Kf({}),m=new Zf({});let O=s[0]&&Bo(s),x=s[1]&&jo(s),N=s[2]&&Uo(s);return{c(){e=R("nav"),t=R("a"),ye(n.$$.fragment),r=ee(),i=R("div"),o=R("strong"),a=H("Melodle"),c=ee(),l=R("div");for(let b=0;b<T.length;b+=1)T[b].c();u=ee(),h=R("a"),ye(d.$$.fragment),p=ee(),f=R("a"),ye(m.$$.fragment),g=ee(),O&&O.c(),v=ee(),x&&x.c(),w=ee(),N&&N.c(),C=kt(),this.h()},l(b){e=P(b,"NAV",{class:!0});var D=I(e);t=P(D,"A",{href:!0});var E=I(t);we(n.$$.fragment,E),E.forEach(A),r=te(D),i=P(D,"DIV",{class:!0});var j=I(i);o=P(j,"STRONG",{});var V=I(o);a=X(V,"Melodle"),V.forEach(A),c=te(j),l=P(j,"DIV",{class:!0});var B=I(l);for(let U=0;U<T.length;U+=1)T[U].l(B);B.forEach(A),j.forEach(A),u=te(D),h=P(D,"A",{href:!0});var J=I(h);we(d.$$.fragment,J),J.forEach(A),p=te(D),f=P(D,"A",{href:!0});var z=I(f);we(m.$$.fragment,z),z.forEach(A),D.forEach(A),g=te(b),O&&O.l(b),v=te(b),x&&x.l(b),w=te(b),N&&N.l(b),C=kt(),this.h()},h(){q(t,"href","/"),q(l,"class","difficulties svelte-1dudseb"),q(i,"class","name svelte-1dudseb"),q(h,"href","/"),q(f,"href","/"),q(e,"class","svelte-1dudseb")},m(b,D){G(b,e,D),M(e,t),Te(n,t,null),M(e,r),M(e,i),M(i,o),M(o,a),M(i,c),M(i,l);for(let E=0;E<T.length;E+=1)T[E].m(l,null);M(e,u),M(e,h),Te(d,h,null),M(e,p),M(e,f),Te(m,f,null),G(b,g,D),O&&O.m(b,D),G(b,v,D),x&&x.m(b,D),G(b,w,D),N&&N.m(b,D),G(b,C,D),S=!0,_||(y=[at(t,"click",Un(s[8])),at(h,"click",Un(s[10])),at(f,"click",Un(s[11]))],_=!0)},p(b,[D]){if(D&8){k=yr;let E;for(E=0;E<k.length;E+=1){const j=Lo(b,k,E);T[E]?T[E].p(j,D):(T[E]=$o(j),T[E].c(),T[E].m(l,null))}for(;E<T.length;E+=1)T[E].d(1);T.length=k.length}b[0]?O?(O.p(b,D),D&1&&Z(O,1)):(O=Bo(b),O.c(),Z(O,1),O.m(v.parentNode,v)):O&&(Gt(),se(O,1,1,()=>{O=null}),zt()),b[1]?x?(x.p(b,D),D&2&&Z(x,1)):(x=jo(b),x.c(),Z(x,1),x.m(w.parentNode,w)):x&&(Gt(),se(x,1,1,()=>{x=null}),zt()),b[2]?N?(N.p(b,D),D&4&&Z(N,1)):(N=Uo(b),N.c(),Z(N,1),N.m(C.parentNode,C)):N&&(Gt(),se(N,1,1,()=>{N=null}),zt())},i(b){S||(Z(n.$$.fragment,b),Z(d.$$.fragment,b),Z(m.$$.fragment,b),Z(O),Z(x),Z(N),S=!0)},o(b){se(n.$$.fragment,b),se(d.$$.fragment,b),se(m.$$.fragment,b),se(O),se(x),se(N),S=!1},d(b){b&&A(e),be(n),Vn(T,b),be(d),be(m),b&&A(g),O&&O.d(b),b&&A(v),x&&x.d(b),b&&A(w),N&&N.d(b),b&&A(C),_=!1,Js(y)}}}function Dp(s,e,t){let n,r;Qe(s,nt,v=>t(7,n=v)),Qe(s,Ht,v=>t(3,r=v));let i=typeof localStorage<"u"&&!localStorage.getItem("showedHelp");const o=()=>{t(0,i=!1),localStorage.setItem("showedHelp","true")};let a=n.state,c=n.difficulty,l=n.state!=="playing",u=!1;const h=()=>t(0,i=!0),d=v=>mc(Ht,r=v,r),p=()=>t(2,u=!0),f=()=>t(1,l=!0),m=()=>t(1,l=!1),g=()=>t(2,u=!1);return s.$$.update=()=>{s.$$.dirty&224&&(n.state!=="playing"&&(a==="playing"||c!==n.difficulty)&&setTimeout(()=>{console.log("showing"),t(1,l=!0)},1e3),t(5,a=n.state),t(6,c=n.difficulty))},[i,l,u,r,o,a,c,n,h,d,p,f,m,g]}class Ep extends Pe{constructor(e){super(),Ve(this,e,Dp,Op,Oe,{})}}function Go(s,e,t){const n=s.slice();return n[4]=e[t],n}function zo(s){let e,t,n,r=s[0].melody.map(s[2]),i=[];for(let o=0;o<r.length;o+=1)i[o]=Yo(Go(s,r,o));return{c(){e=R("div"),t=R("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=P(o,"DIV",{class:!0});var a=I(e);t=P(a,"DIV",{class:!0});var c=I(t);for(let l=0;l<i.length;l+=1)i[l].l(c);c.forEach(A),a.forEach(A),this.h()},h(){q(t,"class","notes svelte-1548acw"),q(e,"class","solution svelte-1548acw")},m(o,a){G(o,e,a),M(e,t);for(let c=0;c<i.length;c+=1)i[c].m(t,null)},p(o,a){if(a&3){r=o[0].melody.map(o[2]);let c;for(c=0;c<r.length;c+=1){const l=Go(o,r,c);i[c]?i[c].p(l,a):(i[c]=Yo(l),i[c].c(),i[c].m(t,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=r.length}},i(o){n||On(()=>{n=Xo(e,an,{duration:500,delay:1e3}),n.start()})},o:pe,d(o){o&&A(e),Vn(i,o)}}}function Yo(s){let e,t=s[4]+"",n;return{c(){e=R("span"),n=H(t)},l(r){e=P(r,"SPAN",{});var i=I(e);n=X(i,t),i.forEach(A)},m(r,i){G(r,e,i),M(e,n)},p(r,i){i&3&&t!==(t=r[4]+"")&&Rt(n,t)},d(r){r&&A(e)}}}function Ho(s){let e,t,n,r;e=new Pc({});let i=s[0].state==="failed"&&zo(s);return{c(){ye(e.$$.fragment),t=ee(),i&&i.c(),n=kt()},l(o){we(e.$$.fragment,o),t=te(o),i&&i.l(o),n=kt()},m(o,a){Te(e,o,a),G(o,t,a),i&&i.m(o,a),G(o,n,a),r=!0},p(o,a){o[0].state==="failed"?i?(i.p(o,a),a&1&&Z(i,1)):(i=zo(o),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(o){r||(Z(e.$$.fragment,o),Z(i),r=!0)},o(o){se(e.$$.fragment,o),r=!1},d(o){be(e,o),o&&A(t),i&&i.d(o),o&&A(n)}}}function Ip(s){let e,t,n,r,i=`${s[0].index}-${s[0].difficulty}`,o,a,c;t=new Ep({});let l=Ho(s);return a=new Uf({}),a.$on("add",s[3]),a.$on("delete",nt.deleteGuess),a.$on("submit",nt.submit),a.$on("sharp",nt.sharp),a.$on("flat",nt.flat),{c(){e=R("div"),ye(t.$$.fragment),n=ee(),r=R("div"),l.c(),o=ee(),ye(a.$$.fragment),this.h()},l(u){e=P(u,"DIV",{class:!0});var h=I(e);we(t.$$.fragment,h),n=te(h),r=P(h,"DIV",{class:!0});var d=I(r);l.l(d),d.forEach(A),o=te(h),we(a.$$.fragment,h),h.forEach(A),this.h()},h(){q(r,"class","guesses svelte-1548acw"),q(e,"class","board svelte-1548acw")},m(u,h){G(u,e,h),Te(t,e,null),M(e,n),M(e,r),l.m(r,null),M(e,o),Te(a,e,null),c=!0},p(u,[h]){h&1&&Oe(i,i=`${u[0].index}-${u[0].difficulty}`)?(Gt(),se(l,1,1,pe),zt(),l=Ho(u),l.c(),Z(l),l.m(r,null)):l.p(u,h)},i(u){c||(Z(t.$$.fragment,u),Z(l),Z(a.$$.fragment,u),c=!0)},o(u){se(t.$$.fragment,u),se(l),se(a.$$.fragment,u),c=!1},d(u){u&&A(e),be(t),l.d(u),be(a)}}}function Rp(s,e,t){let n,r;return Qe(s,nt,a=>t(0,n=a)),Qe(s,Yn,a=>t(1,r=a)),[n,r,a=>Ct(a,{notation:r.notation}),a=>nt.addGuessNote(a.detail)]}class Pp extends Pe{constructor(e){super(),Ve(this,e,Rp,Ip,Oe,{})}}function Vp(s){let e,t;return e=new Pp({}),{c(){ye(e.$$.fragment)},l(n){we(e.$$.fragment,n)},m(n,r){Te(e,n,r),t=!0},p:pe,i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){se(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}class fm extends Pe{constructor(e){super(),Ve(this,e,null,Vp,Oe,{})}}export{fm as default};
